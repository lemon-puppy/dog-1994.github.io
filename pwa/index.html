<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Hello PWA</title>
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="./main.css">
  <link rel="manifest" href="./manifest.json">
</head>

<body>
  <h3>Hello PWA</h3>
</body>
<script>
  // 检测浏览器是否支持SW
  if ('serviceWorker' in window.navigator) {
            const registerServiceWorker = async () => {
                if ("serviceWorker" in navigator) {
                    try {
                        const registration = await navigator.serviceWorker.register("./sw.js", {
                            scope: "./",
                        });
                        if (registration.installing) {
                            console.log("正在安装 Service worker");
                        } else if (registration.waiting) {
                            console.log("已安装 Service worker installed");
                        } else if (registration.active) {
                            console.log("激活 Service worker");
                        }
                    } catch (error) {
                        console.error(`注册失败：${error}`);
                    }
                }
            };
            registerServiceWorker();
        }
</script>

</html>