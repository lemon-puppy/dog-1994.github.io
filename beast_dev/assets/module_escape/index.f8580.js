window.__require=function t(e,o,n){function r(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({AStar:[function(t,e,o){"use strict";cc._RF.push(e,"becf359V8dBl7DkIcQtdawO","AStar");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Point=void 0;var s=cc._decorator,a=s.ccclass,l=(s.property,function(t,e){this.G=0,this.H=0,this.F=0,this.father=null,this.is_close=!1,this.targetName="",this.x=t,this.y=e});o.Point=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getRoute=function(t,e,o,n){var r=this;this.is_find=!1,this.arr_open=[],this.pppp=null,this.start=i({},t),this.end=i({},e),this.map=new Map,o.forEach(function(t,e){r.map.set(e,i({},t))}),this.size=n,o.get(this.start.x+this.start.y*this.size.width).G=0;var c=new Array;try{this.search(this.start)}catch(s){return cc.error("\u4f4d\u7f6e\u4e0d\u5bf9"),c}return this.pppp&&this.getFather(this.pppp,c),c},e.search=function(t){var e=this;if(t.x==this.end.x&&t.y==this.end.y)return this.is_find=!0,void(this.pppp=t);this.getAround(t).forEach(function(o){e.setFather(o,t)}),this.arr_open.sort(this.compare),this.arr_open.forEach(function(t,o,n){t.is_close&&n.splice(o,1),e.is_find||e.search(t)})},e.getAround=function(t){t.is_close=!0;var e,o,n=new Array;return 0!=t.y&&(e=t.x+(t.y-1)*this.size.width,(o=this.map.get(e))&&!o.is_close&&(n.push(this.map.get(e)),this.arr_open.push(this.map.get(e)))),t.y+1!=this.size.height&&(e=t.x+(t.y+1)*this.size.width,(o=this.map.get(e))&&!o.is_close&&(n.push(this.map.get(e)),this.arr_open.push(this.map.get(e)))),0!=t.x&&(e=t.x-1+t.y*this.size.width,(o=this.map.get(e))&&!o.is_close&&(n.push(this.map.get(e)),this.arr_open.push(this.map.get(e)))),t.x+1!=this.size.width&&(e=t.x+1+t.y*this.size.width,(o=this.map.get(e))&&!o.is_close&&(n.push(this.map.get(e)),this.arr_open.push(this.map.get(e)))),n},e.isValidPoint=function(t,e){return t>=0&&e>=0&&t<this.size.width&&e<this.size.height},e.setFather=function(t,e){(!t.father||t.father.G>e.G)&&(t.father=e,t.G=t.father.G+1,t.H=Math.abs(t.x-this.end.x)+Math.abs(t.y-this.end.y),t.F=t.G+t.H)},e.compare=function(t,e){return t.F>e.F?1:-1},e.getFather=function(t,e){var o=t.father;o&&this.getFather(o,e),e.push(t)},e.start=null,e.end=null,e.map=null,e.size=null,e.arr_open=[],e.pppp=null,e.is_find=!1,c([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],addrEdit:[function(t,e,o){"use strict";cc._RF.push(e,"74ebeHifgVM3pDiBLgIsq5/","addrEdit");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../scripts/G"),u=a(t("./escapeMgr")),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.addr_name=null,e.addr_phone=null,e.addr_detail=null,e.isDefault=null,e.addrId=0,e.sucCb=null,e.placeholder="",e}return r(e,t),e.prototype.start=function(){},e.prototype.setData=function(t,e){this.sucCb=t,null!==e&&(this.addrId=e.id,this.addr_name.string=e.name,this.addr_phone.string=e.mobile,this.addr_detail.string=e.address,this.isDefault.isChecked=e.is_default)},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.checkInput=function(){return""==this.addr_name.string?null:""==this.addr_phone.string?null:""==this.addr_detail.string?null:void 0},e.prototype.btnSaveClicked=function(){var t,e;return c(this,void 0,void 0,function(){var o;return s(this,function(n){switch(n.label){case 0:return null===this.checkInput()?[3,2]:[4,null===(t=l.G.clientHttp)||void 0===t?void 0:t.callApi("MyAddressEdit",{uid:l.G.uid,id:this.addrId,name:this.addr_name.string,mobile:this.addr_phone.string,address:this.addr_detail.string,is_default:this.isDefault.isChecked})];case 1:if(!(o=n.sent()).isSucc)return u.default.inst.showWarning(null===(e=o.err)||void 0===e?void 0:e.message),[2];1==o.res.result?u.default.inst.showWarning(o.res.message):(this.sucCb&&this.sucCb(),this.node.destroy()),n.label=2;case 2:return[2]}})})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([h(cc.EditBox)],e.prototype,"addr_name",void 0),i([h(cc.EditBox)],e.prototype,"addr_phone",void 0),i([h(cc.EditBox)],e.prototype,"addr_detail",void 0),i([h(cc.Toggle)],e.prototype,"isDefault",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],addrMgr:[function(t,e,o){"use strict";cc._RF.push(e,"33e6fixJ4BNzopqZwEovbUJ","addrMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../scripts/G"),u=a(t("./escapeMgr")),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.selectCall=null,e}return r(e,t),e.prototype.start=function(){this.loadMyAddrList()},e.prototype.setCallback=function(t){this.selectCall=t},e.prototype.loadMyAddrList=function(){var t,e;return c(this,void 0,void 0,function(){var o,n,r,i,c,a=this;return s(this,function(s){switch(s.label){case 0:return this.content.removeAllChildren(),[4,null===(t=l.G.clientHttp)||void 0===t?void 0:t.callApi("MyAddressList",{uid:l.G.uid})];case 1:if(!(o=s.sent()).isSucc)return u.default.inst.showWarning(null===(e=o.err)||void 0===e?void 0:e.message),[2];if(o.res.list.length>0)for(n=function(t){var e=o.res.list[t],n=cc.instantiate(r.item);n.active=!0,n.parent=r.content,n.children[2].active=e.is_default,n.children[3].on("click",function(){u.default.inst.showAddrEdit(function(){a.loadMyAddrList()},e)}),n.children[4].getComponent(cc.Label).string=e.name+" "+e.mobile,n.children[5].getComponent(cc.Label).string=e.address,n.on("click",function(){a.selectCall&&(a.selectCall(e),a.node.destroy())})},r=this,i=0,c=o.res.list.length;i<c;i++)n(i);return[2]}})})},e.prototype.btnAddClicked=function(){var t=this;u.default.inst.showAddrEdit(function(){t.loadMyAddrList()})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([h(cc.Node)],e.prototype,"content",void 0),i([h(cc.Node)],e.prototype,"item",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],audioSet:[function(t,e,o){"use strict";cc._RF.push(e,"386058Ka8hPsK/LHRqT99uU","audioSet");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../core_lmn/core"),s=t("../../scripts/G"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicToggle=null,e.effectToggle=null,e}return r(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.loadCurAudioState()},e.prototype.loadCurAudioState=function(){var t=cc.audioEngine.getMusicVolume();this.musicToggle.isChecked=1==t;var e=cc.audioEngine.getEffectsVolume();this.effectToggle.isChecked=1==e},e.prototype.toggleChecked=function(t){if(cc.log(t.target.name),"m"==t.target.name){var e=t.target.isChecked?1:0;cc.audioEngine.setMusicVolume(e),s.G.saveData("myGameMv",e)}else{var o=t.target.isChecked?1:0;cc.audioEngine.setEffectsVolume(o),s.G.saveData("myGameEv",o)}},e.prototype.onCloseClicked=function(){this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},i([u(cc.Toggle)],e.prototype,"musicToggle",void 0),i([u(cc.Toggle)],e.prototype,"effectToggle",void 0),i([l],e)}(c.PopupBase);o.default=p,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0}],auth:[function(t,e,o){"use strict";cc._RF.push(e,"bd3cbkTFWVAM66ooIXrZ4x0","auth");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state1=null,e.state2=null,e.selectLab=null,e.selectList=null,e.selectItem=null,e.nameEdit=null,e.IDEdit=null,e.result=null,e.iconN=null,e.resultIcon=[],e.resultTip=null,e.btnSure=null,e.btnLab=null,e.nameV=null,e.idV=null,e.placeholder="",e.curID=0,e.typeList=["CPF","CNPJ"],e.curTypeIndex=-1,e.curState=0,e.isReEdit=!1,e}return r(e,t),e.prototype.start=function(){this.checkUseAuthState()},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.checkUseAuthState=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,u.G.clientHttp.callApi("MyIdentityInfo",{uid:u.G.uid})];case 1:return(t=e.sent()).isSucc?(1==t.res.result?2==t.res.code&&(this.btnSure.active=!0,this.curState=0,this.checkState()):0==t.res.result&&(this.nameV.string=t.res.name,this.idV.string=Myfun.maskIDNumber(t.res.idNo,2,2),this.curID=t.res.identity_id,this.checkResult(t.res.state)),[2]):[2]}})})},e.prototype.checkInput=function(){return""==this.nameEdit.string?(p.default.inst.showWarning("auth_info3"),null):""==this.IDEdit.string?(p.default.inst.showWarning("auth_info4"),null):-1==this.curTypeIndex?(p.default.inst.showWarning("auth_tip3"),null):void 0},e.prototype.checkState=function(){0==this.curState?(this.state1.active=!0,this.btnLab.getComponent(l.i18nLabel).init("auth_btn1",[])):1==this.curState&&(this.state1.active=!1,this.state2.active=!0,this.result.active=!1,this.btnLab.getComponent(l.i18nLabel).init("auth_btn1",[]))},e.prototype.checkResult=function(t){this.state2.active=!1,this.result.active=!0,1==t?(this.iconN.getComponent(cc.Sprite).spriteFrame=this.resultIcon[2],this.resultTip.getComponent(l.i18nLabel).init("auth_info9",[]),this.btnSure.active=!1):2==t?(this.iconN.getComponent(cc.Sprite).spriteFrame=this.resultIcon[0],this.resultTip.getComponent(l.i18nLabel).init("auth_info7",[]),this.btnSure.active=!1):(this.isReEdit=!0,this.iconN.getComponent(cc.Sprite).spriteFrame=this.resultIcon[1],this.resultTip.getComponent(l.i18nLabel).init("auth_info8",[]),this.btnLab.getComponent(l.i18nLabel).init("auth_btn2",[]),this.btnSure.active=!0)},e.prototype.btnTypeClicked=function(){var t=this;this.selectList.active=!0,this.selectList.removeAllChildren();for(var e=function(e){var n=cc.instantiate(o.selectItem);n.active=!0,o.curTypeIndex==e&&(n.children[0].active=!0),n.getComponentInChildren(cc.Label).string=o.typeList[e],n.parent=o.selectList,n.on("click",function(){n.children[0].active=!0,t.selectList.active=!1,t.curTypeIndex=e,t.selectLab.getComponent(l.i18nLabel).init(t.typeList[t.curTypeIndex],[])})},o=this,n=0;n<this.typeList.length;n++)e(n)},e.prototype.btnSureClicked=function(){var t;return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return 0!=this.curState?[3,1]:(this.curState=1,this.checkState(),[3,3]);case 1:return 1!=this.curState?[3,3]:null===this.checkInput()?[3,3]:(e=this.isReEdit?this.curID:0,[4,null===(t=u.G.clientHttp)||void 0===t?void 0:t.callApi("MyIdentityEdit",{uid:u.G.uid,identity_id:e,name:this.nameEdit.string,id_type:this.typeList[this.curTypeIndex],id_no:this.IDEdit.string})]);case 2:0==(o=n.sent()).res.result?(this.nameV.string=this.nameEdit.string,this.idV.string=Myfun.maskIDNumber(this.IDEdit.string,2,2),this.checkResult(o.res.state)):p.default.inst.showWarning(o.res.message),n.label=3;case 3:return[2]}})})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([f(cc.Node)],e.prototype,"state1",void 0),i([f(cc.Node)],e.prototype,"state2",void 0),i([f(cc.Node)],e.prototype,"selectLab",void 0),i([f(cc.Node)],e.prototype,"selectList",void 0),i([f(cc.Node)],e.prototype,"selectItem",void 0),i([f(cc.EditBox)],e.prototype,"nameEdit",void 0),i([f(cc.EditBox)],e.prototype,"IDEdit",void 0),i([f(cc.Node)],e.prototype,"result",void 0),i([f(cc.Node)],e.prototype,"iconN",void 0),i([f(cc.SpriteFrame)],e.prototype,"resultIcon",void 0),i([f(cc.Node)],e.prototype,"resultTip",void 0),i([f(cc.Node)],e.prototype,"btnSure",void 0),i([f(cc.Node)],e.prototype,"btnLab",void 0),i([f(cc.Label)],e.prototype,"nameV",void 0),i([f(cc.Label)],e.prototype,"idV",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],bankBind:[function(t,e,o){"use strict";cc._RF.push(e,"bb5c5EQolRCfrw0BwlhLYMK","bankBind");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.stateLayer=[],e.nameEdit=null,e.cardIdEdit=null,e.bankNameEdit=null,e.phoneEdit=null,e.verifyCodeEdit=null,e.state1N=null,e.state2N=null,e.state3N=null,e.btnLab=null,e.selectLab=null,e.selectList=null,e.selectItem=null,e.placeholder="",e.bindCall=null,e.typeList=["CPF","CNPJ","EMAIL","PHONE","EVP"],e.typeValue=[10,11,6,7,8],e.curTypeIndex=-1,e.curState=0,e.verify_id="",e}return r(e,t),e.prototype.start=function(){},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.setCall=function(t){this.bindCall=t},e.prototype.checkState=function(){var t=this;1==this.curState?(this.state1N.active=!1,this.state2N.active=!0,cc.tween(this.progressBar).to(.5,{progress:.5}).call(function(){t.stateLayer[1].children[1].active=!0,t.stateLayer[1].children[3].color=new cc.Color(0,0,0,255)}).start()):2==this.curState&&(this.btnLab.getComponent(l.i18nLabel).init("set_surepwd",[]),this.state2N.active=!1,this.state3N.active=!0,cc.tween(this.progressBar).to(.5,{progress:1}).call(function(){t.stateLayer[2].children[1].active=!0,t.stateLayer[2].children[3].color=new cc.Color(0,0,0,255)}).start())},e.prototype.checkInput=function(){return""==this.cardIdEdit.string?(p.default.inst.showWarning("bank_input2_tip"),null):-1==this.curTypeIndex?(p.default.inst.showWarning("bank_cardTypeTip"),null):void 0},e.prototype.btnTypeClicked=function(){var t=this;this.selectList.active=!0,this.selectList.removeAllChildren();for(var e=function(e){var n=cc.instantiate(o.selectItem);n.active=!0,o.curTypeIndex==e&&(n.children[0].active=!0),n.getComponentInChildren(cc.Label).string=o.typeList[e],n.parent=o.selectList,n.on("click",function(){n.children[0].active=!0,t.selectList.active=!1,t.curTypeIndex=e,t.selectLab.getComponent(l.i18nLabel).init(t.typeList[t.curTypeIndex],[])})},o=this,n=0;n<this.typeList.length;n++)e(n)},e.prototype.btnSureCLicked=function(){var t,e;return c(this,void 0,void 0,function(){var o;return s(this,function(n){switch(n.label){case 0:return 0!=this.curState?[3,3]:null===this.checkInput()?[3,2]:(this.curState=1,this.checkState(),[4,null===(t=u.G.clientHttp)||void 0===t?void 0:t.callApi("SendSms",{uid:u.G.uid,send_type:1})]);case 1:if(!(o=n.sent()).isSucc)return[2];0==o.res.result?(this.curState=1,this.verify_id=o.res.verify_id):p.default.inst.showWarning(o.res.message),n.label=2;case 2:return[3,6];case 3:return 1!=this.curState?[3,5]:""==this.verifyCodeEdit.string?(p.default.inst.showWarning("bank_input5_tip"),[2]):[4,null===(e=u.G.clientHttp)||void 0===e?void 0:e.callApi("MyBankEdit",{uid:u.G.uid,bankId:0,accountType:this.typeValue[this.curTypeIndex],accountNo:this.cardIdEdit.string,isDefault:!1,verify_id:this.verify_id,verify_code:this.verifyCodeEdit.string})];case 4:return(o=n.sent()).isSucc?(0==o.res.result?(this.curState=2,this.checkState(),this.bindCall&&this.bindCall()):p.default.inst.showWarning(o.res.message),[3,6]):[2];case 5:this.node.destroy(),n.label=6;case 6:return[2]}})})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([f(cc.ProgressBar)],e.prototype,"progressBar",void 0),i([f(cc.Node)],e.prototype,"stateLayer",void 0),i([f(cc.EditBox)],e.prototype,"nameEdit",void 0),i([f(cc.EditBox)],e.prototype,"cardIdEdit",void 0),i([f(cc.EditBox)],e.prototype,"bankNameEdit",void 0),i([f(cc.EditBox)],e.prototype,"phoneEdit",void 0),i([f(cc.EditBox)],e.prototype,"verifyCodeEdit",void 0),i([f(cc.Node)],e.prototype,"state1N",void 0),i([f(cc.Node)],e.prototype,"state2N",void 0),i([f(cc.Node)],e.prototype,"state3N",void 0),i([f(cc.Node)],e.prototype,"btnLab",void 0),i([f(cc.Node)],e.prototype,"selectLab",void 0),i([f(cc.Node)],e.prototype,"selectList",void 0),i([f(cc.Node)],e.prototype,"selectItem",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],bankMgr:[function(t,e,o){"use strict";cc._RF.push(e,"6c6329GD6RHfYdRNephgHEP","bankMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../scripts/G"),u=a(t("./bankBind")),p=a(t("./bankTip")),d=a(t("./escapeMgr")),h=cc._decorator,f=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bankBindPre=null,e.content=null,e.bankItem=null,e.bankTipPre=null,e.typeToInfo={10:"CPF",11:"CNPJ",6:"EMAIL",7:"PHONE",8:"EVP"},e}return r(e,t),e.prototype.start=function(){this.loadMyBankList()},e.prototype.loadMyBankList=function(){var t;return c(this,void 0,void 0,function(){var e,o,n,r,i=this;return s(this,function(a){switch(a.label){case 0:return[4,null===(t=l.G.clientHttp)||void 0===t?void 0:t.callApi("MyBankList",{uid:l.G.uid})];case 1:if(!(e=a.sent()).isSucc)return d.default.inst.showWarning(e.err.message),[2];if(e.res.list.length>0)for(this.content.removeAllChildren(),o=function(t){var o=e.res.list[t],r=cc.instantiate(n.bankItem);r.parent=n.content,r.active=!0,r.children[3].getComponent(cc.Label).string=n.typeToInfo[o.accountType],r.children[4].getComponent(cc.Label).string=Myfun.maskIDNumber(o.accountNo,0,4),o.isDefault&&(r.children[5].active=!0,r.children[2].active=!1),r.children[2].on("click",function(){return c(i,void 0,void 0,function(){var t,e=this;return s(this,function(){return(t=cc.instantiate(this.bankTipPre)).parent=this.node,t.getComponent(p.default).setContent("bankMgr_tip6","bankMgr_tip7",function(){return c(e,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return[4,null===(e=l.G.clientHttp)||void 0===e?void 0:e.callApi("MyBankEdit",{uid:l.G.uid,bankId:o.bankId,accountType:o.accountType,accountNo:o.accountNo,isDefault:!0})];case 1:return(t=n.sent()).isSucc?(0==t.res.result?this.loadMyBankList():d.default.inst.showWarning(t.res.message),[2]):[2]}})})}),[2]})})}),r.children[1].on("click",function(){return c(i,void 0,void 0,function(){var t,e=this;return s(this,function(){return(t=cc.instantiate(this.bankTipPre)).parent=this.node,t.getComponent(p.default).setContent("bankMgr_tip8","bankMgr_tip9",function(){return c(e,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return[4,null===(e=l.G.clientHttp)||void 0===e?void 0:e.callApi("MyBankDel",{uid:l.G.uid,bankId:o.bankId})];case 1:return(t=n.sent()).isSucc?(0==t.res.result?r.destroy():d.default.inst.showWarning(t.res.message),[2]):[2]}})})}),[2]})})})},n=this,r=0;r<e.res.list.length;r++)o(r);return[2]}})})},e.prototype.btnBindClicked=function(){var t=this,e=cc.instantiate(this.bankBindPre);e.getComponent(u.default).setCall(function(){t.loadMyBankList()}),e.parent=this.node},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([y(cc.Prefab)],e.prototype,"bankBindPre",void 0),i([y(cc.Node)],e.prototype,"content",void 0),i([y(cc.Node)],e.prototype,"bankItem",void 0),i([y(cc.Prefab)],e.prototype,"bankTipPre",void 0),i([f],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../scripts/G":void 0,"./bankBind":"bankBind","./bankTip":"bankTip","./escapeMgr":"escapeMgr"}],bankTip:[function(t,e,o){"use strict";cc._RF.push(e,"7d11a15jsFL3LkFwU8uwGTB","bankTip");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../core_lmn/core"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.content=null,e.sureCall=null,e}return r(e,t),e.prototype.setContent=function(t,e,o){this.title.getComponent(c.i18nLabel).init(t,[]),this.content.getComponent(c.i18nLabel).init(e,[]),this.sureCall=o},e.prototype.btnSureClicked=function(){this.sureCall&&this.sureCall(),this.hide()},e.prototype.btnCancelClicked=function(){this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},i([l(cc.Node)],e.prototype,"title",void 0),i([l(cc.Node)],e.prototype,"content",void 0),i([a],e)}(c.PopupBase);o.default=u,cc._RF.pop()},{"../../core_lmn/core":void 0}],box_item:[function(t,e,o){"use strict";cc._RF.push(e,"f3382u95PJKnZKo5IumgJcK","box_item");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=a(t("./escapeMgr")),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockN=null,e.keyIconSpr=null,e.canGetLab=null,e.costCash=null,e.costCoins=null,e.unlockN=null,e.curGet=null,e.lastGet=null,e.lastDay=null,e.speed=null,e.expectGet=null,e.icon=null,e.lvLab=null,e.valueLab=null,e.boxIconSFList=[],e.curObj=null,e.openSucCall=null,e.curOpenCount=0,e}return r(e,t),e.prototype.start=function(){},e.prototype.setData=function(t,e,o){return void 0===e&&(e=0),void 0===o&&(o=null),c(this,void 0,void 0,function(){return s(this,function(){return this.curObj=t,this.valueLab.getComponent(l.i18nLabel).init("escape_box_item2",["+"+t.rate+"%"]),this.lvLab.string="LV"+t.level,this.openSucCall=o,0==e?this.showLockUI(t):this.showUnlockUI(t),[2]})})},e.prototype.setCurOpenCount=function(t){this.curOpenCount=t},e.prototype.showLockUI=function(t){return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return e=this.icon,[4,Myfun.loadPicFromRemote(t.cover)];case 1:return e.spriteFrame=n.sent(),this.lockN.active=!0,o=this.keyIconSpr,[4,Myfun.loadPicFromRemote(t.keyicon)];case 2:return o.spriteFrame=n.sent(),this.canGetLab.getComponent(l.i18nLabel).init("escape_box_item3",[t.totalgains.toString()]),this.costCash.string=t.keynum.toString(),this.costCoins.string=t.gemnum.toString(),[2]}})})},e.prototype.showUnlockUI=function(t){this.unlockN.active=!0,this.icon.spriteFrame=this.boxIconSFList[t.level-1];var e=t.gainsleft,o=t.dayleft;this.curGet.getComponent(l.i18nLabel).init("escape_box_item6",[t.gains.toString()]),this.lastGet.getComponent(l.i18nLabel).init("escape_box_item7",[e.toString()]),this.lastDay.getComponent(l.i18nLabel).init("escape_box_item8",[o.toString()]),this.speed.getComponent(l.i18nLabel).init("escape_box_item9",[t.daygains.toString()]),this.expectGet.getComponent(l.i18nLabel).init("escape_box_item10",[t.totalgains.toString()])},e.prototype.btnOpenClicked=function(){this.curOpenCount>=5?u.default.inst.showWarning("escape_box_tip1"):u.default.inst.showBoxTip(this.curObj,this.openSucCall.bind(this))},i([h(cc.Node)],e.prototype,"lockN",void 0),i([h(cc.Sprite)],e.prototype,"keyIconSpr",void 0),i([h(cc.Node)],e.prototype,"canGetLab",void 0),i([h(cc.Label)],e.prototype,"costCash",void 0),i([h(cc.Label)],e.prototype,"costCoins",void 0),i([h(cc.Node)],e.prototype,"unlockN",void 0),i([h(cc.Node)],e.prototype,"curGet",void 0),i([h(cc.Node)],e.prototype,"lastGet",void 0),i([h(cc.Node)],e.prototype,"lastDay",void 0),i([h(cc.Node)],e.prototype,"speed",void 0),i([h(cc.Node)],e.prototype,"expectGet",void 0),i([h(cc.Sprite)],e.prototype,"icon",void 0),i([h(cc.Label)],e.prototype,"lvLab",void 0),i([h(cc.Node)],e.prototype,"valueLab",void 0),i([h(cc.SpriteFrame)],e.prototype,"boxIconSFList",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../core_lmn/core":void 0,"./escapeMgr":"escapeMgr"}],box_tip:[function(t,e,o){"use strict";cc._RF.push(e,"35ea94erWlHipqXybBZq2g9","box_tip");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.keyIcon=null,e.cash=null,e.coin=null,e.sureCall=null,e.curItem=null,e}return r(e,t),e.prototype.setData=function(t,e){return c(this,void 0,void 0,function(){var o;return s(this,function(n){switch(n.label){case 0:return o=this.keyIcon,[4,Myfun.loadPicFromRemote(t.keyicon)];case 1:return o.spriteFrame=n.sent(),this.title.getComponent(l.i18nLabel).init("escape_box_tip4",[t.level.toString()]),this.cash.string=t.keynum.toString(),this.coin.string=t.gemnum.toString(),this.sureCall=e,this.curItem=t,[2]}})})},e.prototype.btnSureOpenClicked=function(){var t;return c(this,void 0,void 0,function(){var e;return s(this,function(o){switch(o.label){case 0:return[4,null===(t=u.G.clientHttp)||void 0===t?void 0:t.callApi("OpenSafeBox",{uid:u.G.uid,boxid:this.curItem.ID})];case 1:return(e=o.sent()).isSucc?0!=e.res.result?[3,3]:(this.sureCall&&this.sureCall(),[4,this.hide()]):(cc.log(e.err.message),p.default.inst.showWarning(e.err.message),[2]);case 2:return o.sent(),p.default.inst.showWarning("escape_box_tip2"),[3,4];case 3:p.default.inst.showWarning(e.res.message),o.label=4;case 4:return[2]}})})},e.prototype.closeClicked=function(){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),[2]}})})},e.prototype.onAfterHide=function(){this.node.destroy()},i([f(cc.Node)],e.prototype,"title",void 0),i([f(cc.Sprite)],e.prototype,"keyIcon",void 0),i([f(cc.Label)],e.prototype,"cash",void 0),i([f(cc.Label)],e.prototype,"coin",void 0),i([h],e)}(l.PopupBase);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],box:[function(t,e,o){"use strict";cc._RF.push(e,"0f650XkUPJB75JlfCDLii/l","box");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./box_item")),d=a(t("./escapeMgr")),h=cc._decorator,f=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curShowKeyIcon=null,e.iconSfList=[],e.curShowKeyNum=null,e.keysLayer=null,e.itemKey=null,e.MyBox=null,e.btn_open=null,e.btn_open2=null,e.limitLab=null,e.accGetLab=null,e.MyBoxContent=null,e.BoxList=null,e.curCoinLab=null,e.BoxListContent=null,e.boxItem=null,e.ruleLayer=null,e.curShowKeyId=1,e.keyIdList=[1,2,3,4,5],e.curKeyInfo=[],e.curOpenCount=0,e}return r(e,t),e.prototype.start=function(){this.loadAccountInfo(),this.loadMyBoxData(),this.loadBoxListData()},e.prototype.btnShowKeysLayerClicked=function(){var t=this;this.keysLayer.active=!this.keysLayer.active,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.keysLayer.active=!1},2),this.loadKeysInfo()},e.prototype.loadKeysInfo=function(){var t=this;this.keysLayer.removeAllChildren();for(var e=function(e){var n=o.keyIdList[e],r=cc.instantiate(o.itemKey);r.active=!0,r.parent=o.keysLayer,n==o.curShowKeyId&&(r.children[1].active=!0),r.children[0].getComponent(cc.Sprite).spriteFrame=o.iconSfList[n-1];var i=Myfun.findItemFromArr(o.curKeyInfo,"level",n);r.children[2].getComponent(cc.Label).string=null==i?void 0:i.num.toString(),r.on("click",function(){t.setCurShowKeyInfo(n),t.keysLayer.active=!1})},o=this,n=0,r=this.keyIdList.length;n<r;n++)e(n)},e.prototype.setCurShowKeyInfo=function(t){this.curShowKeyId=t,this.curShowKeyIcon.spriteFrame=this.iconSfList[t-1];var e=Myfun.findItemFromArr(this.curKeyInfo,"level",t);this.curShowKeyNum.string=e.num.toString()},e.prototype.loadAccountInfo=function(){return c(this,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return[4,u.G.clientHttp.callApi("MyCurrencyList",{uid:u.G.uid})];case 1:return(t=o.sent()).isSucc?(this.curCoinLab.string=t.res.gems.toString(),this.curKeyInfo=t.res.keys,e=Myfun.findItemFromArr(this.curKeyInfo,"level",this.curShowKeyId),this.curShowKeyNum.string=e.num.toString(),[2]):[2]}})})},e.prototype.loadMyBoxData=function(){var t,e;return c(this,void 0,void 0,function(){var o,n,r,i,c,a;return s(this,function(s){switch(s.label){case 0:return this.MyBoxContent.removeAllChildren(),[4,null===(t=u.G.clientHttp)||void 0===t?void 0:t.callApi("MyBoxList",{uid:u.G.uid})];case 1:if(!(o=s.sent()).isSucc)return this.btn_open.active=!0,this.btn_open2.active=!1,this.limitLab.active=!1,this.btn_open.children[1].getComponent(l.i18nLabel).init("escape_box2",["0/5"]),[2];if(0==o.res.result){if(null==this.curCoinLab)return[2];if(this.accGetLab.getComponent(l.i18nLabel).init("escape_box3",[o.res.accnum.toString()]),(null===(e=o.res.boxlist)||void 0===e?void 0:e.length)>0)for(n=Myfun.sortByObjectValue(o.res.boxlist,"level"),this.btn_open.active=!1,this.btn_open2.active=!0,this.limitLab.active=!0,this.curCoinLab.string=o.res.gems.toString(),this.accGetLab.getComponent(l.i18nLabel).init("escape_box3",[o.res.accnum.toString()]),this.limitLab.getComponent(l.i18nLabel).init("escape_box2",[n.length+"/5"]),this.curOpenCount=o.res.opennum,r=0,i=n.length;r<i;r++)c=n[r],(a=cc.instantiate(this.boxItem)).parent=this.MyBoxContent,a.getComponent(p.default).setData(c,1);else this.btn_open.active=!0,this.btn_open2.active=!1,this.limitLab.active=!1,this.btn_open.children[1].getComponent(l.i18nLabel).init("escape_box2",["0/5"])}else d.default.inst.showWarning(o.res.message);return[2]}})})},e.prototype.loadBoxListData=function(){return c(this,void 0,void 0,function(){var t,e,o,n;return s(this,function(){for(u.G.boxListInfo=Myfun.sortByObjectValue(u.G.boxListInfo,"level"),t=0,e=u.G.boxListInfo.length;t<e;t++)o=u.G.boxListInfo[t],(n=cc.instantiate(this.boxItem)).parent=this.BoxListContent,n.getComponent(p.default).setData(o,0,this.openBoxSucCall.bind(this));return[2]})})},e.prototype.openBoxSucCall=function(){this.loadMyBoxData()},e.prototype.btnRuleClicked=function(){this.ruleLayer.active=!0},e.prototype.btnCloseRuleClicked=function(){this.ruleLayer.active=!1},e.prototype.showCurBoxList=function(){this.BoxList.active=!1,this.MyBox.active=!0},e.prototype.showBoxList=function(){this.MyBox.active=!1,this.BoxList.active=!0},e.prototype.btnCloseBoxListClicked=function(){this.MyBox.active?(d.default.inst._loadEscape(),this.node.destroy()):this.showCurBoxList()},e.prototype.btnOpenBoxClicked=function(){this.curOpenCount>=5?d.default.inst.showWarning("escape_box_tip1"):this.showBoxList()},i([y(cc.Sprite)],e.prototype,"curShowKeyIcon",void 0),i([y(cc.SpriteFrame)],e.prototype,"iconSfList",void 0),i([y(cc.Label)],e.prototype,"curShowKeyNum",void 0),i([y(cc.Node)],e.prototype,"keysLayer",void 0),i([y(cc.Node)],e.prototype,"itemKey",void 0),i([y(cc.Node)],e.prototype,"MyBox",void 0),i([y(cc.Node)],e.prototype,"btn_open",void 0),i([y(cc.Node)],e.prototype,"btn_open2",void 0),i([y(cc.Node)],e.prototype,"limitLab",void 0),i([y(cc.Node)],e.prototype,"accGetLab",void 0),i([y(cc.Node)],e.prototype,"MyBoxContent",void 0),i([y(cc.Node)],e.prototype,"BoxList",void 0),i([y(cc.Label)],e.prototype,"curCoinLab",void 0),i([y(cc.Node)],e.prototype,"BoxListContent",void 0),i([y(cc.Prefab)],e.prototype,"boxItem",void 0),i([y(cc.Node)],e.prototype,"ruleLayer",void 0),i([f],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./box_item":"box_item","./escapeMgr":"escapeMgr"}],card_get:[function(t,e,o){"use strict";cc._RF.push(e,"cf2f9u88r1KvIHPeZmLhGLK","card_get");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldN=null,e.cardN=null,e.num=null,e.icon=null,e.randomKeyIcon=null,e}return r(e,t),e.prototype.setData=function(t){return c(this,void 0,void 0,function(){var e;return s(this,function(o){switch(o.label){case 0:return cc.log(t),this.num.string=t.gnum1.toString(),1!=t.cardtype&&2!=t.cardtype?[3,2]:(e=this.icon,[4,Myfun.loadPicFromRemote(t.img)]);case 1:return e.spriteFrame=o.sent(),[3,3];case 2:3==t.cardtype?this.icon.spriteFrame=this.randomKeyIcon:(this.goldN.active=!1,this.cardN.active=!0),o.label=3;case 3:return[2]}})})},e.prototype.onCloseClicked=function(){this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},i([p(cc.Node)],e.prototype,"goldN",void 0),i([p(cc.Node)],e.prototype,"cardN",void 0),i([p(cc.Label)],e.prototype,"num",void 0),i([p(cc.Sprite)],e.prototype,"icon",void 0),i([p(cc.SpriteFrame)],e.prototype,"randomKeyIcon",void 0),i([u],e)}(a.PopupBase);o.default=d,cc._RF.pop()},{"../../core_lmn/core":void 0}],cashDesk:[function(t,e,o){"use strict";cc._RF.push(e,"15aad9ElvxA77fRZxv8ei3X","cashDesk");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../scripts/G"),u=t("../../scripts/GameConfig"),p=a(t("./escapeMgr")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.amount=null,e.cardId=0,e.price=0,e.addrId=0,e.order_id="",e.sucCall=null,e.failCall=null,e.throttleFn=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.setData=function(t,e,o,n){this.cardId=t,this.price=e,this.addrId=o,this.amount.string=e.toString(),this.order_id=n},e.prototype.setCallback=function(t,e){this.sucCall=t,this.failCall=e},e.prototype.btnSurePayClicked=function(){var t=this;null==this.throttleFn?(this.throttleFn=Myfun.throttle(function(){return c(t,void 0,void 0,function(){var t,e,o,n=this;return s(this,function(r){switch(r.label){case 0:return[4,null===(e=l.G.clientHttp)||void 0===e?void 0:e.callApi("BuyCard",{uid:l.G.uid,cardId:this.cardId,langue:u.LanMap[l.G.curLanguage],addressId:this.addrId,orderNo:this.order_id})];case 1:return(t=r.sent()).isSucc?(0==t.res.result?p.default.inst.showWeb(t.res.checkoutUrl,function(){return c(n,void 0,void 0,function(){var e,o,n;return s(this,function(r){switch(r.label){case 0:return[4,null===(o=l.G.clientHttp)||void 0===o?void 0:o.callApi("MyOrderDetail",{uid:l.G.uid,order_no:t.res.orderNo})];case 1:return(e=r.sent()).isSucc?(0==e.res.result&&1==e.res.state?(this.sucCall&&this.sucCall(),this.node.destroy()):(p.default.inst.showWarning(t.res.message),this.failCall&&this.failCall(),this.node.destroy()),[2]):(p.default.inst.showWarning(null===(n=e.err)||void 0===n?void 0:n.message),[2])}})})}):p.default.inst.showWarning(t.res.message),[2]):(p.default.inst.showWarning(null===(o=t.err)||void 0===o?void 0:o.message),[2])}})})},1e3),this.throttleFn()):this.throttleFn()},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([f(cc.Label)],e.prototype,"amount",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../scripts/G":void 0,"../../scripts/GameConfig":void 0,"./escapeMgr":"escapeMgr"}],cashRecordItem:[function(t,e,o){"use strict";cc._RF.push(e,"fd4d0hMgNZInYXYhAC8LBtz","cashRecordItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../core_lmn/core"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=null,e.amount=null,e.state=null,e.i18nKey=["cashout_tip1","cashout_tip2","cashout_tip3","cashout_tip4"],e}return r(e,t),e.prototype.start=function(){},e.prototype.setData=function(t){this.time.string=Myfun.formattedDateTime(t.createdAt),this.amount.string=t.amount,this.state.getComponent(c.i18nLabel).init(this.i18nKey[t.state],[])},i([l(cc.Label)],e.prototype,"time",void 0),i([l(cc.Label)],e.prototype,"amount",void 0),i([l(cc.Node)],e.prototype,"state",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../core_lmn/core":void 0}],cashRecord:[function(t,e,o){"use strict";cc._RF.push(e,"39f11QZgwlHjpNhMDlpHMkP","cashRecord");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./cashRecordItem")),d=a(t("./escapeMgr")),h=cc._decorator,f=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollViewPro=null,e.content=null,e}return r(e,t),e.prototype.start=function(){this.loadRecordList()},e.prototype.loadRecordList=function(){var t;return c(this,void 0,void 0,function(){var e,o,n,r,i=this;return s(this,function(a){switch(a.label){case 0:return e=1,o=[],n=0,[4,u.G.clientHttp.callApi("WithdrawList",{uid:u.G.uid,page:e,pageNum:10})];case 1:return(r=a.sent()).isSucc?(r.res.list.length>0&&(n=e,o=o.concat(r.res.list),e++,this.scrollViewPro&&this.scrollViewPro.setView(r.res.list,function(t,e){t.getComponent(p.default).setData(e)},function(){return c(i,void 0,void 0,function(){var t,r;return s(this,function(i){switch(i.label){case 0:return n==e?(cc.log("\u6ca1\u6709\u65b0\u6570\u636e"),[2]):[4,u.G.clientHttp.callApi("WithdrawList",{uid:u.G.uid,page:e,pageNum:10})];case 1:return(t=i.sent()).isSucc?(n=e,t.res.list.length>0&&(e++,o=o.concat(t.res.list),this.scrollViewPro&&this.scrollViewPro.updateScroll(o)),[2]):(d.default.inst.showWarning(null===(r=t.err)||void 0===r?void 0:r.message),[2])}})})})),[2]):(d.default.inst.showWarning(null===(t=r.err)||void 0===t?void 0:t.message),[2])}})})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([y(l.ScrollViewProCom)],e.prototype,"scrollViewPro",void 0),i([y(cc.Node)],e.prototype,"content",void 0),i([f],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./cashRecordItem":"cashRecordItem","./escapeMgr":"escapeMgr"}],cashTransfer:[function(t,e,o){"use strict";cc._RF.push(e,"a9111fvOA1ERKZ0WVomA6a4","cashTransfer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../scripts/G"),u=a(t("./escapeMgr")),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toId=null,e.toCount=null,e.goldLab=null,e.numSend=null,e.numCommission=null,e.numReal=null,e.commissionConfig=null,e.placeholder="",e}return r(e,t),e.prototype.start=function(){this.loadPlayerAccount()},e.prototype.loadPlayerAccount=function(){this.goldLab.string=l.G.playerGems.toString(),this.commissionConfig=Myfun.findItemFromArr(l.G.commissionInfo,"chargeType",1),1==this.commissionConfig.method?this.numCommission.string=this.commissionConfig.num:this.numCommission.string=this.commissionConfig.num+"%"},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.editBoxDidChanged=function(){var t=Number(this.toCount.string);t>l.G.playerGems?u.default.inst.showWarning("transfer_tip11"):(this.numSend.string=t.toString(),1==this.commissionConfig.method?this.numReal.string=(t-this.commissionConfig.num).toString():this.numReal.string=(t*(1-.01*this.commissionConfig.num)).toFixed(2))},e.prototype.checkInput=function(){return""==this.toId.string?(u.default.inst.showWarning("transfer_tip2"),null):""==this.toCount.string?(u.default.inst.showWarning("transfer_tip4"),null):void 0},e.prototype.btnTransferClicked=function(){var t;return c(this,void 0,void 0,function(){var e;return s(this,function(o){switch(o.label){case 0:return null===this.checkInput()?[3,2]:[4,null===(t=l.G.clientHttp)||void 0===t?void 0:t.callApi("GemTransfer",{uid:l.G.uid,target_uid:this.toId.string,gem_num:Number(this.toCount.string)})];case 1:if(!(e=o.sent()).isSucc)return[2];0==e.res.result?(this.toCount.string="",l.G.playerGems=e.res.user_num,this.goldLab.string=l.G.playerGems.toString()):u.default.inst.showWarning(e.res.message),o.label=2;case 2:return[2]}})})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([h(cc.EditBox)],e.prototype,"toId",void 0),i([h(cc.EditBox)],e.prototype,"toCount",void 0),i([h(cc.Label)],e.prototype,"goldLab",void 0),i([h(cc.Label)],e.prototype,"numSend",void 0),i([h(cc.Label)],e.prototype,"numCommission",void 0),i([h(cc.Label)],e.prototype,"numReal",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],cashoutCheck:[function(t,e,o){"use strict";cc._RF.push(e,"08361Jr2vZIvJx3e1BEKwNt","cashoutCheck");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../scripts/G"),u=a(t("./escapeMgr")),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.inputLayer=null,e.keyBoard=null,e.amount=null,e.inputStr="",e.gems=0,e.callBack=null,e}return r(e,t),e.prototype.start=function(){this.addKeyBoardListener()},e.prototype.addKeyBoardListener=function(){for(var t=0;t<this.keyBoard.children[0].childrenCount;t++)this.keyBoard.children[0].children[t].on("click",this.keyBoardClicked.bind(this))},e.prototype.keyBoardClicked=function(t){var e=t.target.name;if("."!=e){if("del"==e&&this.inputStr.length>0){var o=this.inputStr.length-1;this.inputStr=this.inputStr.slice(0,o),this.inputLayer.children[o].children[1].getComponent(cc.Label).string=""}"del"!==e&&this.inputStr.length<6&&(this.inputStr=this.inputStr+e,this.inputLayer.children[this.inputStr.length-1].children[1].getComponent(cc.Label).string="*",6==this.inputStr.length&&this.checkPassword())}},e.prototype.setData=function(t,e){this.gems=t,this.amount.string=t.toString(),this.callBack=e},e.prototype.checkPassword=function(){var t;return c(this,void 0,void 0,function(){var e;return s(this,function(o){switch(o.label){case 0:return[4,l.G.clientHttp.callApi("Withdraw",{uid:l.G.uid,gemsNum:this.gems,productType:"PIX",currency:"BRL",tradePass:this.inputStr})];case 1:return(e=o.sent()).isSucc?(0==e.res.result?(this.callBack&&this.callBack(e.res),this.node.destroy()):1==e.res.result&&u.default.inst.showWarning(e.res.message),[2]):(u.default.inst.showWarning(null===(t=e.err)||void 0===t?void 0:t.message),[2])}})})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([h(cc.Node)],e.prototype,"inputLayer",void 0),i([h(cc.Node)],e.prototype,"keyBoard",void 0),i([h(cc.Label)],e.prototype,"amount",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],cashout:[function(t,e,o){"use strict";cc._RF.push(e,"8981c0z1XpE64Hi++KW0Jra","cashout");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./cashoutCheck")),d=a(t("./escapeMgr")),h=cc._decorator,f=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gemNum=null,e.commission=null,e.rate=null,e.limit=null,e.realGet=null,e.outEdit=null,e.transferPre=null,e.recordPre=null,e.checkPwPre=null,e.tip=null,e.commissionConfig=null,e.placeholder="",e.i18nKey=["cashout_tip1","cashout_tip2","cashout_tip3","cashout_tip4"],e}return r(e,t),e.prototype.start=function(){this.loadPlayerAccount()},e.prototype.loadPlayerAccount=function(){this.gemNum.string=u.G.playerGems.toString(),this.commissionConfig=Myfun.findItemFromArr(u.G.commissionInfo,"chargeType",2),this.rate.getComponent(l.i18nLabel).init("account_tip5",["100:1"]);var t=u.G.cashOutLimitInfo.vi1;this.limit.getComponent(l.i18nLabel).init("cashout_tip5",[t+""]),1==this.commissionConfig.method?this.commission.getComponent(l.i18nLabel).init("account_tip4",[this.commissionConfig.num.toString()]):this.commission.getComponent(l.i18nLabel).init("account_tip4",[this.commissionConfig.num+"%"])},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidChanged=function(){var t=Number(this.outEdit.string);t>u.G.playerGems?d.default.inst.showWarning("transfer_tip11"):this.countRealGet(t)},e.prototype.countRealGet=function(t){var e=0;e=1==this.commissionConfig.method?(t-this.commissionConfig.num)/100:t*(1-.01*this.commissionConfig.num)/100,this.realGet.string=e.toFixed(2)},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.btnOutClicked=function(){return c(this,void 0,void 0,function(){var t,e,o=this;return s(this,function(){return""==this.outEdit.string?(d.default.inst.showWarning("account_tip2"),[2]):(t=Number(this.outEdit.string))>u.G.playerGems?(d.default.inst.showWarning("transfer_tip11"),[2]):((e=cc.instantiate(this.checkPwPre)).parent=this.node,e.getComponent(p.default).setData(t,function(t){u.G.playerGems=t.left_num,o.loadPlayerAccount();var e=t.state,n=o.i18nKey[e];o.showTip(n)}),[2])})})},e.prototype.showTip=function(t){var e=this;this.tip.active=!0,this.tip.getChildByName("str").getComponent(l.i18nLabel).init(t,[]),this.scheduleOnce(function(){e.tip.active=!1},2)},e.prototype.btnCloseClicked=function(){this.node.destroy()},e.prototype.btnRecordClicked=function(){cc.instantiate(this.recordPre).parent=this.node},e.prototype.btnTransferClicked=function(){cc.instantiate(this.transferPre).parent=this.node},i([y(cc.Label)],e.prototype,"gemNum",void 0),i([y(cc.Node)],e.prototype,"commission",void 0),i([y(cc.Node)],e.prototype,"rate",void 0),i([y(cc.Node)],e.prototype,"limit",void 0),i([y(cc.Label)],e.prototype,"realGet",void 0),i([y(cc.EditBox)],e.prototype,"outEdit",void 0),i([y(cc.Prefab)],e.prototype,"transferPre",void 0),i([y(cc.Prefab)],e.prototype,"recordPre",void 0),i([y(cc.Prefab)],e.prototype,"checkPwPre",void 0),i([y(cc.Node)],e.prototype,"tip",void 0),i([f],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./cashoutCheck":"cashoutCheck","./escapeMgr":"escapeMgr"}],editPlayerName:[function(t,e,o){"use strict";cc._RF.push(e,"1635diWhFZH36+enaLC7IRw","editPlayerName");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../core_lmn/core"),s=t("../../scripts/G"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editBox=null,e.placeholder="",e.cb=null,e}return r(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.loadCurName()},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.loadCurName=function(){this.editBox.placeholder=s.G.uname},e.prototype.setCall=function(t){this.cb=t},e.prototype.btnCancelClicked=function(){this.hide()},e.prototype.btnSureClicked=function(){s.G.uname=this.editBox.string,s.G.saveData("uname",s.G.uname),this.cb&&this.cb(),this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},i([u(cc.EditBox)],e.prototype,"editBox",void 0),i([l],e)}(c.PopupBase);o.default=p,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0}],escapeMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a55dc8KIedAEKBqVBN1Fk+c","escapeMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0}),o.RoleType=void 0;var l,u=a(t("./addrEdit")),p=a(t("./addrMgr")),d=a(t("./card_get")),h=a(t("./escape_shopcard")),f=a(t("./loadWeb")),y=a(t("./orderDetail")),v=a(t("./orderPay")),_=t("../escape_config"),b=cc._decorator,g=b.ccclass,m=b.property;(function(t){t[t.otherRole=0]="otherRole",t[t.selfRole=1]="selfRole",t[t.killer=2]="killer"})(l=o.RoleType||(o.RoleType={}));var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.pre_escape=null,e}var o;return r(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return this._ins},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){null!==o._ins?this.node.destroy():o._ins=this},e.prototype.onDisable=function(){o._ins=null,cc.director.off("showLogin")},e.prototype.start=function(){this.addEscapeListener(),this._loadEscape()},e.prototype.addEscapeListener=function(){var t=this;cc.director.on("showLogin",function(){t.showLogin()})},e.prototype._loadEscape=function(){return c(this,void 0,void 0,function(){return s(this,function(){return this.content.removeAllChildren(),cc.instantiate(this.pre_escape).parent=this.content,[2]})})},e.prototype._loadRevenge=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.REVENGE,_.ESCAPE_POP_INFO)];case 1:return t=e.sent(),this.content.removeAllChildren(),cc.instantiate(t).parent=this.content,[2]}})})},e.prototype._loadBox=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.BOX,_.ESCAPE_POP_INFO)];case 1:return t=e.sent(),this.content.removeAllChildren(),cc.instantiate(t).parent=this.content,[2]}})})},e.prototype._loadSetting=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.SET,_.ESCAPE_POP_INFO)];case 1:return t=e.sent(),this.content.removeAllChildren(),cc.instantiate(t).parent=this.content,[2]}})})},e.prototype.getRandomPos=function(t,e,o,n){var r;void 0===n&&(n=l.otherRole);var i,c,s=e.getChildByName(o).getBoundingBoxToWorld();i=Math.random()*(s.width-t.width)+s.x,c=Math.random()*(s.height-t.height)/2+s.y,n==l.selfRole&&(i=Math.random()*(s.width-t.width)/2+s.x,c=Math.random()*(s.height-t.height)/4+s.y);var a=null===(r=null==t?void 0:t.parent)||void 0===r?void 0:r.convertToNodeSpaceAR(cc.v2(i,c));return cc.v3(a,0)},e.prototype.showWarning=function(t){return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.TIP,_.ESCAPE_POP_INFO)];case 1:return e=n.sent(),(o=cc.instantiate(e)).parent=this.content,o.getComponent("escape_tip").showTip(t),[2]}})})},e.prototype.showBoxTip=function(t,e){return c(this,void 0,void 0,function(){var o,n;return s(this,function(r){switch(r.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.BOX_TIP,_.ESCAPE_POP_INFO)];case 1:return o=r.sent(),(n=cc.instantiate(o)).parent=this.content,n.getComponent("box_tip").setData(t,e),[2]}})})},e.prototype.showLogin=function(){return c(this,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return null!=(t=cc.find("Canvas/content/login"))&&null!=t?[3,2]:[4,Myfun.loadPrefab(_.ESCAPE_POP.LOGIN,_.ESCAPE_POP_INFO)];case 1:e=o.sent(),(t=cc.instantiate(e)).parent=this.content,o.label=2;case 2:return[2]}})})},e.prototype.showCardShop=function(t){return void 0===t&&(t=null),c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.SHOPCARD,_.ESCAPE_POP_INFO)];case 1:return e=n.sent(),(o=cc.instantiate(e)).parent=this.content,o.getComponent(h.default).setData(t),[2]}})})},e.prototype.showGetCard=function(t){return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.GETCARD,_.ESCAPE_POP_INFO)];case 1:return e=n.sent(),(o=cc.instantiate(e)).parent=this.content,o.getComponent(d.default).setData(t),[2]}})})},e.prototype.showNotice=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.NOTICE,_.ESCAPE_POP_INFO)];case 1:return t=e.sent(),cc.instantiate(t).parent=this.content,[2]}})})},e.prototype.showWeb=function(t,e){return void 0===e&&(e=null),c(this,void 0,void 0,function(){var o,n;return s(this,function(r){switch(r.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.LOADWEB,_.ESCAPE_POP_INFO)];case 1:return o=r.sent(),(n=cc.instantiate(o)).parent=this.content,n.getComponent(f.default).init(t,e),[2]}})})},e.prototype.showOrderPay=function(t,e,o){return void 0===t&&(t=""),void 0===e&&(e=0),void 0===o&&(o=null),c(this,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.ORDER_PAY,_.ESCAPE_POP_INFO)];case 1:return n=i.sent(),(r=cc.instantiate(n)).parent=this.content,""==t?r.getComponent(v.default).setData(e,o):r.getComponent(v.default).loadPayOrderDetail(t,o),[2]}})})},e.prototype.showOrderDetail=function(t){return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.ORDER_DETAIL,_.ESCAPE_POP_INFO)];case 1:return e=n.sent(),(o=cc.instantiate(e)).parent=this.content,o.getComponent(y.default).loadOrderDetail(t),[2]}})})},e.prototype.showAddrEdit=function(t,e){return void 0===e&&(e=null),c(this,void 0,void 0,function(){var o,n;return s(this,function(r){switch(r.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.ADDR_EDIT,_.ESCAPE_POP_INFO)];case 1:return o=r.sent(),(n=cc.instantiate(o)).parent=this.content,n.getComponent(u.default).setData(t,e),[2]}})})},e.prototype.showAddrMgr=function(t){return void 0===t&&(t=null),c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.ADDR_MGR,_.ESCAPE_POP_INFO)];case 1:return e=n.sent(),(o=cc.instantiate(e)).parent=this.content,o.getComponent(p.default).setCallback(t),[2]}})})},e.prototype.showLoading=function(){return c(this,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return null!=(t=cc.find("Canvas/content/loading"))&&null!=t?[3,2]:[4,Myfun.loadPrefab(_.ESCAPE_POP.Loading,_.ESCAPE_POP_INFO)];case 1:e=o.sent(),(t=cc.instantiate(e)).parent=this.content,o.label=2;case 2:return[2]}})})},e.prototype.showMyCardBag=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,Myfun.loadPrefab(_.ESCAPE_POP.MYCARD,_.ESCAPE_POP_INFO)];case 1:return t=e.sent(),cc.instantiate(t).parent=this.content,[2]}})})},e._ins=null,i([m(cc.Node)],e.prototype,"content",void 0),i([m(cc.Prefab)],e.prototype,"pre_escape",void 0),o=i([g],e)}(cc.Component);o.default=w,cc._RF.pop()},{"../escape_config":"escape_config","./addrEdit":"addrEdit","./addrMgr":"addrMgr","./card_get":"card_get","./escape_shopcard":"escape_shopcard","./loadWeb":"loadWeb","./orderDetail":"orderDetail","./orderPay":"orderPay"}],escape_config:[function(t,e,o){"use strict";cc._RF.push(e,"d01c78hcD9Ij7XmZTdsGyhU","escape_config"),Object.defineProperty(o,"__esModule",{value:!0}),o.ESCAPE_POP_INFO=o.ESCAPE_POP=void 0;var n,r=t("../scripts/ModuleDef");(function(t){t[t.LOGIN=0]="LOGIN",t[t.ESCAPE=1]="ESCAPE",t[t.BOX=2]="BOX",t[t.TIP=3]="TIP",t[t.BOX_TIP=4]="BOX_TIP",t[t.SET=5]="SET",t[t.REVENGE=6]="REVENGE",t[t.RECORD=7]="RECORD",t[t.RANK=8]="RANK",t[t.RESULT=9]="RESULT",t[t.RULE=10]="RULE",t[t.SHOPCARD=11]="SHOPCARD",t[t.GETCARD=12]="GETCARD",t[t.EXCHANGE=13]="EXCHANGE",t[t.MYCARD=14]="MYCARD",t[t.NOTICE=15]="NOTICE",t[t.LOADWEB=16]="LOADWEB",t[t.CASHOUT=17]="CASHOUT",t[t.MYORDER=18]="MYORDER",t[t.ORDER_PAY=19]="ORDER_PAY",t[t.ORDER_DETAIL=20]="ORDER_DETAIL",t[t.ADDR_EDIT=21]="ADDR_EDIT",t[t.ADDR_MGR=22]="ADDR_MGR",t[t.Loading=23]="Loading"})(n||(n={})),o.ESCAPE_POP=n;var i=[{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/login",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/escape",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/box",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/tip",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/box_tip",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/setting",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/revenge",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/escape_record",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/escape_rank",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/escape_result",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/escape_rule",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/shopCard",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/getcard",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/exchange",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/myCard",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/notice",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/loadWeb",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/cashout",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/myOrder",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/orderPay",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/orderDetail",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/addrEdit",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/addrMgr",type:"prefab"},{bundle:r.ModuleDef.GAME_ESCAPE,url:"prefabs/loading",type:"prefab"}];o.ESCAPE_POP_INFO=i,cc._RF.pop()},{"../scripts/ModuleDef":void 0}],escape_getItem:[function(t,e,o){"use strict";cc._RF.push(e,"48e2e89CwlLco5aRnSgbDL7","escape_getItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.item=null,e}return r(e,t),e.prototype.setData=function(t,e){if(e){t/=2;for(var o=0;o<2;o++)this.generateItem(t)}else this.generateItem(t)},e.prototype.generateItem=function(t){var e=cc.instantiate(this.item);e.active=!0,e.getComponentInChildren(a.i18nLabel).init("static_escape_hint4",[t]),e.parent=this.layout},e.prototype.btnSureClicked=function(){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),this.node.destroy(),[2]}})})},i([p(cc.Node)],e.prototype,"layout",void 0),i([p(cc.Node)],e.prototype,"item",void 0),i([u],e)}(a.PopupBase);o.default=d,cc._RF.pop()},{"../../core_lmn/core":void 0}],escape_hint:[function(t,e,o){"use strict";cc._RF.push(e,"ede09a1sE1OYa0vpWKWB8i1","escape_hint");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=t("../../scripts/G"),u=cc._decorator,p=u.ccclass,d=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cashLab=null,e.coinLab=null,e.curCoinLab=null,e.sureCall=null,e.canCall=null,e}return r(e,t),e.prototype.setContent=function(t,e,o,n){this.cashLab.string=t.toString(),this.coinLab.string=e.toString(),this.curCoinLab.string=Myfun.transferNumToK(l.G.playerGems),this.sureCall=o,this.canCall=n},e.prototype.btnCancelClicked=function(){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),this.canCall&&this.canCall(),[2]}})})},e.prototype.btnSureClicked=function(){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),this.sureCall&&this.sureCall(),[2]}})})},e.prototype.onAfterHide=function(){this.node.destroy()},i([d(cc.Label)],e.prototype,"cashLab",void 0),i([d(cc.Label)],e.prototype,"coinLab",void 0),i([d(cc.Label)],e.prototype,"curCoinLab",void 0),i([p],e)}(a.PopupBase);o.default=h,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0}],escape_login:[function(t,e,o){"use strict";cc._RF.push(e,"dfe9awA8+JHCIy0uRf/Yek1","escape_login");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l,u=t("../../core_lmn/core"),p=t("../../scripts/G"),d=t("../../scripts/GameConfig"),h=a(t("./escapeMgr")),f=cc._decorator,y=f.ccclass,v=f.property;(function(t){t[t.PWD=0]="PWD",t[t.CODE=1]="CODE"})(l||(l={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.input_phone=null,e.input_pwd=null,e.input_code=null,e.getCodeLab=null,e.getCode=null,e.agreeToggle=null,e.btnLab=null,e.selectLab=null,e.selectList=null,e.selectItem=null,e.stateList=[55],e.curStateIndex=0,e.placeholder="",e.curType=l.CODE,e.callFun=null,e.throttleRegister=null,e.timeCountFun=null,e.curCode="",e.curObjid="",e}return r(e,t),e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.closeClicked=function(){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),this.node.destroy(),[2]}})})},e.prototype.btnStateClicked=function(){var t=this;if(this.selectList.active)this.selectList.active=!1;else{this.selectList.active=!0,this.selectList.removeAllChildren();for(var e=function(e){var n=cc.instantiate(o.selectItem);n.active=!0,o.curStateIndex==e&&(n.children[0].active=!0),n.getComponentInChildren(cc.Label).string="+"+o.stateList[e],n.parent=o.selectList,n.on("click",function(){n.children[0].active=!0,t.selectList.active=!1,t.curStateIndex=e,t.selectLab.getComponent(cc.Label).string="+"+t.stateList[t.curStateIndex]})},o=this,n=0;n<this.stateList.length;n++)e(n)}},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.onToggleContainerCheck=function(t){if(t.isChecked){var e=t.node.name;"toggle2"==e?(this.curType=l.PWD,this.input_pwd.node.parent.active=!0,this.input_code.node.parent.active=!1,this.btnLab.getComponent(u.i18nLabel).init("static_escape_login11",[])):"toggle1"==e&&(this.curType=l.CODE,this.input_pwd.node.parent.active=!1,this.input_code.node.parent.active=!0,this.btnLab.getComponent(u.i18nLabel).init("static_escape_login10",[]))}},e.prototype.checkInput=function(){if(0!=this.input_phone.string.length)if(this.curType!=l.CODE||p.G.validator.isMobilePhone(this.input_phone.string,"any"))if(this.curType!=l.PWD||""!=this.input_pwd.string)if(this.curType!=l.CODE||""!=this.input_code.string)if(this.curType!=l.CODE||""!=this.curCode&&this.input_code.string===this.curCode){if(this.agreeToggle.isChecked)return!0;p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip7")}else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip6");else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip5");else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip2");else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip4");else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip3")},e.prototype.getInput=function(){return{source:1,phoneNumber:this.input_phone.string,pwd:this.input_pwd.string,ip:p.G.ip}},e.prototype.setLoginCall=function(t){this.callFun=t},e.prototype.btnLoginClicked=function(){return c(this,void 0,void 0,function(){var t,e=this;return s(this,function(){return this.checkInput()&&(t=function(){return c(e,void 0,void 0,function(){var t,e,o;return s(this,function(n){switch(n.label){case 0:return h.default.inst.showLoading(),this.curType!=l.PWD?[3,2]:[4,p.G.clientHttp.callApi("LoginGame",this.getInput())];case 1:return(t=n.sent()).isSucc?(1==t.res.result&&(p.G.uid=t.res._id,p.G.phoneN=this.input_phone.string,p.G.saveData("uid",p.G.uid),p.G.saveData("uPhone",p.G.phoneN),cc.director.emit("playerLogin"),this.node.destroy()),[3,4]):(p.G.eventMsg.emit(MI.MSG.tip,null===(e=t.err)||void 0===e?void 0:e.message),cc.director.emit("hideLoading"),[2]);case 2:return[4,p.G.clientHttp.callApi("RegisterAccount",{objid:this.curObjid,source:1,phoneNumber:this.input_phone.string,verifyCode:this.curCode,ip:p.G.ip,country:p.G.country,state:p.G.state,city:p.G.city,inviteCode:"oOyaeA"})];case 3:if(!(t=n.sent()).isSucc)return p.G.eventMsg.emit(MI.MSG.tip,null===(o=t.err)||void 0===o?void 0:o.message),cc.director.emit("hideLoading"),[2];1==t.res.result&&(p.G.phoneN=this.input_phone.string,p.G.uid=t.res._id,p.G.saveData("uid",p.G.uid),p.G.saveData("uPhone",p.G.phoneN),cc.director.emit("playerLogin"),this.node.destroy()),n.label=4;case 4:return[2]}})})},null==this.throttleRegister?(this.throttleRegister=Myfun.throttle(t,2e3),this.throttleRegister()):this.throttleRegister()),[2]})})},e.prototype.timeEndCall=function(){this.unschedule(this.timeCountFun),this.getCode.active=!0,this.getCodeLab.fontSize=26,this.getCodeLab.string="Get verification code"},e.prototype.showTime=function(t){var e=this;this.getCodeLab.fontSize=30,this.getCodeLab.string=t+"s",t--,this.schedule(this.timeCountFun=function(){t>0?(e.getCodeLab.string=t+"s",t--):e.timeEndCall()},1)},e.prototype.btnGetCodeClicked=function(){return c(this,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return p.G.validator.isMobilePhone(this.input_phone.string,"any")?(this.getCode.active=!1,this.showTime(90),t=this.stateList[this.curStateIndex]+this.input_phone.string,[4,p.G.getPhoneCode(t)]):(p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip4"),[2]);case 1:return null!==(e=o.sent())&&1===(null==e?void 0:e.result)&&(this.curCode=e.statecode,this.curObjid=e.objid),[2]}})})},e.prototype.btnUserClicked=function(){h.default.inst.showWeb(d.policyUrl["UserP_"+p.G.curLanguage])},e.prototype.btnPrivacyClicked=function(){h.default.inst.showWeb(d.policyUrl["PrivacyP_"+p.G.curLanguage])},i([v(cc.EditBox)],e.prototype,"input_phone",void 0),i([v(cc.EditBox)],e.prototype,"input_pwd",void 0),i([v(cc.EditBox)],e.prototype,"input_code",void 0),i([v(cc.Label)],e.prototype,"getCodeLab",void 0),i([v(cc.Node)],e.prototype,"getCode",void 0),i([v(cc.Toggle)],e.prototype,"agreeToggle",void 0),i([v(cc.Node)],e.prototype,"btnLab",void 0),i([v(cc.Node)],e.prototype,"selectLab",void 0),i([v(cc.Node)],e.prototype,"selectList",void 0),i([v(cc.Node)],e.prototype,"selectItem",void 0),i([y],e)}(u.PopupBase);o.default=_,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"../../scripts/GameConfig":void 0,"./escapeMgr":"escapeMgr"}],escape_pop:[function(t,e,o){"use strict";cc._RF.push(e,"8affcyccChG3KchLklZN+Y3","escape_pop");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var s=c(t("../../scripts/Sound_Mgr")),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskN=null,e.gameStart=null,e.killerTip=null,e.suc2=null,e.fail1=null,e.fail1Tip=null,e.fail2=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.showStartTip=function(t){void 0===t&&(t=1),this.maskN.opacity=153,this.waitToDestroy(t),this.gameStart.active=!0,cc.tween(this.gameStart).blink(1,4).repeatForever().start()},e.prototype.showKillerTip=function(t){this.maskN.opacity=153,this.waitToDestroy(t),this.killerTip.active=!0,cc.tween(this.killerTip).blink(1,4).repeatForever().start()},e.prototype.waitToDestroy=function(t){var e=this;this.scheduleOnce(function(){e.node.destroy()},t)},e.prototype.showSuc2=function(t,e){this.waitToDestroy(3.5),this.suc2.active=!0,s.default.Inst.play("escape_reward"),this.suc2.getChildByName("cost").getComponent(cc.Label).string=t.toString(),this.suc2.getChildByName("get").getComponent(cc.Label).string=e.toString()},e.prototype.showFail1=function(t,e,o){this.waitToDestroy(3.5),this.fail1.active=!0,this.fail1Tip.getComponent(cc.RichText).string="<color=#FFFFFF>\u731b\u517d\u88ad\u51fb\u4e86 <color=#ffd695>"+t+"</c> \u91cc\u6240\u6709\u4eba</c>",this.fail1.getChildByName("coin").getComponent(cc.Label).string=e.toString(),this.fail1.getChildByName("dagger").getComponent(cc.Label).string=o.toString()},e.prototype.showFail2=function(t,e,o){this.waitToDestroy(3.5),this.fail2.active=!0,this.fail2.getChildByName("tip").getComponent(cc.RichText).string="<color=#FFFFFF>\u731b\u517d\u88ad\u51fb\u4e86 <color=#ffd695>"+t+"</c> \u91cc\u6240\u6709\u4eba</c>",this.fail2.getChildByName("invest").getComponent(cc.Label).string="\u4f60\u5931\u53bb\u4e86 "+e,this.fail2.getChildByName("dagger").getComponent(cc.Label).string=o.toString()},i([u(cc.Node)],e.prototype,"maskN",void 0),i([u(cc.Node)],e.prototype,"gameStart",void 0),i([u(cc.Node)],e.prototype,"killerTip",void 0),i([u(cc.Node)],e.prototype,"suc2",void 0),i([u(cc.Node)],e.prototype,"fail1",void 0),i([u(cc.Node)],e.prototype,"fail1Tip",void 0),i([u(cc.Node)],e.prototype,"fail2",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../scripts/Sound_Mgr":void 0}],escape_rank:[function(t,e,o){"use strict";cc._RF.push(e,"522f06Lx8VK7I2r46is31ce","escape_rank");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankList=null,e.item=null,e.playerIcon=null,e.playerPos=null,e.getV=null,e}return r(e,t),e.prototype.start=function(){this.loadRankData()},e.prototype.loadRankData=function(){this.loadCurWeekRankList()},e.prototype.loadPlayerInfo=function(){},e.prototype.toggleContainer=function(t){if(t.isChecked){var e=t.node.name;cc.log(e),"toggle1"==e?this.loadCurWeekRankList():this.loadLastWeekRankList()}},e.prototype.clearList=function(){for(;this.rankList.childrenCount>2;)this.rankList.children[2].destroy()},e.prototype.loadLastWeekRankList=function(){this.clearList();var t=[];this.loadPlayerInfo();for(var e=0;e<t.length;e++)cc.instantiate(this.item).parent=this.rankList},e.prototype.loadCurWeekRankList=function(){this.clearList();var t=[];this.loadPlayerInfo();for(var e=0;e<t.length;e++)cc.instantiate(this.item).parent=this.rankList},i([a(cc.Node)],e.prototype,"rankList",void 0),i([a(cc.Node)],e.prototype,"item",void 0),i([a(cc.Sprite)],e.prototype,"playerIcon",void 0),i([a(cc.Label)],e.prototype,"playerPos",void 0),i([a(cc.Label)],e.prototype,"getV",void 0),i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],escape_record:[function(t,e,o){"use strict";cc._RF.push(e,"47f5cn6tbRB9qzFsS1/pgGP","escape_record");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../scripts/G"),u=t("./escape"),p=a(t("./item_record")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.content=null,e.killer_100_record=null,e.killer_10_record=null,e.itemKiller=null,e.playerAccCost=null,e.playerAccGet=null,e.list=null,e.item=null,e}return r(e,t),e.prototype.start=function(){this.loadEscapeRecord()},e.prototype.loadEscapeRecord=function(){var t;return c(this,void 0,void 0,function(){var e;return s(this,function(o){switch(o.label){case 0:return[4,null===(t=l.G.clientWs)||void 0===t?void 0:t.callApi("GetKillerRecords",{playerId:l.G.uid})];case 1:return(e=o.sent()).isSucc?(1==e.res.result&&(cc.log(e.res),this.loadKiller_100_records(e.res.hundredlist),this.loadKiller_10_records(e.res.killerTenlist),this.playerAccCost.string=Myfun.addFloat(e.res.totalInvest,0).toFixed(2),this.playerAccGet.string=e.res.totalreturns.toString(),this.loadPlayerRecord(e.res.myArray)),[2]):(cc.log(e.err),[2])}})})},e.prototype.loadKiller_100_records=function(t){for(var e=this.killer_100_record.children[1],o=0,n=t.length;o<n;o++){var r=t[o],i=e.getChildByName(r.roomid+"");i&&(i.children[2].getComponent(cc.Label).string=r.times+"")}},e.prototype.loadKiller_10_records=function(t){for(var e=this.killer_10_record.children[1],o=0,n=(t=Myfun.sortByObjectValue(t,"periods")).length;o<n;o++){var r=t[o],i=cc.instantiate(this.itemKiller);i.active=!0,i.parent=e,i.getChildByName("name").getComponent(cc.Label).string=u.roomIdLinkName.get(r.roomid),i.getChildByName("period").getComponent(cc.Label).string=r.periods+"\u671f"}},e.prototype.loadPlayerRecord=function(t){for(var e=this,o=0,n=t.length;o<n;o++){var r=cc.instantiate(this.item);r.active=!0,r.getComponent(p.default).setData(t[o]),r.parent=this.list}this.scheduleOnce(function(){e.improveDC()},.1)},e.prototype.improveDC=function(){if(0!=this.content.childrenCount){var t=this.scrollView.parent.convertToWorldSpaceAR(cc.v2(this.scrollView.x-this.scrollView.anchorX*this.scrollView.width,this.scrollView.y-this.scrollView.anchorY*this.scrollView.height)),e=cc.rect(t.x,t.y,this.scrollView.width,this.scrollView.height);this.content.children.forEach(function(t){t.children.forEach(function(t){t.getBoundingBoxToWorld().intersects(e)?0===t.opacity&&(t.opacity=255):0!==t.opacity&&(t.opacity=0)})})}},i([f(cc.Node)],e.prototype,"scrollView",void 0),i([f(cc.Node)],e.prototype,"content",void 0),i([f(cc.Node)],e.prototype,"killer_100_record",void 0),i([f(cc.Node)],e.prototype,"killer_10_record",void 0),i([f(cc.Node)],e.prototype,"itemKiller",void 0),i([f(cc.Label)],e.prototype,"playerAccCost",void 0),i([f(cc.Label)],e.prototype,"playerAccGet",void 0),i([f(cc.Node)],e.prototype,"list",void 0),i([f(cc.Prefab)],e.prototype,"item",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../scripts/G":void 0,"./escape":"escape","./item_record":"item_record"}],escape_role:[function(t,e,o){"use strict";cc._RF.push(e,"8cda48gz1hFXo6K5hmKPgv9","escape_role");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ske=null,e.normal_role=null,e.self_role=null,e._role=null,e.nameN=null,e}return r(e,t),e.prototype.onEnable=function(){this.node.scale=0,cc.tween(this.node).to(.2,{scale:1}).start()},e.prototype.playAni=function(t,e){void 0===e&&(e=!1),this.ske.setAnimation(0,t,e)},e.prototype.leave=function(){this.nameN&&this.nameN.destroy()},e.prototype.init=function(){this._role=null,this.nameN=null,this.ske.skeletonData=this.normal_role,this.ske.setAnimation(0,"daiji",!0)},e.prototype.setData=function(t,e){this._role=t,e&&(this.nameN=e)},e.prototype.setRoleSke=function(){this.ske.skeletonData=this.self_role,this.ske.setAnimation(0,"daiji",!0)},Object.defineProperty(e.prototype,"Target",{get:function(){var t;return null===(t=this._role)||void 0===t?void 0:t.roomid},set:function(t){this._role.roomid=t},enumerable:!1,configurable:!0}),e.prototype.getRoleId=function(){var t;return null===(t=this._role)||void 0===t?void 0:t._id},i([a(sp.Skeleton)],e.prototype,"ske",void 0),i([a(sp.SkeletonData)],e.prototype,"normal_role",void 0),i([a(sp.SkeletonData)],e.prototype,"self_role",void 0),i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],escape_shopcard:[function(t,e,o){"use strict";cc._RF.push(e,"2ff7a00P89I1axY88RuwnhS","escape_shopcard");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=a(t("./shopCardItem")),u=t("../../scripts/G"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldLab=null,e.curShowKeyIcon=null,e.iconSfList=[],e.curShowKeyNum=null,e.keysLayer=null,e.itemKey=null,e.content=null,e.itemCard=null,e.curShowKeyId=1,e.keyIdList=[1,2,3,4,5],e.curKeyInfo=[],e.callFun=null,e}return r(e,t),e.prototype.start=function(){this.loadAccountInfo(),this.loadShopItems()},e.prototype.btnShowKeysLayerClicked=function(){var t=this;this.keysLayer.active=!this.keysLayer.active,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.keysLayer.active=!1},2),this.loadKeysInfo()},e.prototype.loadKeysInfo=function(){var t=this;this.keysLayer.removeAllChildren();for(var e=function(e){var n=o.keyIdList[e],r=cc.instantiate(o.itemKey);r.active=!0,r.parent=o.keysLayer,n==o.curShowKeyId&&(r.children[1].active=!0),r.children[0].getComponent(cc.Sprite).spriteFrame=o.iconSfList[n-1];var i=Myfun.findItemFromArr(o.curKeyInfo,"level",n);r.children[2].getComponent(cc.Label).string=null==i?void 0:i.num.toString(),r.on("click",function(){t.setCurShowKeyInfo(n),t.keysLayer.active=!1})},o=this,n=0,r=this.keyIdList.length;n<r;n++)e(n)},e.prototype.setCurShowKeyInfo=function(t){this.curShowKeyId=t,this.curShowKeyIcon.spriteFrame=this.iconSfList[t-1];var e=Myfun.findItemFromArr(this.curKeyInfo,"level",t);this.curShowKeyNum.string=e.num.toString()},e.prototype.setData=function(t){this.callFun=t},e.prototype.loadAccountInfo=function(){return c(this,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return[4,u.G.clientHttp.callApi("MyCurrencyList",{uid:u.G.uid})];case 1:return(t=o.sent()).isSucc?(this.goldLab.string=t.res.gems.toString(),this.curKeyInfo=t.res.keys,e=Myfun.findItemFromArr(this.curKeyInfo,"level",this.curShowKeyId),this.curShowKeyNum.string=e.num.toString(),[2]):[2]}})})},e.prototype.loadShopItems=function(){return c(this,void 0,void 0,function(){var t,e,o,n;return s(this,function(){for(t=0,e=u.G.cardListInfo.length;t<e;t++)o=u.G.cardListInfo[t],(n=cc.instantiate(this.itemCard)).parent=this.content,n.getComponent(l.default).setData(o);return[2]})})},e.prototype.btnCloseClicked=function(){var t=this;this.callFun&&this.callFun(),this.node.active=!1,this.scheduleOnce(function(){t.node.destroy()},1.5)},i([h(cc.Label)],e.prototype,"goldLab",void 0),i([h(cc.Sprite)],e.prototype,"curShowKeyIcon",void 0),i([h(cc.SpriteFrame)],e.prototype,"iconSfList",void 0),i([h(cc.Label)],e.prototype,"curShowKeyNum",void 0),i([h(cc.Node)],e.prototype,"keysLayer",void 0),i([h(cc.Node)],e.prototype,"itemKey",void 0),i([h(cc.Node)],e.prototype,"content",void 0),i([h(cc.Prefab)],e.prototype,"itemCard",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../scripts/G":void 0,"./shopCardItem":"shopCardItem"}],escape_tip:[function(t,e,o){"use strict";cc._RF.push(e,"398aawnuHNCmLnhwDL5M1en","escape_tip");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../core_lmn/core"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipLab=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.showTip=function(t){var e=this;this.tipLab.getComponent(c.i18nLabel).init(t,[]),this.scheduleOnce(function(){e.node.destroy()},1.2)},i([l(cc.Node)],e.prototype,"tipLab",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../core_lmn/core":void 0}],escape:[function(t,e,o){"use strict";cc._RF.push(e,"364bfcoF/5Pp56POgp6gEoT","escape");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),c=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&i(e,t,o);return c(e,t),e},l=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0}),o.roomIdLinkName=void 0;var d,h,f=t("../../scripts/G"),y=p(t("../../scripts/Sound_Mgr")),v=a(t("./AStar")),_=p(t("./escape_pop")),b=p(t("./escape_role")),g=p(t("./follow")),m=p(t("./escapeMgr")),w=t("../../scripts/ModuleDef"),P=t("../escape_config"),C=cc._decorator,S=C.ccclass,L=C.property;(function(t){t[t.otherRole=0]="otherRole",t[t.selfRole=1]="selfRole",t[t.killer=2]="killer"})(d||(d={})),function(t){t[t.MAIN=0]="MAIN",t[t.RECORD=1]="RECORD",t[t.RANK=2]="RANK",t[t.RULE=3]="RULE"}(h||(h={}));var O=new Map([["end1",{index:1,i18n:"escape_room1",pos:cc.v2(71,-270)}],["end2",{index:2,i18n:"escape_room2",pos:cc.v2(-204,-265)}],["end3",{index:3,i18n:"escape_room3",pos:cc.v2(-161,5)}],["end4",{index:4,i18n:"escape_room4",pos:cc.v2(-205,270)}],["end5",{index:5,i18n:"escape_room5",pos:cc.v2(67,300)}],["end6",{index:6,i18n:"escape_room6",pos:cc.v2(310,290)}],["end7",{index:7,i18n:"escape_room7",pos:cc.v2(292,5)}]]);o.roomIdLinkName=new Map([[1,"\u751c\u54c1\u8f66"],[2,"\u73a9\u5177\u5e97"],[3,"\u6d77\u76d7\u8239"],[4,"\u6469\u5929\u8f6e"],[5,"\u9a6c\u620f\u56e2"],[6,"\u65cb\u8f6c\u6728\u9a6c"],[7,"\u9b3c\u5c4b"]]);var R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainLayer=null,e.content=null,e.gemLab=null,e.daggerLab=null,e.Map=null,e.mapLayer=null,e.roomLayer=null,e.betRoomLayer=null,e.myBet=null,e.rolePre=null,e.killerN=null,e.roleName=null,e.time=null,e.btn_back=null,e.periodsLab=null,e.gameCoin=null,e.content2=null,e.selectLab=null,e.selectList=null,e.selectItem=null,e.aniArea=null,e.doorSke=null,e.prizeGems=null,e.layer_road=null,e.object_initPos=null,e.object_doorFront=null,e.start_point_player=null,e.start_point_killer=null,e.map_point=new Map,e.size=null,e.player_node=null,e.player_point=new v.Point(0,0),e.isMoving=!1,e.isInRoom=!1,e.isKillerShow=!1,e.killerEnterRoom=0,e.waitingList=[],e.roomList=[],e.endTarget=["end1","end2","end3","end4","end5","end6","end7"],e.rolePool=null,e.poolSize=60,e.curPeriod=0,e.round_RoomInvest=0,e.round_invest=0,e.round_get=0,e.round_daggers=0,e.initKillerPos=null,e.moveSpeed=.2,e.rewardRoom=["bet1","bet2","bet3","bet4","bet5","bet6","bet7"],e.lastSelectRoom="",e.isBacking=!1,e.betNumList=[20,10,1,.1],e.accBet=0,e.movingCount=0,e.curRateIndex=3,e.curLayer=h.MAIN,e}return r(e,t),e.prototype.onLoad=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return this.rolePool=new cc.NodePool,this.initPlayerPool(),this.readMap(),y.default.Inst.playMusic("escape_bgm"),window.addEventListener("beforeunload",function(){t.MSG_playerLeave()}),cc.game.on(cc.game.EVENT_HIDE,this._onEventHide,this),cc.game.on(cc.game.EVENT_SHOW,this._onEventShow,this),cc.director.on("playerLogin",function(){t.playerLogined()}),this.checkGameNotice(),[2]})})},e.prototype.checkGameNotice=function(){var t,e;return l(this,void 0,void 0,function(){var o;return u(this,function(n){switch(n.label){case 0:return[4,null===(t=f.G.clientHttp)||void 0===t?void 0:t.callApi("GameNotice",{})];case 1:return(o=n.sent()).isSucc?(null==o.res.maintainNotice?this.playerLogined():m.default.inst.showNotice(""),[2]):(m.default.inst.showWarning(null===(e=o.err)||void 0===e?void 0:e.message),[2])}})})},e.prototype.preloadGamePrefabs=function(){var t=cc.assetManager.getBundle(w.ModuleDef.GAME_ESCAPE);t&&P.ESCAPE_POP_INFO.forEach(function(e){null==t||t.preload(e.url,cc.Prefab,function(){})})},e.prototype._onEventHide=function(){return l(this,void 0,void 0,function(){return u(this,function(){return cc.log("hide.............."),cc.Tween.stopAll(),this.initKillState(),this.initGameState(),this.cancelListenMsg(),this.unscheduleAllCallbacks(),f.G.isLogin&&(this.MSG_playerLeave(),this.collectRole(this.player_node)),[2]})})},e.prototype._onEventShow=function(){cc.log("show.............."),f.G.isLogin&&this.playerLogined()},e.prototype.changeScene=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return cc.director.off("playerLogin"),cc.game.off(cc.game.EVENT_HIDE,this._onEventHide,this),cc.game.off(cc.game.EVENT_SHOW,this._onEventShow,this),cc.Tween.stopAll(),this.cancelListenMsg(),this.unscheduleAllCallbacks(),[4,this.MSG_playerLeave()];case 1:return t.sent(),[2]}})})},e.prototype.onDisable=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.changeScene(),[2]})})},e.prototype.onDestroy=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.changeScene(),[2]})})},e.prototype.playerLogined=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return""===f.G.uid?[3,2]:[4,this.connectWsServer()];case 1:return t.sent(),[3,5];case 2:return null!=f.G.getData("SSO_TOKEN",null)?[3,3]:(this.showLogin(),[3,5]);case 3:return f.G.uid=f.G.getData("uid",""),[4,this.connectWsServer()];case 4:t.sent(),t.label=5;case 5:return[2]}})})},e.prototype.connectWsServer=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return null!=f.G.clientWs?[3,4]:[4,this.reqWsUrl()];case 1:return null==(t=e.sent())?[3,3]:[4,f.G.initWsClient(t)];case 2:e.sent(),e.label=3;case 3:return[3,6];case 4:return f.G.clientWs.isConnected?[3,6]:[4,f.G.clientWs.connect()];case 5:e.sent(),e.label=6;case 6:return[4,this.MSG_PlayerEnter()];case 7:return e.sent(),[2]}})})},e.prototype.reqWsUrl=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return[4,f.G.clientHttp.callApi("Getprocessid",{playerId:f.G.uid})];case 1:return(t=e.sent()).isSucc?[2,t.res.worldServerUrl]:(cc.log(t.err.message),[2])}})})},e.prototype.cancelListenMsg=function(){var t,e,o;null===(t=f.G.clientWs)||void 0===t||t.unlistenMsgAll("Escape"),null===(e=f.G.clientWs)||void 0===e||e.unlistenMsgAll("Escapetime"),null===(o=f.G.clientWs)||void 0===o||o.unlistenMsgAll("Roominvest")},e.prototype.listenMsg=function(){var t,e,o;return l(this,void 0,void 0,function(){var n=this;return u(this,function(){return null===(t=f.G.clientWs)||void 0===t||t.listenMsg("Escape",function(t){return l(n,void 0,void 0,function(){var e,o,n;return u(this,function(r){switch(r.label){case 0:e=0,o=t.waitlist.length,r.label=1;case 1:return e<o?(n=t.waitlist[e]._id,this.isKillerShow||this.moveRole(n),[4,this.wait(.2*(e+1))]):[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}),null===(e=f.G.clientWs)||void 0===e||e.listenMsg("Escapetime",function(t){return l(n,void 0,void 0,function(){return u(this,function(){return this.showTimeCount(t.countdown),0==t.countdown&&void 0!==t.killroomid&&(this.killerEnterRoom=t.killroomid,this.showKiller()),void 0!==t.periods&&(this.curPeriod=t.periods,this.periodsLab.string="\u7b2c"+(t.periods+1)+"\u671f",this.MSG_RoundResult()),void 0!==t.killRoomGems&&this.getRoomBetInfo(this.killerEnterRoom,t.killRoomGems),[2]})})}),null===(o=f.G.clientWs)||void 0===o||o.listenMsg("Roominvest",function(t){return l(n,void 0,void 0,function(){return u(this,function(){return this.getRoomBetInfo(t.roomid,t.invest),[2]})})}),[2]})})},e.prototype.clearAllRoom=function(){var t=this;this.roomList.forEach(function(e){e.setPosition(m.default.inst.getRandomPos(e,t.Map.node,"waiting")),t.waitingList.push(e)}),this.roomList=[]},e.prototype.showTimeCount=function(t){var e;60==t&&(this.showStart_tip(),this.clearAllRoom(),this.MSG_RoundEnd(),this.clearRoomBetNum(),this.clearSelectedRoom(this.lastSelectRoom),this.hideRoundResult(),this.playDoorAni(1),f.G.isLogin&&(null===(e=this.player_node)||void 0===e||e.setPosition(m.default.inst.getRandomPos(this.player_node,this.Map.node,"waiting"))),this.initRound()),t>1&&(this.isKillerShow=!1),this.time.parent.active=!0,this.time.getComponent(cc.Label).string=""+t,t<=10&&t>0&&y.default.Inst.play("time"),1==t&&(this.isKillerShow=!0),0==t&&(this.time.parent.active=!1)},e.prototype.initKillState=function(){this.isKillerShow&&(cc.Tween.stopAllByTarget(this.killerN),this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0),this.killerN.setPosition(this.initKillerPos),this.isKillerShow=!1)},e.prototype.MSG_playerLeave=function(){var t,e;return l(this,void 0,void 0,function(){var o;return u(this,function(n){switch(n.label){case 0:return""!=f.G.uid&&(null===(t=f.G.clientWs)||void 0===t?void 0:t.isConnected)?[4,null===(e=f.G.clientWs)||void 0===e?void 0:e.callApi("ExitEscape",{playerId:f.G.uid})]:[2];case 1:return(o=n.sent()).isSucc?(1==o.res.result&&cc.log("leave success"),[2]):(cc.log(o.err),[2])}})})},e.prototype.MSG_PlayerEnter=function(){var t,e,o;return l(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:return""!=f.G.uid&&(null===(t=f.G.clientWs)||void 0===t?void 0:t.isConnected)?[4,null===(e=f.G.clientWs)||void 0===e?void 0:e.callApi("JoinEscape",{playerId:f.G.uid,deviceId:f.G.deviceId,ip:f.G.ip})]:[2];case 1:return(n=r.sent()).isSucc?1!=n.res.result?[3,3]:(f.G.isLogin=!0,cc.director.emit("hideLoading"),this.cancelListenMsg(),this.listenMsg(),f.G.playerGems=n.res.gems,this.daggerLab.string=n.res.player_daggers.toString(),this.loadAccountInfo(),void 0!==n.res.globalCountdown&&0==n.res.globalCountdown&&(this.time.parent.active=!1,this.isKillerShow=!0),this.initRoomBetInfo(n.res),this.setDoorState(n.res.globalCountdown),[4,this.initGameState()]):(f.G.eventMsg.emit(MI.MSG.tip,null===(o=n.err)||void 0===o?void 0:o.message),[2]);case 2:r.sent(),this.periodsLab.string="\u7b2c"+n.res.period+"\u671f",this.initEscapeRoomState(n.res.robotlist),void 0!==n.res.roomid?(this.isInRoom=!0,this.accBet=n.res.invest,this.showMyBet(this.endTarget[n.res.roomid-1],n.res.invest),this.lastSelectRoom=this.endTarget[n.res.roomid-1]):this.player_node=this.generateRole(d.selfRole),r.label=3;case 3:return[2]}})})},e.prototype.initRoomBetInfo=function(t){for(var e=1;e<=8;e++){var o=t["roomid"+e];void 0!==o&&this.getRoomBetInfo(e,o)}},e.prototype.initGameState=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(e){switch(e.label){case 0:return this.waitingList.forEach(function(e){t.collectRole(e)}),this.roomList.forEach(function(e){t.collectRole(e)}),this.hideRoundResult(),null!==this.player_node&&this.collectRole(this.player_node),this.waitingList=[],this.roomList=[],this.clearSelectedRoom(),this.lastSelectRoom="",this.accBet=0,this.isInRoom=!1,this.myBet.active=!1,this.isMoving=!1,this.movingCount=0,this.isBacking=!1,[4,this.wait(.1)];case 1:return e.sent(),[2]}})})},e.prototype.MSG_PlayerSelectOrBet=function(t,e,o,n){var r;return void 0===e&&(e="1"),void 0===o&&(o=0),void 0===n&&(n=""),l(this,void 0,void 0,function(){var i,c;return u(this,function(s){switch(s.label){case 0:return i={playerId:f.G.uid,type:e,roomid:O.get(t).index,invest:o},o>0&&""!==n&&(i={playerId:f.G.uid,type:e,oldroomid:O.get(n).index,roomid:O.get(t).index,invest:o}),[4,null===(r=f.G.clientWs)||void 0===r?void 0:r.callApi("SelectInvest",i)];case 1:return(c=s.sent()).isSucc?[2]:(cc.log(c.err),m.default.inst.showWarning(c.err.message),[2])}})})},e.prototype.MSG_RoundResult=function(){var t;return l(this,void 0,void 0,function(){var e;return u(this,function(o){switch(o.label){case 0:return[4,null===(t=f.G.clientWs)||void 0===t?void 0:t.callApi("GetEscapeResult",{playerId:f.G.uid,periods:this.curPeriod})];case 1:return(e=o.sent()).isSucc?(1==e.res.result&&(f.G.playerGems=e.res.gems,this.loadAccountInfo(),this.daggerLab.string=e.res.player_daggers.toString(),this.round_RoomInvest=e.res.killroominvest,this.round_get=e.res.returns,this.round_invest=e.res.invest,this.round_daggers=e.res.daggers),[2]):(cc.log(e.err),[2])}})})},e.prototype.MSG_RoundEnd=function(){var t;return l(this,void 0,void 0,function(){var e;return u(this,function(o){switch(o.label){case 0:return[4,null===(t=f.G.clientWs)||void 0===t?void 0:t.callApi("PerEndEscape",{playerId:f.G.uid})];case 1:return(e=o.sent()).isSucc?(1==e.res.result&&(this.refreshEscapeRoomState(e.res.robotlist),null==this.player_node&&(this.player_node=this.generateRole(d.selfRole))),[2]):(cc.log(e.err),[2])}})})},e.prototype.refreshEscapeRoomState=function(t){return l(this,void 0,void 0,function(){var e,o,n,r,i;return u(this,function(){for(e=0,o=t.length;e<o;e++)1==(n=t[e]).online?-1==(r=this.getRole(n._id,this.waitingList))?(i=this.generateRole(d.otherRole,n),this.setRoleRandomPos(i),this.waitingList.push(i)):((i=this.waitingList[r]).getComponent(b.default).setData(n),i.getComponent(b.default).playAni("daiji",!0)):(r=this.getRole(n._id,this.waitingList))>=0&&(i=this.waitingList[r],this.waitingList.splice(r,1),this.collectRole(i));return[2]})})},e.prototype.initEscapeRoomState=function(t){for(var e=0,o=t.length;e<o;e++){var n=t[e];if(1==n.online&&1==n.wait){var r=this.generateRole(d.otherRole,n);this.setRoleRandomPos(r,n.wait),r.getComponent(b.default).playAni("daiji",!0),this.waitingList.push(r)}else{var i=this.getRole(n._id,this.waitingList);i>=0&&(r=this.waitingList[i],this.waitingList.splice(i,1),this.collectRole(r))}}},e.prototype.initPlayerPool=function(){for(var t=0;t<this.poolSize;++t){var e=cc.instantiate(this.rolePre);this.rolePool.put(e)}},e.prototype.loadAccountInfo=function(){this.gameCoin.string=Myfun.transferNumToK(f.G.playerGems)},e.prototype.readMap=function(){this.layer_road=this.Map.getLayer("floor").getComponent(cc.TiledLayer);var t=this.Map.getLayer("wall").getComponent(cc.TiledLayer);this.object_initPos=this.Map.getObjectGroup("initPos"),this.size=this.Map.getMapSize(),this.start_point_player=this.getPoint(this.object_initPos,"start_player"),this.start_point_killer=this.getPoint(this.object_initPos,"start_killer"),this.initKillerPos=this.killerN.getPosition();for(var e=0;e<this.size.width;e++)for(var o=0;o<this.size.height;o++){var n=this.layer_road.getTiledTileAt(e,o,!0),r=t.getTiledTileAt(e,o,!0);if(0!==n.gid&&0===r.gid){var i=new v.Point(e,o);this.map_point.set(e+o*this.size.width,i)}}},e.prototype.getTilePos=function(t,e){var o=t/this.Map.getTileSize().width,n=(this.Map.node.getContentSize().height-e)/this.Map.getTileSize().height;return cc.v2(o,n)},e.prototype.findWay=function(t,e,o,n){var r;return l(this,void 0,void 0,function(){var i,c,s,a,p,h=this;return u(this,function(){return i=v.default.getRoute(t,e,this.map_point,this.size),c=0,n===d.killer?o.getComponentInChildren(sp.Skeleton).setAnimation(0,"zou3",!0):o.getComponent(b.default).playAni("zoulu",!0),s=function(){return l(h,void 0,void 0,function(){var t,r,a,l;return u(this,function(u){switch(u.label){case 0:return c==i.length&&c>0?n===d.killer?[3,1]:(n==d.selfRole&&(this.isInRoom=!0,this.isMoving=!1,this.movingCount--,this.showMyBet(e.targetName,this.accBet)),this.collectRole(o),[3,3]):[3,4];case 1:return[4,this.handleKillerEnterRoom(e)];case 2:u.sent(),u.label=3;case 3:return[2];case 4:return c>0&&(t=i[c-1],r=i[c],this.setRoleDir(t,r,o,n==d.killer)),a=i[c++],cc.tween(o).to(this.moveSpeed,{position:null===(l=this.layer_road.getTiledTileAt(a.x,a.y,!1))||void 0===l?void 0:l.node.position}).call(function(){n==d.otherRole&&(o.zIndex=-o.y),s()}).start(),[2]}})})},a=null===(r=this.layer_road.getTiledTileAt(t.x,t.y,!1))||void 0===r?void 0:r.node.position,p=Myfun.calculateDis(o.position,a),cc.tween(o).to(this.moveSpeed*p/30,{position:a}).call(function(){return l(h,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,s()];case 1:return t.sent(),[2]}})})}).start(),n==d.selfRole&&this.movingCount++,[2]})})},e.prototype.setRoleDir=function(t,e,o,n){void 0===n&&(n=!1),e.x<t.x?o.children[0].scaleX=n?-.5:1:e.x>t.x&&(o.children[0].scaleX=n?.5:-1)},e.prototype.handlePlayerEnterRoom=function(t,e,o,n){var r=this;if(t)i=m.default.inst.getRandomPos(e,this.Map.node,"waiting"),c=Myfun.calculateDis(e.position,i),cc.tween(e).to(this.moveSpeed*c/30,{position:m.default.inst.getRandomPos(e,this.Map.node,"waiting")}).call(function(){n==d.otherRole&&(e.zIndex=-e.y),e.getComponent(b.default).playAni("daiji",!0),n==d.selfRole&&(r.isBacking=!1)}).start();else{n==d.selfRole&&(this.isMoving=!1,this.isInRoom=!0,this.showMyBet(o.targetName,this.accBet));var i=m.default.inst.getRandomPos(e,this.roomLayer,o.targetName,n),c=Myfun.calculateDis(e.position,i);cc.tween(e).to(this.moveSpeed*c/30,{position:i}).call(function(){r.collectRole(e)}).start()}},e.prototype.showMyBet=function(t,e){this.myBet.active=!0,this.myBet.setPosition(O.get(t).pos),this.myBet.children[1].getComponent(cc.Label).string=Myfun.transferNumToK(e)},e.prototype.handleKillerEnterRoom=function(t){return l(this,void 0,void 0,function(){var e;return u(this,function(o){switch(o.label){case 0:return e=this.getPoint(this.object_initPos,t.targetName,!0),t.x!=e.x||t.y!=e.y?[3,4]:(this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0),[4,this.playKillerAni()]);case 1:return o.sent(),[4,this.showGemsAni()];case 2:return o.sent(),[4,this.clearRoom(t.targetName)];case 3:return o.sent(),this.checkRoundResult(),this.allBackToWait(),this.roundEnd(),[3,5];case 4:this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0),this.findWay(t,e,this.killerN,d.killer),o.label=5;case 5:return[2]}})})},e.prototype.setDoorState=function(t){void 0===t&&(t=0),0==t?this.doorSke.setAnimation(0,"close",!0):this.doorSke.setAnimation(0,"open",!0)},e.prototype.playDoorAni=function(t){return void 0===t&&(t=0),l(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return 1!=t?[3,2]:(this.doorSke.setAnimation(0,"open door",!1),[4,this.wait(1)]);case 1:return e.sent(),this.doorSke.setAnimation(0,"open",!0),[3,4];case 2:return this.doorSke.setAnimation(0,"close door",!1),[4,this.wait(1)];case 3:e.sent(),this.doorSke.setAnimation(0,"close",!0),e.label=4;case 4:return[2]}})})},e.prototype.showGemsAni=function(){return l(this,void 0,void 0,function(){var t,e,o,n;return u(this,function(r){switch(r.label){case 0:return t=this.killerEnterRoom,e=this.roomLayer.getChildByName("end"+t),o=this.aniArea.getChildByName("gems"),n=this.rewardRoom.filter(function(e){return e!=="bet"+t}),[4,this.onPlayCoinAni(e,this.aniArea,o,n)];case 1:return r.sent(),[2]}})})},e.prototype.onPlayCoinAni=function(t,e,o,n,r){var i=this;return new Promise(function(c){for(var s=Myfun.getNodePos(t,e),a=Myfun.getCirclePoints(80,s,70,50),l=function(t){var l=cc.instantiate(o);l.active=!0,l.parent=e,l.setPosition(s);var u=a[t].x,p=a[t].y;cc.tween(l).to(.15,{position:cc.v3(u,p)}).start(),i.scheduleOnce(function(){cc.Tween.stopAllByTarget(l);var o,s=l.getPosition(),a=t%7;o=6==a?i.prizeGems:i.betRoomLayer.getChildByName(n[a]).children[1];var u=Myfun.getNodePos(o,e),p=s.sub(u).mag()/500;cc.tween(l).to(p,{position:cc.v3(u.x,u.y)},{easing:"sineInOut"}).call(function(){l.destroy(),69==t&&(r&&r(),c())}).start()},.15+.2*.1)},u=0;u<70;u++)l(u)})},e.prototype.playKillerAni=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return y.default.Inst.play("escape_kill1"),this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"kan",!1),[4,this.wait(.5)];case 1:return t.sent(),this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0),this.killerN.setPosition(this.initKillerPos),[2]}})})},e.prototype.clearRoom=function(t){return l(this,void 0,void 0,function(){var e,o,n;return u(this,function(r){switch(r.label){case 0:for(this.clearRoomBetNum(),e=0,o=this.roomList.length;e<o;e++)(n=this.roomList[e]).getComponent(b.default).Target==O.get(t).index&&(n.angle=0,n.getComponent(b.default).playAni("daiji",!0),n.setPosition(m.default.inst.getRandomPos(n,this.Map.node,"waiting")),this.waitingList.push(n));return this.roomList=this.roomList.filter(function(e){return e.getComponent(b.default).Target!==O.get(t).index}),[4,this.wait(.1)];case 1:return r.sent(),[2]}})})},e.prototype.checkRoundResult=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.isInRoom&&this.accBet>0?this.endTarget[this.killerEnterRoom-1]===this.lastSelectRoom?this.showPop_fail2(this.round_invest,this.round_daggers):this.showPop_suc2(this.round_invest,this.round_get):this.showPop_fail1(),[2]})})},e.prototype.hideRoundResult=function(){var t=cc.find("escape_result",this.content);null==t||t.destroy()},e.prototype.clearRoomBetNum=function(){this.myBet.active=!1,this.myBet.children[1].getComponent(cc.Label).string="0";for(var t=1;t<8;t++){var e="bet"+t;this.betRoomLayer.getChildByName(e).getChildByName("betNum").getComponent(cc.Label).string="0"}},e.prototype.roundEnd=function(){this.clearSelectedRoom(this.lastSelectRoom)},e.prototype.initRound=function(){this.round_RoomInvest=0,this.round_get=0,this.round_invest=0,this.round_daggers=0,this.isInRoom=!1,this.isMoving=!1,this.myBet.active=!1,this.movingCount=0,this.lastSelectRoom="",this.isBacking=!1,this.isKillerShow=!1,this.accBet=0},e.prototype.allBackToWait=function(){var t=this;this.roomList.map(function(e){t.waitingList.push(e)}),this.roomList=[]},e.prototype.clearSelectedRoom=function(t){""==t||null==t?this.roomLayer.children.forEach(function(t){t.children[0].active=!0,t.children[1].active=!1}):(this.roomLayer.getChildByName(t).children[0].active=!0,this.roomLayer.getChildByName(t).children[1].active=!1)},e.prototype.setEndPos=function(t){if(f.G.isLogin){if(!(this.isKillerShow||this.isBacking||this.isMoving||this.movingCount>0)){var e=t.target.name;e!=this.lastSelectRoom&&(this.clearSelectedRoom(this.lastSelectRoom),this.roomLayer.getChildByName(e).children[0].active=!1,this.roomLayer.getChildByName(e).children[1].active=!0,this.isInRoom&&(this.showMyBet(e,this.accBet),this.handleInRoomEndPos(e)),this.lastSelectRoom=e)}}else this.showLogin()},e.prototype.handleInRoomEndPos=function(t){this.MSG_PlayerSelectOrBet(t,"1",this.accBet,this.lastSelectRoom)},e.prototype.handleNormalEndPos=function(t,e,o){this.MSG_PlayerSelectOrBet(t),this.findWay(this.start_point_player,o,e,d.selfRole)},e.prototype.getPoint=function(t,e,o){var n=t.getObject(e);if(n){var r=this.getTilePos(n.x,n.y),i=new v.Point(r.x,r.y);return o&&(i.targetName=e),i}},e.prototype.generateRole=function(t,e){var o;return void 0===t&&(t=d.otherRole),o=this.rolePool.size()>0?this.rolePool.get():cc.instantiate(this.rolePre),this.mapLayer.addChild(o),o.getComponent(b.default).init(),t===d.selfRole?this.setupSelfRole(o):this.setupOtherRole(o,e),o},e.prototype.collectRole=function(t){t&&t.getComponent(b.default).leave(),this.rolePool.put(t)},e.prototype.setupSelfRole=function(t){t.zIndex=1e4,t.getComponent(b.default).setRoleSke(),t.children[1].active=!0,t.setPosition(m.default.inst.getRandomPos(t,this.Map.node,"waiting")),t.getComponent(b.default).playAni("daiji",!0)},e.prototype.setRoleRandomPos=function(t,e){return void 0===e&&(e=1),l(this,void 0,void 0,function(){var o;return u(this,function(){return 1==e?t.setPosition(m.default.inst.getRandomPos(t,this.Map.node,"waiting")):(o=t.getComponent(b.default).Target,t.setPosition(m.default.inst.getRandomPos(t,this.roomLayer,this.endTarget[o-1]))),t.zIndex=-t.y,[2]})})},e.prototype.setupOtherRole=function(t,e){return l(this,void 0,void 0,function(){var o;return u(this,function(n){switch(n.label){case 0:return o=cc.instantiate(this.roleName),t.getComponent(b.default).setData(e,o),t.getComponent(b.default).playAni("daiji",!0),[4,this.wait(.2)];case 1:return n.sent(),t.children[1].active=!1,o.parent=this.roleName.parent,o.active=!0,o.getComponent(cc.Label).string=Myfun.maskString(e.name),o.getComponent(g.default).targetNode=t,[2]}})})},e.prototype.getRole=function(t,e){return e.findIndex(function(e){return e.getComponent(b.default).getRoleId()==t})},e.prototype.getRoomBetInfo=function(t,e){var o,n="bet"+t,r=null===(o=this.betRoomLayer.getChildByName(n))||void 0===o?void 0:o.getChildByName("betNum").getComponent(cc.Label);if(r){var i=Number(r.string);Myfun.jumpNumberAsync(i,e,.2,r)}},e.prototype.moveRole=function(t){var e=this.getRole(t,this.waitingList);if(e<0)cc.warn("not found role:",t);else{var o=this.waitingList[e],n=o.getComponent(b.default).Target;if(8!=n){var r=this.getPoint(this.object_initPos,this.endTarget[n-1],!0);this.findWay(this.start_point_player,r,o,d.otherRole),this.roomList.push(o),this.waitingList.splice(e,1)}}},e.prototype.showKiller=function(){return l(this,void 0,void 0,function(){var t,e,o=this;return u(this,function(n){switch(n.label){case 0:return this.isKillerShow=!0,[4,this.showPop_killer(3)];case 1:return n.sent(),this.killerEnterRoom>0&&this.killerEnterRoom<=7?t=this.endTarget[this.killerEnterRoom-1]:(t=Myfun.getRandomItemFromArr(this.endTarget),this.killerEnterRoom=O.get(t).index),e=this.getPoint(this.object_initPos,t,!0),this.findWay(this.start_point_killer,e,this.killerN,d.killer),this.scheduleOnce(function(){o.playDoorAni(0)},3),[2]}})})},e.prototype.showStart_tip=function(t){return void 0===t&&(t=1),l(this,void 0,void 0,function(){var e,o;return u(this,function(n){switch(n.label){case 0:return[4,Myfun.loadPrefab(P.ESCAPE_POP.RESULT,P.ESCAPE_POP_INFO)];case 1:return e=n.sent(),(o=cc.instantiate(e)).parent=this.content,o.getComponent(_.default).showStartTip(t),[2]}})})},e.prototype.showPop_killer=function(t){return l(this,void 0,void 0,function(){var e,o;return u(this,function(n){switch(n.label){case 0:return[4,Myfun.loadPrefab(P.ESCAPE_POP.RESULT,P.ESCAPE_POP_INFO)];case 1:return e=n.sent(),(o=cc.instantiate(e)).parent=this.content,o.getComponent(_.default).showKillerTip(t),[4,this.wait(t)];case 2:return n.sent(),[2]}})})},e.prototype.showPop_suc1=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return[4,Myfun.loadPrefab(P.ESCAPE_POP.RESULT,P.ESCAPE_POP_INFO)];case 1:return t=e.sent(),cc.instantiate(t).parent=this.content,[2]}})})},e.prototype.showPop_suc2=function(t,e){return l(this,void 0,void 0,function(){var o,n;return u(this,function(r){switch(r.label){case 0:return[4,Myfun.loadPrefab(P.ESCAPE_POP.RESULT,P.ESCAPE_POP_INFO)];case 1:return o=r.sent(),(n=cc.instantiate(o)).parent=this.content,n.getComponent(_.default).showSuc2(t,e),[2]}})})},e.prototype.showPop_fail1=function(){return l(this,void 0,void 0,function(){var t,e,n;return u(this,function(r){switch(r.label){case 0:return[4,Myfun.loadPrefab(P.ESCAPE_POP.RESULT,P.ESCAPE_POP_INFO)];case 1:return t=r.sent(),(e=cc.instantiate(t)).parent=this.content,n=o.roomIdLinkName.get(this.killerEnterRoom),e.getComponent(_.default).showFail1(n,this.round_RoomInvest,0),[2]}})})},e.prototype.showPop_fail2=function(t,e){return l(this,void 0,void 0,function(){var n,r,i;return u(this,function(c){switch(c.label){case 0:return[4,Myfun.loadPrefab(P.ESCAPE_POP.RESULT,P.ESCAPE_POP_INFO)];case 1:return n=c.sent(),(r=cc.instantiate(n)).parent=this.content,i=o.roomIdLinkName.get(this.killerEnterRoom),r.getComponent(_.default).showFail2(i,t,e),[2]}})})},e.prototype.wait=function(t){var e=this;return new Promise(function(o){e.scheduleOnce(function(){o()},t)})},e.prototype.btnBetSureClicked=function(){if(f.G.isLogin){if(!this.isKillerShow)if(""!=this.lastSelectRoom){var t=this.betNumList[this.curRateIndex];if(t>f.G.playerGems)m.default.inst.showWarning("escape_tip2");else{var e;this.MSG_PlayerSelectOrBet(this.lastSelectRoom,"2",t),this.accBet=Myfun.addFloat(this.accBet,t),f.G.playerGems=Myfun.subFloat(f.G.playerGems,t),this.loadAccountInfo(),this.isInRoom?(this.showMyBet(this.lastSelectRoom,this.accBet),e=this.generateRole(d.selfRole)):e=null==this.player_node?this.generateRole(d.selfRole):this.player_node;var o=this.getPoint(this.object_initPos,this.lastSelectRoom,!0);this.handleNormalEndPos(this.lastSelectRoom,e,o),this.roomList.push(e),this.player_node=null}}else m.default.inst.showWarning("escape_tip1")}else this.showLogin()},e.prototype.btnBetRateClicked=function(){var t=this;if(this.selectList.active)this.selectList.active=!1;else{this.selectList.active=!0,this.selectList.removeAllChildren();for(var e=function(e){var n=cc.instantiate(o.selectItem);n.active=!0,o.curRateIndex==e&&(n.children[0].active=!0),n.getChildByName("num").getComponent(cc.Label).string=o.betNumList[e]+"",n.parent=o.selectList,n.on("click",function(){n.children[0].active=!0,t.selectList.active=!1,t.curRateIndex=e,t.selectLab.string=t.betNumList[e].toString()})},o=this,n=0;n<this.betNumList.length;n++)e(n)}},e.prototype.btnRecordClicked=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return f.G.isLogin?(this.btn_back.active=!0,[4,Myfun.loadPrefab(P.ESCAPE_POP.RECORD,P.ESCAPE_POP_INFO)]):(this.showLogin(),[2]);case 1:return t=e.sent(),cc.instantiate(t).parent=this.content2,this.mainLayer.opacity=0,this.curLayer=h.RECORD,[2]}})})},e.prototype.btnRankCLicked=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return f.G.isLogin?(this.btn_back.active=!0,[4,Myfun.loadPrefab(P.ESCAPE_POP.RANK,P.ESCAPE_POP_INFO)]):(this.showLogin(),[2]);case 1:return t=e.sent(),cc.instantiate(t).parent=this.content2,this.mainLayer.opacity=0,this.curLayer=h.RANK,[2]}})})},e.prototype.btnRuleClicked=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return this.btn_back.active=!0,[4,Myfun.loadPrefab(P.ESCAPE_POP.RULE,P.ESCAPE_POP_INFO)];case 1:return t=e.sent(),cc.instantiate(t).parent=this.content2,this.mainLayer.opacity=0,this.curLayer=h.RULE,[2]}})})},e.prototype.btnShopClicked=function(){f.G.isLogin?m.default.inst.showCardShop():this.showLogin()},e.prototype.showLogin=function(){m.default.inst.showLogin()},e.prototype.btnCloseClicked=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.curLayer!=h.MAIN?[3,2]:(this.cancelListenMsg(),[4,this.MSG_playerLeave()]);case 1:return t.sent(),cc.director.loadScene("start"),[3,3];case 2:this.btn_back.active=!1,this.curLayer=h.MAIN,this.mainLayer.opacity=255,this.content2.removeAllChildren(),t.label=3;case 3:return[2]}})})},e.prototype.btnFriendClicked=function(){f.G.isLogin||this.showLogin()},e.prototype.btnDaggerClicked=function(){f.G.isLogin||this.showLogin()},e.prototype.btnBoxClicked=function(){f.G.isLogin?m.default.inst._loadBox():this.showLogin()},e.prototype.btnSetClicked=function(){f.G.isLogin?m.default.inst._loadSetting():this.showLogin()},e.prototype.btnCardClicked=function(){f.G.isLogin?m.default.inst.showMyCardBag():this.showLogin()},s([L(cc.Node)],e.prototype,"mainLayer",void 0),s([L(cc.Node)],e.prototype,"content",void 0),s([L(cc.Label)],e.prototype,"gemLab",void 0),s([L(cc.Label)],e.prototype,"daggerLab",void 0),s([L(cc.TiledMap)],e.prototype,"Map",void 0),s([L(cc.Node)],e.prototype,"mapLayer",void 0),s([L(cc.Node)],e.prototype,"roomLayer",void 0),s([L(cc.Node)],e.prototype,"betRoomLayer",void 0),s([L(cc.Node)],e.prototype,"myBet",void 0),s([L(cc.Prefab)],e.prototype,"rolePre",void 0),s([L(cc.Node)],e.prototype,"killerN",void 0),s([L(cc.Node)],e.prototype,"roleName",void 0),s([L(cc.Node)],e.prototype,"time",void 0),s([L(cc.Node)],e.prototype,"btn_back",void 0),s([L(cc.Label)],e.prototype,"periodsLab",void 0),s([L(cc.Label)],e.prototype,"gameCoin",void 0),s([L(cc.Node)],e.prototype,"content2",void 0),s([L(cc.Label)],e.prototype,"selectLab",void 0),s([L(cc.Node)],e.prototype,"selectList",void 0),s([L(cc.Node)],e.prototype,"selectItem",void 0),s([L(cc.Node)],e.prototype,"aniArea",void 0),s([L(sp.Skeleton)],e.prototype,"doorSke",void 0),s([L(cc.Node)],e.prototype,"prizeGems",void 0),s([S],e)}(cc.Component);o.default=R,cc._RF.pop()},{"../../scripts/G":void 0,"../../scripts/ModuleDef":void 0,"../../scripts/Sound_Mgr":void 0,"../escape_config":"escape_config","./AStar":"AStar","./escapeMgr":"escapeMgr","./escape_pop":"escape_pop","./escape_role":"escape_role","./follow":"follow"}],exchange:[function(t,e,o){"use strict";cc._RF.push(e,"8df7e2uueZCeICb9+23pjfl","exchange");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../core_lmn/core"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editBox=null,e.placeholder="",e}return r(e,t),e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.onSureClicked=function(){this.editBox.string},e.prototype.onCloseClicked=function(){this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},i([l(cc.EditBox)],e.prototype,"editBox",void 0),i([a],e)}(c.PopupBase);o.default=u,cc._RF.pop()},{"../../core_lmn/core":void 0}],follow:[function(t,e,o){"use strict";cc._RF.push(e,"7f861vruK9E9Lw4RlUBxitS","follow");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetNode=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.update=function(){var t,e,o;this.node.active&&(null===(t=this.targetNode)||void 0===t?void 0:t.active)&&(this.node.x=(null===(e=this.targetNode)||void 0===e?void 0:e.x)+this.targetNode.width/2,this.node.y=(null===(o=this.targetNode)||void 0===o?void 0:o.y)+this.targetNode.height+10)},i([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],iconSet:[function(t,e,o){"use strict";cc._RF.push(e,"cee92lASehABa7SpOQ0s/Vj","iconSet");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../core_lmn/core"),s=t("../../scripts/G"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e.item=null,e.iconSF=[],e.cb=null,e}return r(e,t),e.prototype.start=function(){t.prototype.start.call(this),this._loadIconList()},e.prototype.setCall=function(t){this.cb=t},e.prototype._loadIconList=function(){for(var t=this,e=function(e){var n=cc.instantiate(o.item);n.active=!0,n.parent=o.list,n.getComponent(cc.Sprite).spriteFrame=o.iconSF[e],n.children[0].active=s.G.iconId==e,n.on("click",function(){t._clearSelectFlag(),n.children[0].active=!0,s.G.iconId=e})},o=this,n=0;n<8;n++)e(n)},e.prototype._clearSelectFlag=function(){for(var t=0,e=this.list.childrenCount;t<e;t++)this.list.children[t].children[0].active=!1},e.prototype.btnCancelClicked=function(){this.hide()},e.prototype.btnSureCLicked=function(){this.cb&&this.cb(),this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},i([u(cc.Node)],e.prototype,"list",void 0),i([u(cc.Node)],e.prototype,"item",void 0),i([u(cc.SpriteFrame)],e.prototype,"iconSF",void 0),i([l],e)}(c.PopupBase);o.default=p,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0}],item_record:[function(t,e,o){"use strict";cc._RF.push(e,"66b8e1nCGJL8rvO2kD7mdHL","item_record");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./escape"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.issueLab=null,e.timeLab=null,e.resultLab=null,e.betRoom=null,e.killRoom=null,e.investLab=null,e.getLab=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.setData=function(t){this.issueLab.string=t.periods+"\u671f",this.timeLab.string="",0!==t.killroomid&&(t.roomid!==t.killroomid?(this.resultLab.color=Myfun.hexToRGBA("#edb284"),this.resultLab.getComponent(cc.Label).string="\u8eb2\u907f\u6210\u529f"):(this.resultLab.color=Myfun.hexToRGBA("#d30000"),this.resultLab.getComponent(cc.Label).string="\u8eb2\u907f\u5931\u8d25")),this.betRoom.string="["+c.roomIdLinkName.get(t.roomid)+"]",this.killRoom.string="["+c.roomIdLinkName.get(t.killroomid)+"]",this.investLab.string=Myfun.addFloat(t.invest,0).toFixed(2),this.getLab.string=Myfun.addFloat(t.returns,0).toFixed(2)},i([l(cc.Label)],e.prototype,"issueLab",void 0),i([l(cc.Label)],e.prototype,"timeLab",void 0),i([l(cc.Node)],e.prototype,"resultLab",void 0),i([l(cc.Label)],e.prototype,"betRoom",void 0),i([l(cc.Label)],e.prototype,"killRoom",void 0),i([l(cc.Label)],e.prototype,"investLab",void 0),i([l(cc.Label)],e.prototype,"getLab",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./escape":"escape"}],loadWeb:[function(t,e,o){"use strict";cc._RF.push(e,"2f3f4CsJntNUJth0SVH4BdN","loadWeb");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.web=null,e.closeCall=null,e}return r(e,t),e.prototype.init=function(t,e){void 0===e&&(e=null),this.web.url=t,this.closeCall=e},e.prototype.btnCloseClicked=function(){this.closeCall&&this.closeCall(),this.node.destroy()},i([a(cc.WebView)],e.prototype,"web",void 0),i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],loading:[function(t,e,o){"use strict";cc._RF.push(e,"873ffVjPtZNaZ0TFe9QAMo8","loading");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){var t=this;cc.director.on("hideLoading",function(){t.node.destroy()})},e.prototype.onDestroy=function(){cc.director.off("hideLoading")},i([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],myCardItem:[function(t,e,o){"use strict";cc._RF.push(e,"2d6deUgM5RKyJtoUE9OO/Gb","myCardItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardIconSpr=null,e.cardNameLab=null,e.cardInfo=null,e.cardStateInfo=null,e.btn_get=null,e.cardId=0,e.cardUid=0,e.getCall=null,e.cardState=null,e.throttleFn=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.setData=function(t,e){return c(this,void 0,void 0,function(){var o,n;return s(this,function(r){switch(r.label){case 0:return this.cardState=t,this.cardId=t.cardid,this.cardUid=t.cardnum,this.btn_get.active=0==t.state,this.getCall=e,1==(o=Myfun.findItemFromArr(u.G.cardListInfo,"ID",t.cardid)).cardtype?this.cardNameLab.getComponent(l.i18nLabel).init(o.titlekey,[o.gnum1.toString()]):2==o.cardtype?this.cardNameLab.getComponent(l.i18nLabel).init(o.titlekey,[o.keylevel.toString()]):this.cardNameLab.getComponent(l.i18nLabel).init(o.titlekey,[]),1==o.cardtype?this.cardInfo.getComponent(l.i18nLabel).init(o.desckey,[o.gnum1.toString()]):2==o.cardtype?this.cardInfo.getComponent(l.i18nLabel).init(o.desckey,[o.gnum1.toString(),o.keylevel.toString()]):3==o.cardtype?this.cardInfo.getComponent(l.i18nLabel).init(o.desckey,[]):this.cardInfo.getComponent(l.i18nLabel).init(o.desckey,[(o.gnum1+o.gnum2*o.ageing).toString()]),t.leftday>0?this.cardStateInfo.getComponent(l.i18nLabel).init("mycard2",[t.leftday.toString()]):this.cardStateInfo.getComponent(l.i18nLabel).init("",[]),n=this.cardIconSpr,[4,Myfun.loadPicFromRemote(o.cover)];case 1:return n.spriteFrame=r.sent(),[2]}})})},e.prototype.btnGetClicked=function(){var t=this;null==this.throttleFn?(this.throttleFn=Myfun.throttle(function(){return c(t,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return[4,null===(e=u.G.clientHttp)||void 0===e?void 0:e.callApi("MyCardClaim",{uid:u.G.uid,cardid:this.cardId,cardnum:this.cardUid})];case 1:return(t=o.sent()).isSucc?(0==t.res.result?(this.btn_get.active=!1,this.cardState.leftday>0&&this.cardStateInfo.getComponent(l.i18nLabel).init("mycard2",[(this.cardState.leftday-1).toString()]),this.getCall&&this.getCall()):p.default.inst.showWarning(t.res.message),[2]):(cc.log(t.err),[2])}})})},1e3),this.throttleFn()):this.throttleFn()},i([f(cc.Sprite)],e.prototype,"cardIconSpr",void 0),i([f(cc.Node)],e.prototype,"cardNameLab",void 0),i([f(cc.Node)],e.prototype,"cardInfo",void 0),i([f(cc.Node)],e.prototype,"cardStateInfo",void 0),i([f(cc.Node)],e.prototype,"btn_get",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],myCard:[function(t,e,o){"use strict";cc._RF.push(e,"52d035QW49LEKHsTSMEo6tb","myCard");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=a(t("./myCardItem")),h=cc._decorator,f=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldLab=null,e.curShowKeyIcon=null,e.iconSfList=[],e.curShowKeyNum=null,e.keysLayer=null,e.itemKey=null,e.scrollViewPro=null,e.curShowKeyId=1,e.keyIdList=[1,2,3,4,5],e.curKeyInfo=[],e}return r(e,t),e.prototype.start=function(){this.loadAccountInfo(),this.loadMyCard()},e.prototype.btnShowKeysLayerClicked=function(){var t=this;this.keysLayer.active=!this.keysLayer.active,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.keysLayer.active=!1},2),this.loadKeysInfo()},e.prototype.loadKeysInfo=function(){var t=this;this.keysLayer.removeAllChildren();for(var e=function(e){var n=o.keyIdList[e],r=cc.instantiate(o.itemKey);r.active=!0,r.parent=o.keysLayer,n==o.curShowKeyId&&(r.children[1].active=!0),r.children[0].getComponent(cc.Sprite).spriteFrame=o.iconSfList[n-1];var i=Myfun.findItemFromArr(o.curKeyInfo,"level",n);r.children[2].getComponent(cc.Label).string=null==i?void 0:i.num.toString(),r.on("click",function(){t.setCurShowKeyInfo(n),t.keysLayer.active=!1})},o=this,n=0,r=this.keyIdList.length;n<r;n++)e(n)},e.prototype.setCurShowKeyInfo=function(t){this.curShowKeyId=t,this.curShowKeyIcon.spriteFrame=this.iconSfList[t-1];var e=Myfun.findItemFromArr(this.curKeyInfo,"level",t);this.curShowKeyNum.string=e.num.toString()},e.prototype.loadAccountInfo=function(){return c(this,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return[4,u.G.clientHttp.callApi("MyCurrencyList",{uid:u.G.uid})];case 1:return(t=o.sent()).isSucc?(this.goldLab.string=t.res.gems.toString(),this.curKeyInfo=t.res.keys,e=Myfun.findItemFromArr(this.curKeyInfo,"level",this.curShowKeyId),this.curShowKeyNum.string=e.num.toString(),[2]):[2]}})})},e.prototype.loadMyCard=function(){var t;return c(this,void 0,void 0,function(){var e,o,n,r,i=this;return s(this,function(a){switch(a.label){case 0:return e=1,o=[],n=0,[4,u.G.clientHttp.callApi("MyCardList",{uid:u.G.uid,page:e})];case 1:return(r=a.sent()).isSucc?(this.curKeyInfo=r.res.keys,r.res.cards.length>0&&(n=e,o=o.concat(r.res.cards),e++,this.scrollViewPro&&this.scrollViewPro.setView(r.res.cards,function(t,e){t.getComponent(d.default).setData(e,function(){for(var t=0;t<o.length;t++){var n=o[t];n.cardnum==e.cardnum&&(n.leftday>0?(o[t].leftday=o[t].leftday-1,o[t].state=1):o.splice(t,1))}i.scrollViewPro&&i.scrollViewPro.updateScroll(o),i.loadAccountInfo()})},function(){return c(i,void 0,void 0,function(){var t,r;return s(this,function(i){switch(i.label){case 0:return n==e?(cc.log("\u6ca1\u6709\u65b0\u6570\u636e"),[2]):[4,u.G.clientHttp.callApi("MyCardList",{uid:u.G.uid,page:e})];case 1:return(t=i.sent()).isSucc?(n=e,t.res.cards.length>0&&(e++,o=o.concat(t.res.cards),this.scrollViewPro&&this.scrollViewPro.updateScroll(o)),[2]):(p.default.inst.showWarning(null===(r=t.err)||void 0===r?void 0:r.message),[2])}})})})),[2]):(p.default.inst.showWarning(null===(t=r.err)||void 0===t?void 0:t.message),[2])}})})},e.prototype.onBtnCloseClicked=function(){this.node.destroy()},i([y(cc.Label)],e.prototype,"goldLab",void 0),i([y(cc.Sprite)],e.prototype,"curShowKeyIcon",void 0),i([y(cc.SpriteFrame)],e.prototype,"iconSfList",void 0),i([y(cc.Label)],e.prototype,"curShowKeyNum",void 0),i([y(cc.Node)],e.prototype,"keysLayer",void 0),i([y(cc.Node)],e.prototype,"itemKey",void 0),i([y(l.ScrollViewProCom)],e.prototype,"scrollViewPro",void 0),i([f],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr","./myCardItem":"myCardItem"}],myOrderItem:[function(t,e,o){"use strict";cc._RF.push(e,"0d3caSOv5VDQZk4NLhWnRp8","myOrderItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconSprite=null,e.itemName=null,e.itemState=null,e.btnInfo=null,e.btnPay=null,e.order_id="",e.callBack=null,e}return r(e,t),e.prototype.setData=function(t,e){this.callBack=e;var o=t.goods_id;this.loadCardInfo(o),this.itemState.getComponent(l.i18nLabel).init("myorder_menu"+(t.state+1),[]),0==t.state?this.btnPay.active=!0:this.btnInfo.active=!0,this.order_id=t.order_no},e.prototype.loadCardInfo=function(t){return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return e=Myfun.findItemFromArr(u.G.cardListInfo,"ID",t),o=this.iconSprite,[4,Myfun.loadPicFromRemote(e.cover)];case 1:return o.spriteFrame=n.sent(),1==e.cardtype?this.itemName.getComponent(l.i18nLabel).init(e.titlekey,[e.gnum1.toString()]):2==e.cardtype?this.itemName.getComponent(l.i18nLabel).init(e.titlekey,[e.keylevel.toString()]):this.itemName.getComponent(l.i18nLabel).init(e.titlekey,[]),[2]}})})},e.prototype.btnInfoClicked=function(){p.default.inst.showOrderDetail(this.order_id)},e.prototype.btnPayClicked=function(){var t=this;p.default.inst.showOrderPay(this.order_id,0,function(){t.callBack&&t.callBack()})},i([f(cc.Sprite)],e.prototype,"iconSprite",void 0),i([f(cc.Node)],e.prototype,"itemName",void 0),i([f(cc.Node)],e.prototype,"itemState",void 0),i([f(cc.Node)],e.prototype,"btnInfo",void 0),i([f(cc.Node)],e.prototype,"btnPay",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],myOrder:[function(t,e,o){"use strict";cc._RF.push(e,"fecd8308y9KB5uLfVKx3uUG","myOrder");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=a(t("./myOrderItem")),h=cc._decorator,f=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollViewPro=null,e.content=null,e.scrollCom=null,e}return r(e,t),e.prototype.start=function(){this.loadOrderList()},e.prototype.getNewScroll=function(){this.content.removeAllChildren();var t=cc.instantiate(this.scrollViewPro.node);t.active=!0,t.parent=this.content,this.scrollCom=t.getComponent(l.ScrollViewProCom)},e.prototype.loadOrderList=function(t){var e,o;return void 0===t&&(t=0),c(this,void 0,void 0,function(){var n,r,i,a,l=this;return s(this,function(h){switch(h.label){case 0:return this.getNewScroll(),n=1,r=[],i=0,[4,u.G.clientHttp.callApi("MyOrderList",{uid:u.G.uid,order_state:t,page:n,pageNum:10})];case 1:return(a=h.sent()).isSucc?(1==a.res.result?p.default.inst.showWarning(null===(o=a.res)||void 0===o?void 0:o.message):0==a.res.result&&a.res.list.length>0&&(i=n,r=r.concat(a.res.list),n++,this.scrollCom&&this.scrollCom.setView(a.res.list,function(t,e){t.getComponent(d.default).setData(e,function(){l.loadOrderList(0)})},function(){return c(l,void 0,void 0,function(){var e,o;return s(this,function(c){switch(c.label){case 0:return i==n?(cc.log("\u6ca1\u6709\u65b0\u6570\u636e"),[2]):[4,u.G.clientHttp.callApi("MyOrderList",{uid:u.G.uid,order_state:t,page:n,pageNum:10})];case 1:return(e=c.sent()).isSucc?(i=n,0==a.res.result&&e.res.list.length>0&&(n++,r=r.concat(e.res.list),this.scrollCom&&this.scrollCom.updateScroll(r)),[2]):(p.default.inst.showWarning(null===(o=e.err)||void 0===o?void 0:o.message),[2])}})})})),[2]):(p.default.inst.showWarning(null===(e=a.err)||void 0===e?void 0:e.message),[2])}})})},e.prototype.toggleCheckedHandler=function(t){if(t.isChecked){var e=t.node.name;"toggle1"==e?this.loadOrderList():"toggle2"==e?this.loadOrderList(1):"toggle3"==e&&this.loadOrderList(2)}},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([y(l.ScrollViewProCom)],e.prototype,"scrollViewPro",void 0),i([y(cc.Node)],e.prototype,"content",void 0),i([f],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr","./myOrderItem":"myOrderItem"}],notice:[function(t,e,o){"use strict";cc._RF.push(e,"4da4d8qXpJH+qUFHsZ8jwbT","notice");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../core_lmn/core"),s=t("../../scripts/G"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e}return r(e,t),e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.btnSureClicked=function(){this.hide()},e.prototype.onAfterHide=function(){s.G.uid="",s.G.clientWsDisConnect(),cc.director.loadScene("start"),this.node.destroy()},i([u(cc.Node)],e.prototype,"content",void 0),i([l],e)}(c.PopupBase);o.default=p,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0}],orderDetail:[function(t,e,o){"use strict";cc._RF.push(e,"66cc0+T/o1HW5mBpC0DuHLD","orderDetail");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.order_state=null,e.order_username=null,e.order_useraddr=null,e.order_itemIcon=null,e.order_itemName=null,e.order_itemPrice=null,e.order_id=null,e.order_amount=null,e.order_time=null,e.curOrderId="",e}return r(e,t),e.prototype.start=function(){},e.prototype.loadOrderDetail=function(t){var e;return c(this,void 0,void 0,function(){var o;return s(this,function(n){switch(n.label){case 0:return this.curOrderId=t,[4,null===(e=u.G.clientHttp)||void 0===e?void 0:e.callApi("MyOrderDetail",{uid:u.G.uid,order_no:t})];case 1:return(o=n.sent()).isSucc?(1==o.res.result?p.default.inst.showWarning(o.res.message):(1==o.res.state?this.order_state.getComponent(l.i18nLabel).init("orderDetail_info2",[]):2==o.res.state&&this.order_state.getComponent(l.i18nLabel).init("orderDetail_info1",[]),this.order_username.string=o.res.user_name+" "+o.res.user_mobile,this.order_useraddr.string=o.res.user_address,this.loadCardInfo(o.res.goods_id),this.order_itemPrice.string=o.res.amount.toString(),this.order_id.string=t,this.order_amount.string=o.res.amount.toString(),this.order_time.string=Myfun.formattedDateTime(o.res.created_at)),[2]):[2]}})})},e.prototype.btnCopyClicked=function(){Myfun.copyToClip(this.curOrderId)},e.prototype.loadCardInfo=function(t){return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return e=Myfun.findItemFromArr(u.G.cardListInfo,"ID",t),o=this.order_itemIcon,[4,Myfun.loadPicFromRemote(e.cover)];case 1:return o.spriteFrame=n.sent(),1==e.cardtype?this.order_itemName.getComponent(l.i18nLabel).init(e.titlekey,[e.gnum1.toString()]):2==e.cardtype?this.order_itemName.getComponent(l.i18nLabel).init(e.titlekey,[e.keylevel.toString()]):this.order_itemName.getComponent(l.i18nLabel).init(e.titlekey,[]),[2]}})})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([f(cc.Node)],e.prototype,"order_state",void 0),i([f(cc.Label)],e.prototype,"order_username",void 0),i([f(cc.Label)],e.prototype,"order_useraddr",void 0),i([f(cc.Sprite)],e.prototype,"order_itemIcon",void 0),i([f(cc.Node)],e.prototype,"order_itemName",void 0),i([f(cc.Label)],e.prototype,"order_itemPrice",void 0),i([f(cc.Label)],e.prototype,"order_id",void 0),i([f(cc.Label)],e.prototype,"order_amount",void 0),i([f(cc.Label)],e.prototype,"order_time",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],orderPay:[function(t,e,o){"use strict";cc._RF.push(e,"7bbeecBpaZCeIYo2bfA9YiT","orderPay");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./cashDesk")),d=a(t("./escapeMgr")),h=cc._decorator,f=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.order_userName=null,e.order_userAddr=null,e.isDefault=null,e.addr_tip=null,e.order_itemIcon=null,e.order_itemName=null,e.order_itemPrice=null,e.order_totalAmount=null,e.order_payAmount=null,e.cashDeskPre=null,e.cardId=0,e.amount=0,e.shopSucCall=null,e.orderListSucCall=null,e.addrId=0,e.isToPayOrder=!1,e.order_id="",e.throttleFn=null,e}return r(e,t),e.prototype.setData=function(t,e){void 0===e&&(e=null),this.loadCardInfo(t);var o=Myfun.findItemFromArr(u.G.cardListInfo,"ID",t);this.amount=o.price,this.order_itemPrice.string=o.price.toString(),this.order_totalAmount.string=o.price.toString(),this.order_payAmount.string=o.price.toString(),this.shopSucCall=e,this.loadMyAddrData()},e.prototype.loadMyAddrData=function(){var t,e;return c(this,void 0,void 0,function(){var o,n,r;return s(this,function(i){switch(i.label){case 0:return[4,null===(t=u.G.clientHttp)||void 0===t?void 0:t.callApi("MyAddressList",{uid:u.G.uid})];case 1:return(o=i.sent()).isSucc?(o.res.list.length>0&&(n=o.res.list,r=Myfun.findItemFromArr(n,"is_default",!0),this.loadOrderAddrInfo(r)),[2]):(d.default.inst.showWarning(null===(e=o.err)||void 0===e?void 0:e.message),[2])}})})},e.prototype.loadOrderAddrInfo=function(t){this.order_userName.string=t.name+" "+t.mobile,this.order_userAddr.string=t.address,this.addrId=t.id,this.isDefault.active=t.is_default,this.addr_tip.active=!1},e.prototype.btnAddrClicked=function(){var t=this;this.isToPayOrder||d.default.inst.showAddrMgr(function(e){t.loadOrderAddrInfo(e)})},e.prototype.loadPayOrderDetail=function(t,e){var o;return c(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return this.orderListSucCall=e,this.isToPayOrder=!0,this.order_id=t,this.addr_tip.active=!1,[4,null===(o=u.G.clientHttp)||void 0===o?void 0:o.callApi("MyOrderDetail",{uid:u.G.uid,order_no:t})];case 1:return(n=r.sent()).isSucc?(1==n.res.result?d.default.inst.showWarning(n.res.message):(this.order_userName.string=n.res.user_name+" "+n.res.user_mobile,this.order_userAddr.string=n.res.user_address,this.loadCardInfo(n.res.goods_id),this.amount=n.res.amount,this.order_itemPrice.string=n.res.amount.toString(),this.order_totalAmount.string=n.res.amount.toString(),this.order_payAmount.string=n.res.amount.toString()),[2]):[2]}})})},e.prototype.loadCardInfo=function(t){return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return this.cardId=t,e=Myfun.findItemFromArr(u.G.cardListInfo,"ID",t),o=this.order_itemIcon,[4,Myfun.loadPicFromRemote(e.cover)];case 1:return o.spriteFrame=n.sent(),1==e.cardtype?this.order_itemName.getComponent(l.i18nLabel).init(e.titlekey,[e.gnum1.toString()]):2==e.cardtype?this.order_itemName.getComponent(l.i18nLabel).init(e.titlekey,[e.keylevel.toString()]):this.order_itemName.getComponent(l.i18nLabel).init(e.titlekey,[]),[2]}})})},e.prototype.btnPayClicked=function(){var t=this;if(0!=this.addrId||""!=this.order_id){var e=cc.instantiate(this.cashDeskPre);e.parent=this.node,e.getComponent(p.default).setData(this.cardId,this.amount,this.addrId,this.order_id),e.getComponent(p.default).setCallback(function(){t.shopSucCall&&t.shopSucCall(),t.orderListSucCall&&t.orderListSucCall(),t.node.destroy()},function(){d.default.inst.showWarning("Payment failed"),t.node.destroy()})}else d.default.inst.showWarning("addr_tip8")},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([y(cc.Label)],e.prototype,"order_userName",void 0),i([y(cc.Label)],e.prototype,"order_userAddr",void 0),i([y(cc.Node)],e.prototype,"isDefault",void 0),i([y(cc.Node)],e.prototype,"addr_tip",void 0),i([y(cc.Sprite)],e.prototype,"order_itemIcon",void 0),i([y(cc.Node)],e.prototype,"order_itemName",void 0),i([y(cc.Label)],e.prototype,"order_itemPrice",void 0),i([y(cc.Label)],e.prototype,"order_totalAmount",void 0),i([y(cc.Label)],e.prototype,"order_payAmount",void 0),i([y(cc.Prefab)],e.prototype,"cashDeskPre",void 0),i([f],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./cashDesk":"cashDesk","./escapeMgr":"escapeMgr"}],resetAPwd:[function(t,e,o){"use strict";cc._RF.push(e,"7bb42PBq8ZOKZ1f24Z/OYkW","resetAPwd");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../scripts/G"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.phone_edit_box=null,e.pwd_edit_box=null,e.rpwd_edit_box=null,e.phonecode_edit_box=null,e.btnGetCode=null,e.codeLab=null,e.placeholder="",e.curPhoneCode="",e.curPhoneObjId="",e.timeCountFun=null,e.throttleRegister=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.btnGetCodeClicked=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return a.G.validator.isMobilePhone(this.phone_edit_box.string,"any")?(this.btnGetCode.active=!1,this.showTime(90),[4,a.G.getPhoneCode(this.phone_edit_box.string)]):(a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip4"),[2]);case 1:return null!==(t=e.sent())&&1===t.result&&(this.curPhoneCode=t.statecode,this.curPhoneObjId=t.objid),[2]}})})},e.prototype.timeEndCall=function(){this.unschedule(this.timeCountFun),this.btnGetCode.active=!0,this.codeLab.fontSize=40,this.codeLab.string="Get verification code"},e.prototype.showTime=function(t){var e=this;this.codeLab.fontSize=50,this.codeLab.string=t+"s",t--,this.schedule(this.timeCountFun=function(){t>0?(e.codeLab.string=t+"s",t--):e.timeEndCall()},1)},e.prototype.checkInput=function(){var t=this.phone_edit_box.string;if(a.G.validator.isMobilePhone(t,"any")){var e=this.pwd_edit_box.string;if(""!=e)if(e.length<6)a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip9");else{var o=this.rpwd_edit_box.string;if(""!=o)if(""===o||o===e){if(""!=this.curPhoneCode&&this.phonecode_edit_box.string===this.curPhoneCode)return!0;a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip6")}else a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip11");else a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip10")}else a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip2")}else a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip4")},e.prototype.getInput=function(){return{objid:this.curPhoneObjId,source:1,phoneNumber:this.phone_edit_box.string,newpwd:this.pwd_edit_box.string}},e.prototype.btnSureClicked=function(){return c(this,void 0,void 0,function(){var t,e=this;return s(this,function(){return this.checkInput()&&(t=function(){return c(e,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return[4,a.G.clientHttp.callApi("ResetPwd",this.getInput())];case 1:return(t=o.sent()).isSucc?(1==t.res.result&&(a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip13"),this.node.destroy()),[2]):(a.G.eventMsg.emit(MI.MSG.tip,null===(e=t.err)||void 0===e?void 0:e.message),[2])}})})},null==this.throttleRegister?(this.throttleRegister=Myfun.throttle(t,1500),this.throttleRegister()):this.throttleRegister()),[2]})})},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([p(cc.EditBox)],e.prototype,"phone_edit_box",void 0),i([p(cc.EditBox)],e.prototype,"pwd_edit_box",void 0),i([p(cc.EditBox)],e.prototype,"rpwd_edit_box",void 0),i([p(cc.EditBox)],e.prototype,"phonecode_edit_box",void 0),i([p(cc.Node)],e.prototype,"btnGetCode",void 0),i([p(cc.Label)],e.prototype,"codeLab",void 0),i([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../scripts/G":void 0}],resetBPwd:[function(t,e,o){"use strict";cc._RF.push(e,"e9b7aMZkdRPJrAatIa0nw0w","resetBPwd");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=t("../../scripts/G"),p=a(t("./escapeMgr")),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_lab=null,e.stateFlag=null,e.progress=null,e.inputLayer=null,e.inputTip=null,e.sucNode=null,e.keyBoard=null,e.curState=0,e.inputStr="",e.verifyCode="",e.bpwd="",e.rbpwd="",e.verify_id="",e.throttleFn=null,e}return r(e,t),e.prototype.start=function(){this.inputTip.getComponent(l.i18nLabel).init("bpwd_tip1",[Myfun.maskIDNumber(u.G.phoneN,3,4)]),this.addKeyBoardListener()},e.prototype.addKeyBoardListener=function(){for(var t=0;t<this.keyBoard.children[0].childrenCount;t++)this.keyBoard.children[0].children[t].on("click",this.keyBoardClicked.bind(this))},e.prototype.checkState=function(){var t=this;1==this.curState?(this.inputLayer.children[4].active=!0,this.inputLayer.children[5].active=!0,cc.tween(this.progress).to(.5,{progress:.5}).call(function(){t.stateFlag.children[1].children[1].active=!0,t.stateFlag.children[1].children[3].color=new cc.Color(0,0,0,255)}).start(),this.btn_lab.getComponent(l.i18nLabel).init("set_surepwd",[]),this.verifyCode=this.inputStr,this.clearInput()):2==this.curState?(cc.tween(this.progress).to(.5,{progress:1}).call(function(){t.stateFlag.children[2].children[1].active=!0,t.stateFlag.children[2].children[3].color=new cc.Color(0,0,0,255)}).start(),this.bpwd=this.inputStr,this.clearInput()):3==this.curState&&(this.sucNode.active=!0,this.inputLayer.active=!1,this.inputTip.active=!1,this.rbpwd=this.inputStr,this.keyBoard.active=!1,this.clearInput())},e.prototype.clearInput=function(){for(var t=0;t<this.inputLayer.childrenCount;t++)this.inputLayer.children[t].children[1].getComponent(cc.Label).string="";this.inputStr=""},e.prototype.inputClicked=function(){this.curState>=1&&(this.keyBoard.active=!0)},e.prototype.btnSureClick=function(){return c(this,void 0,void 0,function(){var t,e=this;return s(this,function(){return t=function(){return c(e,void 0,void 0,function(){var t,e,o,n,r;return s(this,function(i){switch(i.label){case 0:return 0!=this.curState?[3,2]:[4,null===(e=u.G.clientHttp)||void 0===e?void 0:e.callApi("SendSms",{uid:u.G.uid,send_type:1})];case 1:return(t=i.sent()).isSucc?(0==t.res.result?(this.curState=1,this.verify_id=t.res.verify_id,this.btn_lab.getComponent(l.i18nLabel).init("set_surepwd",[]),this.inputClicked()):p.default.inst.showWarning(t.res.message),[3,8]):[2];case 2:return 1!=this.curState?[3,4]:4!==this.inputStr.length?(p.default.inst.showWarning("static_login_tip6"),[2]):[4,null===(o=u.G.clientHttp)||void 0===o?void 0:o.callApi("VerifySms",{uid:u.G.uid,verify_id:this.verify_id,verify_code:this.inputStr})];case 3:return(t=i.sent()).isSucc?(0==t.res.result?(this.checkState(),this.curState=2,this.inputTip.getComponent(l.i18nLabel).init("bpwd_tip2",[])):p.default.inst.showWarning(t.res.message),[3,8]):(p.default.inst.showWarning(null===(n=t.err)||void 0===n?void 0:n.message),[2]);case 4:return 2!=this.curState?[3,5]:6!==this.inputStr.length?(p.default.inst.showWarning("static_login_tip9"),[2]):(this.checkState(),this.curState=3,this.inputTip.getComponent(l.i18nLabel).init("bpwd_tip3",[]),[3,8]);case 5:return 3!=this.curState?[3,7]:6!==this.inputStr.length?(p.default.inst.showWarning("static_login_tip9"),[2]):this.bpwd!==this.inputStr?(p.default.inst.showWarning("static_login_tip11"),[2]):[4,null===(r=u.G.clientHttp)||void 0===r?void 0:r.callApi("TradePasswdSet",{uid:u.G.uid,password:this.bpwd,repassword:this.inputStr})];case 6:return(t=i.sent()).isSucc?(0==t.res.result?(this.checkState(),this.curState=4):p.default.inst.showWarning(t.res.message),[3,8]):[2];case 7:4==this.curState&&this.node.destroy(),i.label=8;case 8:return[2]}})})},null==this.throttleFn?(this.throttleFn=Myfun.throttle(t,1e3),this.throttleFn()):this.throttleFn(),[2]})})},e.prototype.keyBoardClicked=function(t){var e=t.target.name;if("."!=e){if("del"==e&&this.inputStr.length>0){var o=this.inputStr.length-1;this.inputStr=this.inputStr.slice(0,o),this.inputLayer.children[o].children[1].getComponent(cc.Label).string=""}"del"!==e&&(1==this.curState&&this.inputStr.length<4?(this.inputStr=this.inputStr+e,this.inputLayer.children[this.inputStr.length-1].children[1].getComponent(cc.Label).string=e):(2==this.curState||3==this.curState)&&this.inputStr.length<6&&(this.inputStr=this.inputStr+e,this.inputLayer.children[this.inputStr.length-1].children[1].getComponent(cc.Label).string=e))}},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([f(cc.Node)],e.prototype,"btn_lab",void 0),i([f(cc.Node)],e.prototype,"stateFlag",void 0),i([f(cc.ProgressBar)],e.prototype,"progress",void 0),i([f(cc.Node)],e.prototype,"inputLayer",void 0),i([f(cc.Node)],e.prototype,"inputTip",void 0),i([f(cc.Node)],e.prototype,"sucNode",void 0),i([f(cc.Node)],e.prototype,"keyBoard",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escapeMgr":"escapeMgr"}],resetPwd:[function(t,e,o){"use strict";cc._RF.push(e,"c3466TFNwREroGS8sPhdlvw","resetPwd");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.accountPre=null,e.businessPre=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.btn_accountPwdClicked=function(){cc.instantiate(this.accountPre).parent=this.node.parent},e.prototype.btn_businessPwdClicked=function(){cc.instantiate(this.businessPre).parent=this.node.parent},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([a(cc.Prefab)],e.prototype,"accountPre",void 0),i([a(cc.Prefab)],e.prototype,"businessPre",void 0),i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],revenge:[function(t,e,o){"use strict";cc._RF.push(e,"7bbd66gNHNBaJCU5KFDpvKd","revenge");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),c=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&i(e,t,o);return c(e,t),e},l=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var d=t("../../scripts/G"),h=a(t("./AStar")),f=p(t("./escape_role")),y=p(t("./follow")),v=a(t("./escapeMgr")),_=cc._decorator,b=_.ccclass,g=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Map=null,e.mapLayer=null,e.roomLayer=null,e.doorLayer=null,e.killerN=null,e.roleName=null,e.rolePre=null,e.daggerLab=null,e.timeN=null,e.layer_road=null,e.object_initPos=null,e.object_doorFront=null,e.start_point_player=null,e.start_point_killer=null,e.map_point=new Map,e.size=null,e.player_node=null,e.player_point=new h.Point(0,0),e.isMoving=!1,e.isInRoom=!1,e.isKillerShow=!1,e.waitingList=[],e.roomList=[],e.rolePool=null,e.poolSize=60,e.initKillerPos=null,e.moveSpeed=.1,e.accBet=0,e.lastSelectRoom="",e.isBacking=!1,e}return r(e,t),e.prototype.start=function(){this.rolePool=new cc.NodePool,this.initPlayerPool(),this.readMap()},e.prototype.readMap=function(){this.layer_road=this.Map.getLayer("floor").getComponent(cc.TiledLayer);var t=this.Map.getLayer("wall").getComponent(cc.TiledLayer);this.object_initPos=this.Map.getObjectGroup("initPos"),this.size=this.Map.getMapSize(),this.start_point_player=this.getPoint(this.object_initPos,"start_player"),this.start_point_killer=this.getPoint(this.object_initPos,"start_killer"),this.initKillerPos=this.killerN.getPosition();for(var e=0;e<this.size.width;e++)for(var o=0;o<this.size.height;o++){var n=this.layer_road.getTiledTileAt(e,o,!0),r=t.getTiledTileAt(e,o,!0);if(0!==n.gid&&0===r.gid){var i=new h.Point(e,o);this.map_point.set(e+o*this.size.width,i)}}},e.prototype.getPoint=function(t,e,o){var n=t.getObject(e);if(n){var r=this.getTilePos(n.x,n.y),i=new h.Point(r.x,r.y);return o&&(i.targetName=e),i}},e.prototype.getTilePos=function(t,e){var o=t/this.Map.getTileSize().width,n=(this.Map.node.getContentSize().height-e)/this.Map.getTileSize().height;return cc.v2(o,n)},e.prototype.initPlayerPool=function(){for(var t=0;t<this.poolSize;++t){var e=cc.instantiate(this.rolePre);this.rolePool.put(e)}},e.prototype.findWay=function(t,e,o,n,r){var i;return void 0===r&&(r=!1),l(this,void 0,void 0,function(){var c,s,a,p,d,y=this;return u(this,function(){return c=h.default.getRoute(t,e,this.map_point,this.size),s=0,n===v.RoleType.killer?o.getComponentInChildren(sp.Skeleton).setAnimation(0,"zou",!0):o.getComponent(f.default).playAni("zou",!0),a=null===(i=this.layer_road.getTiledTileAt(c[0].x,c[0].y,!1))||void 0===i?void 0:i.node.position,o.position.x<a.x?o.children[1].scaleX=.5:o.children[1].scaleX=-.5,p=Myfun.calculateDis(o.position,a),cc.tween(o).to(this.moveSpeed*p/30,{position:a}).call(function(){d(),n==v.RoleType.selfRole&&(y.isMoving=!0,y.isBacking=r)}).start(),d=function(){return l(y,void 0,void 0,function(){var t,i,a,l=this;return u(this,function(u){switch(u.label){case 0:return s!=c.length?[3,4]:n===v.RoleType.killer?[3,1]:(this.handlePlayerEnterRoom(r,o,e,n),[3,3]);case 1:return[4,this.handleKillerEnterRoom(e)];case 2:u.sent(),u.label=3;case 3:return[2];case 4:return s>0&&(t=c[s-1],i=c[s],this.setRoleDir(t,i,o)),a=c[s++],cc.tween(o).to(this.moveSpeed,{position:this.layer_road.getTiledTileAt(a.x,a.y,!1).node.position}).call(function(){n==v.RoleType.selfRole&&(l.player_point.x=a.x,l.player_point.y=a.y),d()}).start(),[2]}})})},[2]})})},e.prototype.handlePlayerEnterRoom=function(t,e,o,n){var r=this;if(t)c=v.default.inst.getRandomPos(e,this.Map.node,"waiting"),s=Myfun.calculateDis(e.position,c),cc.tween(e).to(this.moveSpeed*s/30,{position:v.default.inst.getRandomPos(e,this.Map.node,"waiting")}).call(function(){n==v.RoleType.otherRole&&(e.zIndex=-e.y),e.getComponent(f.default).playAni("daiji",!0),n==v.RoleType.selfRole&&(r.isBacking=!1)}).start();else{n==v.RoleType.selfRole&&(this.isMoving=!1,this.isInRoom=!0,this.showMyBet(o.targetName,this.accBet));var i=this.roomLayer.getChildByName(o.targetName),c=v.default.inst.getRandomPos(e,i,"area",n),s=Myfun.calculateDis(e.position,c);cc.tween(e).to(this.moveSpeed*s/30,{position:c}).call(function(){n==v.RoleType.otherRole&&(e.zIndex=-e.y),e.getComponent(f.default).playAni("daiji",!0)}).start()}},e.prototype.handleKillerEnterRoom=function(){this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0)},e.prototype.setRoleDir=function(t,e,o){e.x<t.x?o.children[1].scaleX=-.5:e.x>t.x&&(o.children[1].scaleX=.5)},e.prototype.btnBetClick=function(){this.isKillerShow||this.isInRoom||this.isMoving||cc.log("\u5148\u9009\u623f\u95f4")},e.prototype.setRoomClick=function(t){if(!this.isKillerShow&&null!=this.player_node){var e=t.target.name;if(e!=this.lastSelectRoom){this.clearSelectedRoom(this.lastSelectRoom),this.roomLayer.getChildByName(e).children[0].active=!0;var o=this.getPoint(this.object_initPos,e,!0);this.isMoving?this.handleMovingEndPos(e,o):this.isInRoom?(this.showMyBet(e,this.accBet),this.handleInRoomEndPos(e,o)):this.handleNormalEndPos(e,o),this.lastSelectRoom=e}}},e.prototype.clearSelectedRoom=function(t){""==t||null==t?this.roomLayer.children.forEach(function(t){t.children[0].active=!1}):this.roomLayer.getChildByName(t).children[0].active=!1},e.prototype.showMyBet=function(t,e){""!==this.lastSelectRoom&&(this.roomLayer.getChildByName(this.lastSelectRoom).children[0].active=!1),this.roomLayer.getChildByName(t).children[0].active=!0;var o=this.player_node.children[3];o.active=!0,o.children[1].getComponent(cc.Label).string=Myfun.transferNumToK(e)},e.prototype.handleMovingEndPos=function(t,e){cc.Tween.stopAllByTarget(this.player_node),this.findWay(this.player_point,e,this.player_node,v.RoleType.selfRole)},e.prototype.handleInRoomEndPos=function(t,e){var o=v.default.inst.getRandomPos(this.player_node,this.roomLayer,e.targetName,v.RoleType.selfRole);this.player_node.setPosition(o)},e.prototype.handleNormalEndPos=function(t,e){null!==this.player_node&&this.findWay(this.start_point_player,e,this.player_node,v.RoleType.selfRole)},e.prototype.generateRole=function(t,e){var o;return void 0===t&&(t=v.RoleType.otherRole),(o=this.rolePool.size()>0?this.rolePool.get():cc.instantiate(this.rolePre)).parent=this.mapLayer,t===v.RoleType.selfRole?this.setupSelfRole(o):this.setupOtherRole(o,e),o},e.prototype.setupSelfRole=function(t){t.zIndex=1e4,this.player_node=t,t.children[2].active=!0,t.setPosition(v.default.inst.getRandomPos(t,this.Map.node,"waiting"))},e.prototype.setupOtherRole=function(t,e){return l(this,void 0,void 0,function(){var o;return u(this,function(){return o=cc.instantiate(this.roleName),t.getComponent(f.default).setData(e,o),o.parent=this.roleName.parent,o.active=!0,o.getComponent(cc.Label).string=Myfun.maskString(e.name),o.getComponent(y.default).targetNode=t,[2]})})},e.prototype.setRoleRandomPos=function(t,e){return void 0===e&&(e=1),l(this,void 0,void 0,function(){var o,n;return u(this,function(){return 1==e?t.setPosition(v.default.inst.getRandomPos(t,this.Map.node,"waiting")):(o=t.getComponent(f.default).Target,n=this.roomLayer.getChildByName("player_end"+o),t.setPosition(v.default.inst.getRandomPos(t,n,"area"))),t.zIndex=-t.y,[2]})})},e.prototype.showKiller=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(){return this.isKillerShow?[2]:(this.isKillerShow=!0,this._playHideRoomDoorAni(!1),t=this.getPoint(this.object_initPos,"killer_end1",!0),this.findWay(this.start_point_killer,t,this.killerN,v.RoleType.killer),[2])})})},e.prototype._playHideRoomDoorAni=function(t){void 0===t&&(t=!0),this.playDoorAni("door4",t),this.playDoorAni("door5",t)},e.prototype.playDoorAni=function(t,e){return void 0===e&&(e=!0),l(this,void 0,void 0,function(){var o;return u(this,function(){return o=e?"Open the door":"Close the door",this.doorLayer.getChildByName(t).getComponent(sp.Skeleton).setAnimation(0,o,!1),[2]})})},e.prototype.btnBetSureClicked=function(){this.isKillerShow||(this.isInRoom||this.isMoving?0>d.G.playerGems?v.default.inst.showWarning("escape_tip2"):(this.accBet=Myfun.addFloat(this.accBet,0),this._loadAccountInfo(),this.isInRoom&&this.showMyBet(this.lastSelectRoom,this.accBet)):v.default.inst.showWarning("escape_tip1"))},e.prototype._loadAccountInfo=function(){},e.prototype.btnRecordClicked=function(){},e.prototype.btnRuleClicked=function(){},e.prototype.testPlayer=function(){null==this.player_node&&this.generateRole(v.RoleType.selfRole)},s([g(cc.TiledMap)],e.prototype,"Map",void 0),s([g(cc.Node)],e.prototype,"mapLayer",void 0),s([g(cc.Node)],e.prototype,"roomLayer",void 0),s([g(cc.Node)],e.prototype,"doorLayer",void 0),s([g(cc.Node)],e.prototype,"killerN",void 0),s([g(cc.Node)],e.prototype,"roleName",void 0),s([g(cc.Prefab)],e.prototype,"rolePre",void 0),s([g(cc.Label)],e.prototype,"daggerLab",void 0),s([g(cc.Node)],e.prototype,"timeN",void 0),s([b],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../scripts/G":void 0,"./AStar":"AStar","./escapeMgr":"escapeMgr","./escape_role":"escape_role","./follow":"follow"}],setting:[function(t,e,o){"use strict";cc._RF.push(e,"cf70evjG1FP95N268HzSCR4","setting");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../scripts/G"),u=t("../../scripts/GameConfig"),p=t("../escape_config"),d=a(t("./editPlayerName")),h=a(t("./escapeMgr")),f=a(t("./iconSet")),y=cc._decorator,v=y.ccclass,_=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerIcon=null,e.playerName=null,e.playerID=null,e.iconSetPre=null,e.sharePre=null,e.nameSetPre=null,e.audioSetPre=null,e.resetPwdPre=null,e.bankCardPre=null,e.authPre=null,e.iconSF=[],e}return r(e,t),e.prototype.start=function(){this.loadPlayerData()},e.prototype.getInviteCode=function(){var t,e;return c(this,void 0,void 0,function(){var o;return s(this,function(n){switch(n.label){case 0:return[4,null===(t=l.G.clientHttp)||void 0===t?void 0:t.callApi("MyInviteCode",{})];case 1:return(o=n.sent()).isSucc?(cc.log(o.res.invite_code),[2]):(cc.log(null===(e=o.err)||void 0===e?void 0:e.message),[2])}})})},e.prototype.loadPlayerData=function(){this.playerName.string=""==l.G.uname?"xxxxxxxxx":l.G.uname,this.playerID.string="ID:"+Myfun.maskString(l.G.uid,4,4),this.playerIcon.spriteFrame=this.iconSF[l.G.iconId]},e.prototype.btnEditNameClicked=function(){var t=this,e=cc.instantiate(this.nameSetPre);e.getComponent(d.default).setCall(function(){t.loadPlayerData()}),e.parent=this.node},e.prototype.btnCopyIDClicked=function(){Myfun.copyToClip(l.G.uid,function(){h.default.inst.showWarning("static_copy")})},e.prototype.iconSetClicked=function(){var t=this,e=cc.instantiate(this.iconSetPre);e.getComponent(f.default).setCall(function(){t.loadPlayerData()}),e.parent=this.node},e.prototype.btnMyOrderClicked=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,Myfun.loadPrefab(p.ESCAPE_POP.MYORDER,p.ESCAPE_POP_INFO)];case 1:return t=e.sent(),cc.instantiate(t).parent=this.node,[2]}})})},e.prototype.btnServiceClicked=function(){return c(this,void 0,void 0,function(){return s(this,function(){return[2]})})},e.prototype.btnMyCountClicked=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,Myfun.loadPrefab(p.ESCAPE_POP.CASHOUT,p.ESCAPE_POP_INFO)];case 1:return t=e.sent(),cc.instantiate(t).parent=this.node,[2]}})})},e.prototype.shareClicked=function(){cc.instantiate(this.sharePre).parent=this.node},e.prototype.audioSetClicked=function(){cc.instantiate(this.audioSetPre).parent=this.node},e.prototype.resetPwdClicked=function(){cc.instantiate(this.resetPwdPre).parent=this.node},e.prototype.bankCardClicked=function(){cc.instantiate(this.bankCardPre).parent=this.node},e.prototype.btnAuthClicked=function(){cc.instantiate(this.authPre).parent=this.node},e.prototype.btnUserClicked=function(){h.default.inst.showWeb(u.policyUrl["UserP_"+l.G.curLanguage])},e.prototype.btnPrivacyClicked=function(){h.default.inst.showWeb(u.policyUrl["PrivacyP_"+l.G.curLanguage])},e.prototype.btnAddrMgrClicked=function(){return c(this,void 0,void 0,function(){return s(this,function(){return h.default.inst.showAddrMgr(),[2]})})},e.prototype.btnLogoutClicked=function(){l.G.uid="",l.G.isLogin=!1,localStorage.removeItem("SSO_TOKEN"),l.G.clientWsDisConnect(),cc.director.loadScene("start")},e.prototype.btnCloseClicked=function(){h.default.inst._loadEscape(),this.node.destroy()},i([_(cc.Sprite)],e.prototype,"playerIcon",void 0),i([_(cc.Label)],e.prototype,"playerName",void 0),i([_(cc.Label)],e.prototype,"playerID",void 0),i([_(cc.Prefab)],e.prototype,"iconSetPre",void 0),i([_(cc.Prefab)],e.prototype,"sharePre",void 0),i([_(cc.Prefab)],e.prototype,"nameSetPre",void 0),i([_(cc.Prefab)],e.prototype,"audioSetPre",void 0),i([_(cc.Prefab)],e.prototype,"resetPwdPre",void 0),i([_(cc.Prefab)],e.prototype,"bankCardPre",void 0),i([_(cc.Prefab)],e.prototype,"authPre",void 0),i([_(cc.SpriteFrame)],e.prototype,"iconSF",void 0),i([v],e)}(cc.Component);o.default=b,cc._RF.pop()},{"../../scripts/G":void 0,"../../scripts/GameConfig":void 0,"../escape_config":"escape_config","./editPlayerName":"editPlayerName","./escapeMgr":"escapeMgr","./iconSet":"iconSet"}],share:[function(t,e,o){"use strict";cc._RF.push(e,"2a0f4iZM9dPcJjfO2OxK3ge","share");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=t("../../scripts/G"),u=cc._decorator,p=u.ccclass,d=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetNode=null,e.qrcode=null,e}return r(e,t),e.prototype.start=function(){this.loadQRCode()},e.prototype.loadQRCode=function(){return c(this,void 0,void 0,function(){var t,e,o;return s(this,function(n){switch(n.label){case 0:return t=Myfun.findItemFromArr(l.G.versionConfig,"language",l.G.curLanguage),""===(e=t.qrCode)?[3,2]:(o=this.qrcode,[4,Myfun.loadPicFromRemote(e)]);case 1:o.spriteFrame=n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.btnDownloadClick=function(){this.saveScreen(this.targetNode)},e.prototype.btnCloseClicked=function(){this.node.destroy()},i([d(cc.Node)],e.prototype,"targetNode",void 0),i([d(cc.Sprite)],e.prototype,"qrcode",void 0),i([p],e)}(a.myCapture);o.default=h,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0}],shopCardItem:[function(t,e,o){"use strict";cc._RF.push(e,"083f78xST5CQLSkqQ7HxlMk","shopCardItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../core_lmn/core"),u=a(t("./escapeMgr")),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardIconSpr=null,e.cardNameLab=null,e.cardInfo=null,e.cardPriceLab=null,e.type1N=null,e.type3N=null,e.cardId=0,e.cardData=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.setData=function(t){return c(this,void 0,void 0,function(){var e,o,n,r;return s(this,function(i){switch(i.label){case 0:return this.cardId=t.ID,this.cardData=t,1==t.cardtype?this.cardNameLab.getComponent(l.i18nLabel).init(t.titlekey,[t.gnum1.toString()]):2==t.cardtype?this.cardNameLab.getComponent(l.i18nLabel).init(t.titlekey,[t.keylevel.toString()]):this.cardNameLab.getComponent(l.i18nLabel).init(t.titlekey,[]),1==t.cardtype?this.cardInfo.getComponent(l.i18nLabel).init(t.desckey,[t.gnum1.toString()]):2==t.cardtype?this.cardInfo.getComponent(l.i18nLabel).init(t.desckey,[t.gnum1.toString(),t.keylevel.toString()]):3==t.cardtype?this.cardInfo.getComponent(l.i18nLabel).init(t.desckey,[]):this.cardInfo.getComponent(l.i18nLabel).init(t.desckey,[(t.gnum1+t.gnum2*t.ageing).toString()]),this.cardPriceLab.string="$"+t.price+".00",1!=t.cardtype&&2!=t.cardtype?[3,2]:(this.type1N.active=!0,e=this.type1N.children[0].getComponent(cc.Sprite),[4,Myfun.loadPicFromRemote(t.img)]);case 1:return e.spriteFrame=i.sent(),this.type1N.children[1].getComponent(cc.Label).string=t.gnum1.toString(),[3,5];case 2:return 4!=t.cardtype?[3,5]:(this.type3N.active=!0,o=this.type3N.children[0].getComponentInChildren(cc.Sprite),[4,Myfun.loadPicFromRemote(t.img)]);case 3:return o.spriteFrame=i.sent(),n=this.type3N.children[1].getComponentInChildren(cc.Sprite),[4,Myfun.loadPicFromRemote(t.img)];case 4:n.spriteFrame=i.sent(),this.type3N.children[0].getComponentInChildren(cc.Label).string=t.gnum1.toString(),this.type3N.children[1].getComponentInChildren(cc.Label).string=t.gnum2.toString(),i.label=5;case 5:return r=this.cardIconSpr,[4,Myfun.loadPicFromRemote(t.cover)];case 6:return r.spriteFrame=i.sent(),[2]}})})},e.prototype.btnBuyClicked=function(){return c(this,void 0,void 0,function(){var t=this;return s(this,function(){return u.default.inst.showOrderPay("",this.cardId,function(){u.default.inst.showGetCard(t.cardData)}),[2]})})},i([h(cc.Sprite)],e.prototype,"cardIconSpr",void 0),i([h(cc.Node)],e.prototype,"cardNameLab",void 0),i([h(cc.Node)],e.prototype,"cardInfo",void 0),i([h(cc.Label)],e.prototype,"cardPriceLab",void 0),i([h(cc.Node)],e.prototype,"type1N",void 0),i([h(cc.Node)],e.prototype,"type3N",void 0),i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../core_lmn/core":void 0,"./escapeMgr":"escapeMgr"}]},{},["escape_config","AStar","addrEdit","addrMgr","audioSet","auth","bankBind","bankMgr","bankTip","box","box_item","box_tip","card_get","cashDesk","cashRecord","cashRecordItem","cashTransfer","cashout","cashoutCheck","editPlayerName","escape","escapeMgr","escape_getItem","escape_hint","escape_login","escape_pop","escape_rank","escape_record","escape_role","escape_shopcard","escape_tip","exchange","follow","iconSet","item_record","loadWeb","loading","myCard","myCardItem","myOrder","myOrderItem","notice","orderDetail","orderPay","resetAPwd","resetBPwd","resetPwd","revenge","setting","share","shopCardItem"]);