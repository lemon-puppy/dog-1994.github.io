window.__require=function t(e,o,n){function i(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var p=o[s]={exports:{}};e[s][0].call(p.exports,function(t){return i(e[s][1][t]||t)},p,p.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({AStar:[function(t,e,o){"use strict";cc._RF.push(e,"becf359V8dBl7DkIcQtdawO","AStar");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Point=void 0;var c=cc._decorator,a=c.ccclass,l=(c.property,function(t,e){this.G=0,this.H=0,this.F=0,this.father=null,this.is_close=!1,this.targetName="",this.x=t,this.y=e});o.Point=l;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getRoute=function(t,e,o,n){var i=this;this.is_find=!1,this.arr_open=[],this.pppp=null,this.start=r({},t),this.end=r({},e),this.map=new Map,o.forEach(function(t,e){i.map.set(e,r({},t))}),this.size=n,o.get(this.start.x+this.start.y*this.size.width).G=0;var s=new Array;try{this.search(this.start)}catch(c){return cc.error("\u4f4d\u7f6e\u4e0d\u5bf9"),s}return this.pppp&&this.getFather(this.pppp,s),s},e.search=function(t){var e=this;if(t.x==this.end.x&&t.y==this.end.y)return this.is_find=!0,void(this.pppp=t);this.getAround(t).forEach(function(o){e.setFather(o,t)}),this.arr_open.sort(this.compare),this.arr_open.forEach(function(t,o,n){t.is_close&&n.splice(o,1),e.is_find||e.search(t)})},e.getAround=function(t){t.is_close=!0;var e,o,n=new Array;return 0!=t.y&&(e=t.x+(t.y-1)*this.size.width,(o=this.map.get(e))&&!o.is_close&&(n.push(this.map.get(e)),this.arr_open.push(this.map.get(e)))),t.y+1!=this.size.height&&(e=t.x+(t.y+1)*this.size.width,(o=this.map.get(e))&&!o.is_close&&(n.push(this.map.get(e)),this.arr_open.push(this.map.get(e)))),0!=t.x&&(e=t.x-1+t.y*this.size.width,(o=this.map.get(e))&&!o.is_close&&(n.push(this.map.get(e)),this.arr_open.push(this.map.get(e)))),t.x+1!=this.size.width&&(e=t.x+1+t.y*this.size.width,(o=this.map.get(e))&&!o.is_close&&(n.push(this.map.get(e)),this.arr_open.push(this.map.get(e)))),n},e.isValidPoint=function(t,e){return t>=0&&e>=0&&t<this.size.width&&e<this.size.height},e.setFather=function(t,e){(!t.father||t.father.G>e.G)&&(t.father=e,t.G=t.father.G+1,t.H=Math.abs(t.x-this.end.x)+Math.abs(t.y-this.end.y),t.F=t.G+t.H)},e.compare=function(t,e){return t.F>e.F?1:-1},e.getFather=function(t,e){var o=t.father;o&&this.getFather(o,e),e.push(t)},e.start=null,e.end=null,e.map=null,e.size=null,e.arr_open=[],e.pppp=null,e.is_find=!1,s([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],audioSet:[function(t,e,o){"use strict";cc._RF.push(e,"386058Ka8hPsK/LHRqT99uU","audioSet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../core_lmn/core"),c=t("../../scripts/G"),a=t("../../scripts/Sound_Mgr"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicToggle=null,e.effectToggle=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.loadCurAudioState()},e.prototype.loadCurAudioState=function(){var t=cc.audioEngine.getMusicVolume();this.musicToggle.isChecked=1==t;var e=cc.audioEngine.getEffectsVolume();this.effectToggle.isChecked=1==e},e.prototype.toggleChecked=function(t){if(a.default.Inst.play("escape_btn"),cc.log(t.target.name),"m"==t.target.name){var e=t.target.isChecked?1:0;cc.audioEngine.setMusicVolume(e),c.G.saveData("myGameMv",e)}else{var o=t.target.isChecked?1:0;cc.audioEngine.setEffectsVolume(o),c.G.saveData("myGameEv",o)}},e.prototype.onCloseClicked=function(){a.default.Inst.play("escape_btn"),this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},r([u(cc.Toggle)],e.prototype,"musicToggle",void 0),r([u(cc.Toggle)],e.prototype,"effectToggle",void 0),r([p],e)}(s.PopupBase);o.default=h,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0}],box_item:[function(t,e,o){"use strict";cc._RF.push(e,"f3382u95PJKnZKo5IumgJcK","box_item");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../core_lmn/core"),c=t("./escapeMgr"),a=t("../../scripts/Sound_Mgr"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockN=null,e.canGetLab=null,e.costCash=null,e.costCoins=null,e.unlockN=null,e.curGet=null,e.lastGet=null,e.lastDay=null,e.speed=null,e.expectGet=null,e.icon=null,e.iconSFList=[],e.lvLab=null,e.valueLab=null,e.curObj=null,e.openSucCall=null,e.curOpenCount=0,e}return i(e,t),e.prototype.start=function(){},e.prototype.setData=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=null),this.curObj=t,this.valueLab.getComponent(s.i18nLabel).init("escape_box_item2",[t.Income]),this.lvLab.string="LV"+t.lv,this.icon.spriteFrame=this.iconSFList[t.lv-1],this.openSucCall=o,0==e?this.showLockUI(t):this.showUnlockUI(t)},e.prototype.setCurOpenCount=function(t){this.curOpenCount=t},e.prototype.showLockUI=function(t){this.lockN.active=!0,this.canGetLab.getComponent(s.i18nLabel).init("escape_box_item3",[t.total.toString()]),this.costCash.string=t.cash.toString(),this.costCoins.string=t.coin.toString()},e.prototype.showUnlockUI=function(t){this.unlockN.active=!0;var e=(t.speed*t.openedDays).toFixed(2),o=t.total-Number(e),n=30-t.openedDays;this.curGet.getComponent(s.i18nLabel).init("escape_box_item6",[e.toString()]),this.lastGet.getComponent(s.i18nLabel).init("escape_box_item7",[o.toString()]),this.lastDay.getComponent(s.i18nLabel).init("escape_box_item8",[n.toString()]),this.speed.getComponent(s.i18nLabel).init("escape_box_item9",[t.speed.toString()]),this.expectGet.getComponent(s.i18nLabel).init("escape_box_item10",[t.total.toString()])},e.prototype.btnOpenClicked=function(){a.default.Inst.play("escape_btn"),this.curOpenCount>=5?c.default.inst.showWarning("escape_box_tip1"):c.default.inst.showBoxTip(this.curObj,this.openSucCall.bind(this))},r([u(cc.Node)],e.prototype,"lockN",void 0),r([u(cc.Node)],e.prototype,"canGetLab",void 0),r([u(cc.Label)],e.prototype,"costCash",void 0),r([u(cc.Label)],e.prototype,"costCoins",void 0),r([u(cc.Node)],e.prototype,"unlockN",void 0),r([u(cc.Node)],e.prototype,"curGet",void 0),r([u(cc.Node)],e.prototype,"lastGet",void 0),r([u(cc.Node)],e.prototype,"lastDay",void 0),r([u(cc.Node)],e.prototype,"speed",void 0),r([u(cc.Node)],e.prototype,"expectGet",void 0),r([u(cc.Sprite)],e.prototype,"icon",void 0),r([u(cc.SpriteFrame)],e.prototype,"iconSFList",void 0),r([u(cc.Label)],e.prototype,"lvLab",void 0),r([u(cc.Node)],e.prototype,"valueLab",void 0),r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/Sound_Mgr":void 0,"./escapeMgr":"escapeMgr"}],box_tip:[function(t,e,o){"use strict";cc._RF.push(e,"35ea94erWlHipqXybBZq2g9","box_tip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=t("../../scripts/G"),p=t("../../scripts/Sound_Mgr"),u=t("./escapeMgr"),h=cc._decorator,d=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.cash=null,e.coin=null,e.sureCall=null,e.curItem=null,e}return i(e,t),e.prototype.setData=function(t,e){this.title.getComponent(a.i18nLabel).init("escape_box_tip4",[t.lv.toString()]),this.cash.string=t.cash.toString(),this.coin.string=t.coin.toString(),this.sureCall=e,this.curItem=t},e.prototype.btnSureOpenClicked=function(){var t;return s(this,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return p.default.Inst.play("escape_btn"),[4,null===(t=l.G.clientHttp)||void 0===t?void 0:t.callApi("OpenSafeBox",{playerId:l.G.uid,LV:this.curItem.lv,charge:this.curItem.cash,gems:this.curItem.coin})];case 1:return(e=o.sent()).isSucc?1!=e.res.result?[3,3]:(this.sureCall&&this.sureCall(e.res),[4,this.hide()]):(cc.log(e.err.message),u.default.inst.showWarning("escape_box_tip3"),[2]);case 2:o.sent(),u.default.inst.showWarning("escape_box_tip2"),o.label=3;case 3:return[2]}})})},e.prototype.closeClicked=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return p.default.Inst.play("escape_btn"),[4,this.hide()];case 1:return t.sent(),[2]}})})},e.prototype.onAfterHide=function(){this.node.destroy()},r([f(cc.Node)],e.prototype,"title",void 0),r([f(cc.Label)],e.prototype,"cash",void 0),r([f(cc.Label)],e.prototype,"coin",void 0),r([d],e)}(a.PopupBase);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0,"./escapeMgr":"escapeMgr"}],box:[function(t,e,o){"use strict";cc._RF.push(e,"0f650XkUPJB75JlfCDLii/l","box");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=t("../../scripts/G"),p=t("../../scripts/Sound_Mgr"),u=t("./box_item"),h=t("./escapeMgr"),d=cc._decorator,f=d.ccclass,y=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MyBox=null,e.limitLab=null,e.coinLab=null,e.accGetLab=null,e.MyBoxContent=null,e.BoxList=null,e.cashLab=null,e.curCoinLab=null,e.BoxListContent=null,e.boxItem=null,e.ruleLayer=null,e.boxData=[{lv:1,cash:1,coin:100,speed:9.333,total:280,Income:"140%"},{lv:2,cash:10,coin:1e3,speed:88.667,total:2660,Income:"133%"},{lv:3,cash:50,coin:5e3,speed:426.667,total:12800,Income:"128%"},{lv:4,cash:250,coin:25e3,speed:2083.333,total:62500,Income:"125%"},{lv:5,cash:1250,coin:125e3,speed:10250,total:307500,Income:"123%"}],e.curOpenCount=0,e}return i(e,t),e.prototype.start=function(){this.loadMyBoxData(),this.loadBoxListData()},e.prototype.loadMyBoxData=function(){var t;return s(this,void 0,void 0,function(){var e,o,n,i,r,s;return c(this,function(c){switch(c.label){case 0:return this.MyBoxContent.removeAllChildren(),[4,null===(t=l.G.clientHttp)||void 0===t?void 0:t.callApi("OpenSafeBox",{playerId:l.G.uid})];case 1:if(!(e=c.sent()).isSucc)return[2];if(1==e.res.result)for(this.cashLab.string=e.res.charge.toString(),this.curCoinLab.string=e.res.gems.toString(),this.coinLab.string=e.res.gems.toString(),this.accGetLab.getComponent(a.i18nLabel).init("escape_box3",[e.res.totalreturn.toString()]),this.limitLab.getComponent(a.i18nLabel).init("escape_box2",[e.res.openboxes.length+"/5"]),this.curOpenCount=e.res.openboxes.length,o=0,n=e.res.openboxes.length;o<n;o++)i=e.res.openboxes[o],(r=Myfun.findItemFromArr(this.boxData,"lv",i.LV)).LV=i.LV,r.openedDays=i.openedDays,(s=cc.instantiate(this.boxItem)).parent=this.MyBoxContent,s.getComponent(u.default).setData(r,1);return[2]}})})},e.prototype.loadBoxListData=function(){for(var t=0,e=this.boxData.length;t<e;t++){var o=this.boxData[t],n=cc.instantiate(this.boxItem);n.parent=this.BoxListContent,n.getComponent(u.default).setData(o,0,this.openBoxSucCall.bind(this))}},e.prototype.openBoxSucCall=function(t){this.cashLab.string=t.charge.toString(),this.curCoinLab.string=t.gems.toString(),this.coinLab.string=t.gems.toString();for(var e=0;e<this.BoxListContent.childrenCount;e++)this.BoxListContent.children[e].getComponent(u.default).setCurOpenCount(t.openboxes.length)},e.prototype.btnRuleClicked=function(){p.default.Inst.play("escape_btn"),this.ruleLayer.active=!0},e.prototype.btnCloseRuleClicked=function(){p.default.Inst.play("escape_btn"),this.ruleLayer.active=!1},e.prototype.showCurBoxList=function(){this.BoxList.active=!1,this.MyBox.active=!0,this.loadMyBoxData()},e.prototype.showBoxList=function(){this.MyBox.active=!1,this.BoxList.active=!0},e.prototype.btnCloseBoxListClicked=function(){p.default.Inst.play("escape_btn"),this.MyBox.active?(h.default.inst._loadEscape(),this.node.destroy()):this.showCurBoxList()},e.prototype.btnOpenBoxClicked=function(){p.default.Inst.play("escape_btn"),this.curOpenCount>=5?h.default.inst.showWarning("escape_box_tip1"):this.showBoxList()},r([y(cc.Node)],e.prototype,"MyBox",void 0),r([y(cc.Node)],e.prototype,"limitLab",void 0),r([y(cc.Label)],e.prototype,"coinLab",void 0),r([y(cc.Node)],e.prototype,"accGetLab",void 0),r([y(cc.Node)],e.prototype,"MyBoxContent",void 0),r([y(cc.Node)],e.prototype,"BoxList",void 0),r([y(cc.Label)],e.prototype,"cashLab",void 0),r([y(cc.Label)],e.prototype,"curCoinLab",void 0),r([y(cc.Node)],e.prototype,"BoxListContent",void 0),r([y(cc.Prefab)],e.prototype,"boxItem",void 0),r([y(cc.Node)],e.prototype,"ruleLayer",void 0),r([f],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0,"./box_item":"box_item","./escapeMgr":"escapeMgr"}],editPlayerName:[function(t,e,o){"use strict";cc._RF.push(e,"1635diWhFZH36+enaLC7IRw","editPlayerName");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../core_lmn/core"),c=t("../../scripts/G"),a=t("../../scripts/Sound_Mgr"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editBox=null,e.placeholder="",e.cb=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.loadCurName()},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.loadCurName=function(){this.editBox.placeholder=c.G.uname},e.prototype.setCall=function(t){this.cb=t},e.prototype.btnCancelClicked=function(){a.default.Inst.play("escape_btn"),this.hide()},e.prototype.btnSureClicked=function(){a.default.Inst.play("escape_btn"),c.G.uname=this.editBox.string,this.cb&&this.cb(),this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},r([u(cc.EditBox)],e.prototype,"editBox",void 0),r([p],e)}(s.PopupBase);o.default=h,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0}],escapeMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a55dc8KIedAEKBqVBN1Fk+c","escapeMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.RoleType=void 0;var s,c=t("../../scripts/G"),a=t("../../scripts/GameConfig"),l=t("./escape_giftPack"),p=t("./escape_shop"),u=cc._decorator,h=u.ccclass,d=u.property;(function(t){t[t.otherRole=0]="otherRole",t[t.selfRole=1]="selfRole",t[t.killer=2]="killer"})(s=o.RoleType||(o.RoleType={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.pre_escape=null,e.pre_revenge=null,e.pre_box=null,e.warnTip=null,e.pre_boxTip=null,e.pre_setting=null,e.pre_dollarShop=null,e.pre_coinShop=null,e}var o;return i(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return this._ins},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){null!==o._ins?this.node.destroy():o._ins=this},e.prototype.onDisable=function(){o._ins=null},e.prototype.start=function(){this._loadEscape()},e.prototype._loadEscape=function(){this.content.removeAllChildren(),cc.instantiate(this.pre_escape).parent=this.content},e.prototype._loadRevenge=function(){this.content.removeAllChildren(),cc.instantiate(this.pre_revenge).parent=this.content},e.prototype._loadBox=function(){this.content.removeAllChildren(),cc.instantiate(this.pre_box).parent=this.content},e.prototype._loadSetting=function(){this.content.removeAllChildren(),cc.instantiate(this.pre_setting).parent=this.content},e.prototype.getRandomPos=function(t,e,o,n){void 0===n&&(n=s.otherRole);var i,r,c=e.getChildByName(o).getBoundingBoxToWorld();i=Math.random()*(c.width-t.width)+c.x,r=Math.random()*(c.height-t.height)/2+c.y,n==s.selfRole&&(i=Math.random()*(c.width-t.width)/2+c.x,r=Math.random()*(c.height-t.height)/4+c.y);var a=t.parent.convertToNodeSpaceAR(cc.v2(i,r));return cc.v3(a,0)},e.prototype.showWarning=function(t){var e=cc.instantiate(this.warnTip);e.parent=this.content,e.getComponent("escape_tip").showTip(t)},e.prototype.showBoxTip=function(t,e){var o=cc.instantiate(this.pre_boxTip);o.parent=this.content,o.getComponent("box_tip").setData(t,e)},e.prototype.showLogin=function(){c.G.eventMsg.emit(MI.MSG.show_Layer,a.GameUILayers.LOGIN,a.GameUILayerNames)},e.prototype.showCoinShop=function(t){var e=cc.instantiate(this.pre_coinShop);e.parent=this.content,e.getComponent(p.default).setData(t)},e.prototype.showDollarShop=function(t){var e=cc.instantiate(this.pre_dollarShop);e.parent=this.content,e.getComponent(l.default).setData(t)},e._ins=null,r([d(cc.Node)],e.prototype,"content",void 0),r([d(cc.Prefab)],e.prototype,"pre_escape",void 0),r([d(cc.Prefab)],e.prototype,"pre_revenge",void 0),r([d(cc.Prefab)],e.prototype,"pre_box",void 0),r([d(cc.Prefab)],e.prototype,"warnTip",void 0),r([d(cc.Prefab)],e.prototype,"pre_boxTip",void 0),r([d(cc.Prefab)],e.prototype,"pre_setting",void 0),r([d(cc.Prefab)],e.prototype,"pre_dollarShop",void 0),r([d(cc.Prefab)],e.prototype,"pre_coinShop",void 0),o=r([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../scripts/G":void 0,"../../scripts/GameConfig":void 0,"./escape_giftPack":"escape_giftPack","./escape_shop":"escape_shop"}],escape_getItem:[function(t,e,o){"use strict";cc._RF.push(e,"48e2e89CwlLco5aRnSgbDL7","escape_getItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.item=null,e}return i(e,t),e.prototype.setData=function(t,e){if(e){t/=2;for(var o=0;o<2;o++)this.generateItem(t)}else this.generateItem(t)},e.prototype.generateItem=function(t){var e=cc.instantiate(this.item);e.active=!0,e.getComponentInChildren(a.i18nLabel).init("static_escape_hint4",[t]),e.parent=this.layout},e.prototype.btnSureClicked=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),this.node.destroy(),[2]}})})},r([u(cc.Node)],e.prototype,"layout",void 0),r([u(cc.Node)],e.prototype,"item",void 0),r([p],e)}(a.PopupBase);o.default=h,cc._RF.pop()},{"../../core_lmn/core":void 0}],escape_giftPack:[function(t,e,o){"use strict";cc._RF.push(e,"2ff7a00P89I1axY88RuwnhS","escape_giftPack");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.getItem=null,e.giftList=[{num:30,price:30},{num:68,price:68},{num:128,price:128},{num:198,price:198},{num:328,price:328},{num:648,price:648}],e.callFun=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.loadShopItems()},e.prototype.setData=function(t){this.callFun=t},e.prototype.loadShopItems=function(){for(var t=0,e=this.layout.childrenCount;t<e;t++){var o=this.layout.children[t],n=this.giftList[t];o.children[2].getComponent(a.i18nLabel).init("static_escape_shop3",[n.num.toString()]),o.children[3].getComponent(cc.Label).string="$"+n.price,o.on("click",function(){})}},e.prototype.btnCloseClicked=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),[2]}})})},e.prototype.onAfterHide=function(){this.node.destroy()},r([u(cc.Node)],e.prototype,"layout",void 0),r([u(cc.Prefab)],e.prototype,"getItem",void 0),r([p],e)}(a.PopupBase);o.default=h,cc._RF.pop()},{"../../core_lmn/core":void 0}],escape_hint:[function(t,e,o){"use strict";cc._RF.push(e,"ede09a1sE1OYa0vpWKWB8i1","escape_hint");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=t("../../scripts/G"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cashLab=null,e.coinLab=null,e.curCoinLab=null,e.sureCall=null,e.canCall=null,e}return i(e,t),e.prototype.setContent=function(t,e,o,n){this.cashLab.string=t.toString(),this.coinLab.string=e.toString(),this.curCoinLab.string=Myfun.transferNumToK(l.G.player.accountCoinInfo.escape_gold),this.sureCall=o,this.canCall=n},e.prototype.btnCancelClicked=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),this.canCall&&this.canCall(),[2]}})})},e.prototype.btnSureClicked=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),this.sureCall&&this.sureCall(),[2]}})})},e.prototype.onAfterHide=function(){this.node.destroy()},r([h(cc.Label)],e.prototype,"cashLab",void 0),r([h(cc.Label)],e.prototype,"coinLab",void 0),r([h(cc.Label)],e.prototype,"curCoinLab",void 0),r([u],e)}(a.PopupBase);o.default=d,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0}],escape_login:[function(t,e,o){"use strict";cc._RF.push(e,"dfe9awA8+JHCIy0uRf/Yek1","escape_login");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a,l=t("../../core_lmn/core"),p=t("../../scripts/G"),u=cc._decorator,h=u.ccclass,d=u.property;(function(t){t[t.PWD=0]="PWD",t[t.CODE=1]="CODE"})(a||(a={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.input_phone=null,e.input_pwd=null,e.input_code=null,e.getCodeLab=null,e.getCode=null,e.agreeToggle=null,e.btnLab=null,e.placeholder="",e.curType=a.CODE,e.callFun=null,e.throttleRegister=null,e.timeCountFun=null,e.curCode="",e.curObjid="",e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.closeClicked=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),this.node.destroy(),[2]}})})},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.onToggleContainerCheck=function(t){if(t.isChecked){var e=t.node.name;"toggle2"==e?(this.curType=a.PWD,this.input_pwd.node.parent.active=!0,this.input_code.node.parent.active=!1,this.btnLab.getComponent(l.i18nLabel).init("static_escape_login11",[])):"toggle1"==e&&(this.curType=a.CODE,this.input_pwd.node.parent.active=!1,this.input_code.node.parent.active=!0,this.btnLab.getComponent(l.i18nLabel).init("static_escape_login10",[]))}},e.prototype.checkInput=function(){if(0!=this.input_phone.string.length)if(this.curType!=a.CODE||p.G.validator.isMobilePhone(this.input_phone.string,"any"))if(this.curType!=a.PWD||""!=this.input_pwd.string)if(this.curType!=a.CODE||""!=this.input_code.string)if(this.curType!=a.CODE||""!=this.curCode&&this.input_code.string===this.curCode){if(this.agreeToggle.isChecked)return!0;p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip7")}else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip6");else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip5");else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip2");else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip4");else p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip3")},e.prototype.getInput=function(){return{source:1,phoneNumber:this.input_phone.string,pwd:this.input_pwd.string}},e.prototype.setLoginCall=function(t){this.callFun=t},e.prototype.btnLoginClicked=function(){return s(this,void 0,void 0,function(){var t,e=this;return c(this,function(){return this.checkInput()&&(t=function(){return s(e,void 0,void 0,function(){var t,e,o;return c(this,function(n){switch(n.label){case 0:return this.curType!=a.PWD?[3,2]:[4,p.G.clientHttp.callApi("LoginGame",this.getInput())];case 1:return(t=n.sent()).isSucc?(1==t.res.result&&(p.G.uid=t.res._id,cc.director.emit("playerLogin"),this.node.destroy()),[3,4]):(p.G.eventMsg.emit(MI.MSG.tip,null===(e=t.err)||void 0===e?void 0:e.message),[2]);case 2:return[4,p.G.clientHttp.callApi("RegisterAccount",{objid:this.curObjid,source:1,phoneNumber:this.input_phone.string})];case 3:if(!(t=n.sent()).isSucc)return p.G.eventMsg.emit(MI.MSG.tip,null===(o=t.err)||void 0===o?void 0:o.message),[2];1==t.res.result&&(p.G.uid=t.res._id,cc.director.emit("playerLogin"),this.node.destroy()),n.label=4;case 4:return[2]}})})},null==this.throttleRegister?(this.throttleRegister=Myfun.throttle(t,1500),this.throttleRegister()):this.throttleRegister()),[2]})})},e.prototype.timeEndCall=function(){this.unschedule(this.timeCountFun),this.getCode.active=!0,this.getCodeLab.fontSize=26,this.getCodeLab.string="Get verification code"},e.prototype.showTime=function(t){var e=this;this.getCodeLab.fontSize=30,this.getCodeLab.string=t+"s",t--,this.schedule(this.timeCountFun=function(){t>0?(e.getCodeLab.string=t+"s",t--):e.timeEndCall()},1)},e.prototype.btnGetCodeClicked=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return p.G.validator.isMobilePhone(this.input_phone.string,"any")?(this.getCode.active=!1,this.showTime(90),[4,p.G.getPhoneCode(this.input_phone.string)]):(p.G.eventMsg.emit(MI.MSG.tip,"static_login_tip4"),[2]);case 1:return null!==(t=e.sent())&&1===(null==t?void 0:t.result)&&(this.curCode=t.statecode,this.curObjid=t.objid),[2]}})})},r([d(cc.EditBox)],e.prototype,"input_phone",void 0),r([d(cc.EditBox)],e.prototype,"input_pwd",void 0),r([d(cc.EditBox)],e.prototype,"input_code",void 0),r([d(cc.Label)],e.prototype,"getCodeLab",void 0),r([d(cc.Node)],e.prototype,"getCode",void 0),r([d(cc.Toggle)],e.prototype,"agreeToggle",void 0),r([d(cc.Node)],e.prototype,"btnLab",void 0),r([h],e)}(l.PopupBase);o.default=f,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0}],escape_pop:[function(t,e,o){"use strict";cc._RF.push(e,"8affcyccChG3KchLklZN+Y3","escape_pop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../core_lmn/core"),c=t("../../scripts/Sound_Mgr"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskN=null,e.killerTip=null,e.suc1=null,e.suc2=null,e.fail1=null,e.fail1Tip=null,e.fail2=null,e.iconList=[],e}return i(e,t),e.prototype.start=function(){},e.prototype.showKillerTip=function(){this.maskN.color=Myfun.hexToRGBA("#d30001"),this.maskN.opacity=153,this.waitToDestroy(2),this.killerTip.active=!0,cc.tween(this.killerTip).blink(2,8).start()},e.prototype.waitToDestroy=function(t){var e=this;this.scheduleOnce(function(){e.node.destroy()},t)},e.prototype.showSuc1=function(t){this.waitToDestroy(3.5),this.suc1.active=!0,this.suc1.getChildByName("diamond").getComponent(cc.Label).string=t+""},e.prototype.showSuc2=function(t,e){this.waitToDestroy(3.5),this.suc2.active=!0,c.default.Inst.play("escape_reward"),this.suc2.getChildByName("cost").getComponent(cc.Label).string=t.toString(),this.suc2.getChildByName("get").getComponent(cc.Label).string=e.toString()},e.prototype.showFail1=function(t,e,o){this.waitToDestroy(3.5),this.fail1.active=!0,this.fail1Tip.getComponent(s.i18nLabel).init(t,[]),this.fail1.getChildByName("coin").getComponent(cc.Label).string=e.toString(),this.fail1.getChildByName("dagger").getComponent(cc.Label).string=o.toString()},e.prototype.showFail2=function(t){this.waitToDestroy(3.5),this.fail2.active=!0,this.fail2.getChildByName("dagger").getComponent(cc.Label).string=t.toString()},r([p(cc.Node)],e.prototype,"maskN",void 0),r([p(cc.Node)],e.prototype,"killerTip",void 0),r([p(cc.Node)],e.prototype,"suc1",void 0),r([p(cc.Node)],e.prototype,"suc2",void 0),r([p(cc.Node)],e.prototype,"fail1",void 0),r([p(cc.Node)],e.prototype,"fail1Tip",void 0),r([p(cc.Node)],e.prototype,"fail2",void 0),r([p(cc.SpriteFrame)],e.prototype,"iconList",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/Sound_Mgr":void 0}],escape_rank:[function(t,e,o){"use strict";cc._RF.push(e,"522f06Lx8VK7I2r46is31ce","escape_rank");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankList=null,e.item=null,e.playerIcon=null,e.playerPos=null,e.getV=null,e}return i(e,t),e.prototype.start=function(){this.loadRankData()},e.prototype.loadRankData=function(){this.loadCurWeekRankList()},e.prototype.loadPlayerInfo=function(){},e.prototype.toggleContainer=function(t){if(t.isChecked){var e=t.node.name;cc.log(e),"toggle1"==e?this.loadCurWeekRankList():this.loadLastWeekRankList()}},e.prototype.clearList=function(){for(;this.rankList.childrenCount>2;)this.rankList.children[2].destroy()},e.prototype.loadLastWeekRankList=function(){this.clearList();var t=[];this.loadPlayerInfo();for(var e=0;e<t.length;e++)cc.instantiate(this.item).parent=this.rankList},e.prototype.loadCurWeekRankList=function(){this.clearList();var t=[];this.loadPlayerInfo();for(var e=0;e<t.length;e++)cc.instantiate(this.item).parent=this.rankList},r([a(cc.Node)],e.prototype,"rankList",void 0),r([a(cc.Node)],e.prototype,"item",void 0),r([a(cc.Sprite)],e.prototype,"playerIcon",void 0),r([a(cc.Label)],e.prototype,"playerPos",void 0),r([a(cc.Label)],e.prototype,"getV",void 0),r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],escape_record:[function(t,e,o){"use strict";cc._RF.push(e,"47f5cn6tbRB9qzFsS1/pgGP","escape_record");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../scripts/G"),l=t("./item_record"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.content=null,e.killer_100_record=null,e.killer_10_record=null,e.itemKiller=null,e.playerAccCost=null,e.playerAccGet=null,e.list=null,e.item=null,e.iconList=[],e}return i(e,t),e.prototype.start=function(){this.loadEscapeRecord()},e.prototype.loadEscapeRecord=function(){var t;return s(this,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return[4,null===(t=a.G.clientWs)||void 0===t?void 0:t.callApi("GetKillerRecords",{playerId:a.G.uid})];case 1:return(e=o.sent()).isSucc?(1==e.res.result&&(cc.log(e.res),this.loadKiller_100_records(e.res.hundredlist),this.loadKiller_10_records(e.res.killerTenlist),this.playerAccCost.string=e.res.totalInvest.toString(),this.playerAccGet.string=e.res.totalreturns.toString(),this.loadPlayerRecord(e.res.myArray)),[2]):(cc.log(e.err),[2])}})})},e.prototype.loadKiller_100_records=function(t){for(var e=this.killer_100_record.children[1],o=0,n=t.length;o<n;o++){var i=t[o],r=e.getChildByName(i.roomid+"");r&&(r.children[1].getComponent(cc.Label).string=i.times+"")}},e.prototype.loadKiller_10_records=function(t){for(var e=this.killer_10_record.children[1],o=0,n=(t=Myfun.sortByObjectValue(t,"periods")).length;o<n;o++){var i=t[o],r=cc.instantiate(this.itemKiller);r.active=!0,r.parent=e,r.getComponent(cc.Sprite).spriteFrame=this.iconList[i.roomid],r.getChildByName("period").getComponent(cc.Label).string=i.periods.toString()}},e.prototype.loadPlayerRecord=function(t){for(var e=this,o=0,n=t.length;o<n;o++){var i=cc.instantiate(this.item);i.active=!0,i.getComponent(l.default).setData(t[o]),i.parent=this.list}this.scheduleOnce(function(){e.improveDC()},.1)},e.prototype.improveDC=function(){if(0!=this.content.childrenCount){var t=this.scrollView.parent.convertToWorldSpaceAR(cc.v2(this.scrollView.x-this.scrollView.anchorX*this.scrollView.width,this.scrollView.y-this.scrollView.anchorY*this.scrollView.height)),e=cc.rect(t.x,t.y,this.scrollView.width,this.scrollView.height);this.content.children.forEach(function(t){t.children.forEach(function(t){t.getBoundingBoxToWorld().intersects(e)?0===t.opacity&&(t.opacity=255):0!==t.opacity&&(t.opacity=0)})})}},r([h(cc.Node)],e.prototype,"scrollView",void 0),r([h(cc.Node)],e.prototype,"content",void 0),r([h(cc.Node)],e.prototype,"killer_100_record",void 0),r([h(cc.Node)],e.prototype,"killer_10_record",void 0),r([h(cc.Node)],e.prototype,"itemKiller",void 0),r([h(cc.Label)],e.prototype,"playerAccCost",void 0),r([h(cc.Label)],e.prototype,"playerAccGet",void 0),r([h(cc.Node)],e.prototype,"list",void 0),r([h(cc.Prefab)],e.prototype,"item",void 0),r([h(cc.SpriteFrame)],e.prototype,"iconList",void 0),r([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../scripts/G":void 0,"./item_record":"item_record"}],escape_role:[function(t,e,o){"use strict";cc._RF.push(e,"8cda48gz1hFXo6K5hmKPgv9","escape_role");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ske=null,e.roleSkin=["cheng","huang","lan","lv","shenlv","zi"],e._role=null,e.nameN=null,e}return i(e,t),e.prototype.onEnable=function(){this.node.scale=0,cc.tween(this.node).to(.2,{scale:1}).start(),this.setSkin(Myfun.getRandomItemFromArr(this.roleSkin))},e.prototype.playTransferAni=function(){var t=this;this.node.children[0].active=!0,this.node.children[1].active=!1,this.node.children[0].getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.scheduleOnce(function(){t.node.children[0].active=!1,t.node.children[1].active=!0},.3)},e.prototype.playAni=function(t,e){void 0===e&&(e=!1),this.ske.setAnimation(0,t,e)},e.prototype.beKilledAni=function(){this.playAni("daoxia2")},e.prototype.leave=function(){this.nameN.destroy()},e.prototype.setData=function(t,e){this._role=t,e&&(this.nameN=e)},e.prototype.setSkin=function(t){this.ske.setSkin(t)},e.prototype.getTarget=function(){return this._role.roomid},e.prototype.setTarget=function(t){this._role.roomid=t},e.prototype.getRoleId=function(){return this._role._id},r([a(sp.Skeleton)],e.prototype,"ske",void 0),r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],escape_shop:[function(t,e,o){"use strict";cc._RF.push(e,"7e1b7+PjddAGp1ZM98vTvxS","escape_shop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../core_lmn/core"),l=t("../../scripts/G"),p=t("./escape_getItem"),u=t("./escape_hint"),h=cc._decorator,d=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.getItem=null,e.hintPre=null,e.shopList=[{num:3e3,price:30,isFirst:!0},{num:6800,price:68,isFirst:!0},{num:12800,price:128,isFirst:!0},{num:19800,price:198,isFirst:!0},{num:32800,price:328,isFirst:!0},{num:64800,price:648,isFirst:!0}],e.callFun=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.loadShopItems()},e.prototype.setData=function(t){this.callFun=t},e.prototype.loadShopItems=function(){for(var t=this,e=function(e){var n=o.layout.children[e],i=o.shopList[e];n.children[2].active=i.isFirst,n.children[2].getComponentInChildren(a.i18nLabel).init("static_escape_shop2",[i.num.toString()]),n.children[3].getComponent(a.i18nLabel).init("static_escape_shop1",[i.num.toString()]),n.children[4].getComponent(cc.Label).string="$"+i.price;var r=i.isFirst?2*i.num:i.num;n.off("click"),n.on("click",function(){l.G.player.accountCoinInfo.cash<i.price?cc.log("\u8d26\u6237\u73b0\u91d1\u4e0d\u8db3"):t.showHint(e,i.price,r,i.isFirst)})},o=this,n=0,i=this.layout.childrenCount;n<i;n++)e(n)},e.prototype.showHint=function(t,e,o,n){var i=this,r=cc.instantiate(this.hintPre);r.parent=this.node.parent,r.getComponent(u.default).setContent(e,o,function(){i.callFun&&i.callFun(o),l.G.player.accountCoinInfo.cash-=e,i.shopList[t].isFirst=!1,i.loadShopItems();var r=cc.instantiate(i.getItem);r.getComponent(p.default).setData(o,n),r.parent=i.node.parent})},e.prototype.btnCloseClicked=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.hide()];case 1:return t.sent(),[2]}})})},e.prototype.onAfterHide=function(){this.node.destroy()},r([f(cc.Node)],e.prototype,"layout",void 0),r([f(cc.Prefab)],e.prototype,"getItem",void 0),r([f(cc.Prefab)],e.prototype,"hintPre",void 0),r([d],e)}(a.PopupBase);o.default=y,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"./escape_getItem":"escape_getItem","./escape_hint":"escape_hint"}],escape_tip:[function(t,e,o){"use strict";cc._RF.push(e,"398aawnuHNCmLnhwDL5M1en","escape_tip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../core_lmn/core"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipLab=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.showTip=function(t){var e=this;this.tipLab.getComponent(s.i18nLabel).init(t,[]),this.scheduleOnce(function(){e.node.destroy()},1.2)},r([l(cc.Node)],e.prototype,"tipLab",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../core_lmn/core":void 0}],escape:[function(t,e,o){"use strict";cc._RF.push(e,"364bfcoF/5Pp56POgp6gEoT","escape");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a,l,p=t("../../scripts/G"),u=t("../../scripts/Sound_Mgr"),h=t("./AStar"),d=t("./escape_pop"),f=t("./escape_role"),y=t("./follow"),_=t("./escapeMgr"),g=cc._decorator,v=g.ccclass,b=g.property;(function(t){t[t.otherRole=0]="otherRole",t[t.selfRole=1]="selfRole",t[t.killer=2]="killer"})(a||(a={})),function(t){t[t.MAIN=0]="MAIN",t[t.RECORD=1]="RECORD",t[t.RANK=2]="RANK",t[t.RULE=3]="RULE"}(l||(l={}));var m=new Map([["end1",{ani:"door1",index:1,i18n:"escape_room1"}],["end2",{ani:"door2",index:2,i18n:"escape_room2"}],["end3",{ani:"door3",index:3,i18n:"escape_room3"}],["end4",{ani:"door4",index:4,i18n:"escape_room4"}],["end5",{ani:"door5",index:5,i18n:"escape_room5"}],["end6",{ani:"door6",index:6,i18n:"escape_room6"}],["end7",{ani:"door7",index:7,i18n:"escape_room7"}],["end8",{ani:"door8",index:8,i18n:"escape_room8"}]]),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainLayer=null,e.content=null,e.gemLab=null,e.Map=null,e.mapLayer=null,e.roomLayer=null,e.betRoomLayer=null,e.rolePre=null,e.killerN=null,e.roleName=null,e.doorLayer=null,e.time=null,e.btn_back=null,e.periodsLab=null,e.gameCoin=null,e.recordPre=null,e.rankPre=null,e.popPre=null,e.rulePre=null,e.content2=null,e.layer_road=null,e.object_initPos=null,e.object_doorFront=null,e.start_point_player=null,e.start_point_killer=null,e.map_point=new Map,e.size=null,e.player_node=null,e.player_point=new h.Point(0,0),e.isMoving=!1,e.isInRoom=!1,e.isKillerShow=!1,e.killerEnterRoom=0,e.waitingList=[],e.roomList=[],e.endTarget=["end1","end2","end3","end4","end5","end6","end7","end8"],e.rolePool=null,e.poolSize=60,e.curPeriod=0,e.round_RoomInvest=0,e.round_invest=0,e.round_get=0,e.round_daggers=0,e.initKillerPos=null,e.moveSpeed=.1,e.reselectCount=1,e.lastSelectRoom="",e.isBacking=!1,e.betNumList=[100,1e3,1e4],e.accBet=0,e.curLayer=l.MAIN,e}return i(e,t),e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){var t=this;return c(this,function(){return this.rolePool=new cc.NodePool,this.initPlayerPool(),this.readMap(),u.default.Inst.playMusic("escape_bgm"),window.addEventListener("beforeunload",function(){t.MSG_playerLeave()}),cc.game.on(cc.game.EVENT_HIDE,this._onEventHide,this),cc.game.on(cc.game.EVENT_SHOW,this._onEventShow,this),cc.director.on("playerLogin",function(){t.playerLogined()}),this.playerLogined(),[2]})})},e.prototype._onEventHide=function(){return s(this,void 0,void 0,function(){return c(this,function(){return cc.log("hide.............."),cc.Tween.stopAll(),this.initKillState(),this.cancelListenMsg(),this.unscheduleAllCallbacks(),p.G.isLogin&&(this.MSG_playerLeave(),this.collectRole(this.player_node)),[2]})})},e.prototype._onEventShow=function(){cc.log("show.............."),p.G.isLogin&&this.playerLogined()},e.prototype.onDisable=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return cc.director.off("playerLogin"),cc.game.off(cc.game.EVENT_HIDE,this._onEventHide,this),cc.game.off(cc.game.EVENT_SHOW,this._onEventShow,this),cc.Tween.stopAll(),this.cancelListenMsg(),this.unscheduleAllCallbacks(),[4,this.MSG_playerLeave()];case 1:return t.sent(),[2]}})})},e.prototype.playerLogined=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return""===p.G.uid?[3,6]:null!=p.G.clientWs?[3,2]:[4,p.G.initWsClient()];case 1:return t.sent(),[3,4];case 2:return p.G.clientWs.isConnected?[3,4]:[4,p.G.clientWs.connect()];case 3:t.sent(),t.label=4;case 4:return[4,this.MSG_PlayerEnter()];case 5:return t.sent(),[3,7];case 6:this.showLogin(),t.label=7;case 7:return[2]}})})},e.prototype.reqWsPort=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,p.G.clientHttp.callApi("Getprocessid",{playerId:p.G.uid})];case 1:return(t=e.sent()).isSucc?[2,t.res.worldServerUrl]:(cc.log(t.err.message),[2])}})})},e.prototype.cancelListenMsg=function(){var t,e,o;null===(t=p.G.clientWs)||void 0===t||t.unlistenMsgAll("Escape"),null===(e=p.G.clientWs)||void 0===e||e.unlistenMsgAll("Escapetime"),null===(o=p.G.clientWs)||void 0===o||o.unlistenMsgAll("Roominvest")},e.prototype.listenMsg=function(){var t,e,o;return s(this,void 0,void 0,function(){var n=this;return c(this,function(){return null===(t=p.G.clientWs)||void 0===t||t.listenMsg("Escape",function(t){return s(n,void 0,void 0,function(){var e,o,n;return c(this,function(i){switch(i.label){case 0:e=0,o=t.waitlist.length,i.label=1;case 1:return e<o?(n=t.waitlist[e]._id,this.isKillerShow||this.moveRole(n),[4,this.wait(.2*(e+1))]):[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}),null===(e=p.G.clientWs)||void 0===e||e.listenMsg("Escapetime",function(t){return s(n,void 0,void 0,function(){return c(this,function(){return this.showTimeCount(t.countdown),void 0!==t.killroomid&&(this.killerEnterRoom=t.killroomid),0==t.countdown&&this.showKiller(),void 0!==t.periods&&(this.curPeriod=t.periods,this.periodsLab.string="Issue "+(t.periods+1),this.MSG_RoundResult()),void 0!==t.killRoomGems&&this.getRoomBetInfo(this.killerEnterRoom,t.killRoomGems),[2]})})}),null===(o=p.G.clientWs)||void 0===o||o.listenMsg("Roominvest",function(t){return s(n,void 0,void 0,function(){return c(this,function(){return this.getRoomBetInfo(t.roomid,t.invest),[2]})})}),[2]})})},e.prototype.clearAllRoom=function(){var t=this;this.roomList.forEach(function(e){e.setPosition(_.default.inst.getRandomPos(e,t.Map.node,"waiting")),t.waitingList.push(e)}),this.roomList=[]},e.prototype.showTimeCount=function(t){var e;60==t&&(this.clearAllRoom(),this.MSG_RoundEnd(),this.clearRoomBetNum(),this.clearSelectedRoom(this.lastSelectRoom),this.hideRoundResult(),p.G.isLogin&&(null===(e=this.player_node)||void 0===e||e.setPosition(_.default.inst.getRandomPos(this.player_node,this.Map.node,"waiting"))),this.setDoorState(1),this.initRound()),t>1&&(this.isKillerShow=!1),this.time.parent.active=!0,this.time.getComponent(cc.Label).string=""+t,t<=10&&t>0&&u.default.Inst.play("time"),1==t&&(this.isKillerShow=!0),0==t&&(this.time.parent.active=!1)},e.prototype.initKillState=function(){this.isKillerShow&&(cc.Tween.stopAllByTarget(this.killerN),this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0),this.killerN.setPosition(this.initKillerPos),this.isKillerShow=!1)},e.prototype.setDoorState=function(t){void 0===t&&(t=0);var e=0==t?"Close the door 2":"Open the door 2";this.doorLayer.children.forEach(function(t){t.getComponent(sp.Skeleton).setAnimation(0,e,!0)})},e.prototype.MSG_playerLeave=function(){var t;return s(this,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return""==p.G.uid?[2]:[4,null===(t=p.G.clientWs)||void 0===t?void 0:t.callApi("ExitEscape",{playerId:p.G.uid})];case 1:return(e=o.sent()).isSucc?(1==e.res.result&&cc.log("leave success"),[2]):(cc.log(e.err),[2])}})})},e.prototype.MSG_PlayerEnter=function(){var t,e;return s(this,void 0,void 0,function(){var o;return c(this,function(n){switch(n.label){case 0:return[4,null===(t=p.G.clientWs)||void 0===t?void 0:t.callApi("JoinEscape",{playerId:p.G.uid})];case 1:return(o=n.sent()).isSucc?1!=o.res.result?[3,3]:(p.G.isLogin=!0,this.cancelListenMsg(),this.listenMsg(),p.G.player.accountCoinInfo.escape_gold=o.res.gems,this.loadAccountInfo(),void 0!==o.res.globalCountdown&&0==o.res.globalCountdown&&(this.time.parent.active=!1,this.isKillerShow=!0),this.initRoomBetInfo(o.res),this.setDoorState(o.res.globalCountdown),[4,this.initGameState()]):(p.G.eventMsg.emit(MI.MSG.tip,null===(e=o.err)||void 0===e?void 0:e.message),[2]);case 2:n.sent(),this.periodsLab.string="Issue "+o.res.period,this.initEscapeRoomState(o.res.robotlist),this.generateRole(a.selfRole),void 0!==o.res.roomid&&(this.isInRoom=!0,this.accBet=o.res.invest,this.showMyBet(this.endTarget[o.res.roomid-1],o.res.invest),this.lastSelectRoom=this.endTarget[o.res.roomid-1],this.player_node.getComponent(f.default).playAni("daiji",!0),this.player_node.setPosition(_.default.inst.getRandomPos(this.player_node,this.roomLayer,this.endTarget[o.res.roomid-1]))),n.label=3;case 3:return[2]}})})},e.prototype.initRoomBetInfo=function(t){for(var e=1;e<=8;e++){var o=t["roomid"+e];void 0!==o&&this.getRoomBetInfo(e,o)}},e.prototype.initGameState=function(){return s(this,void 0,void 0,function(){var t=this;return c(this,function(e){switch(e.label){case 0:return this.waitingList.forEach(function(e){e.getComponent(f.default).leave(),t.collectRole(e)}),this.roomList.forEach(function(e){e.getComponent(f.default).leave(),t.collectRole(e)}),this.hideRoundResult(),null!==this.player_node&&this.collectRole(this.player_node),this.waitingList=[],this.roomList=[],this.clearSelectedRoom(),this.lastSelectRoom="",this.accBet=0,this.isInRoom=!1,this.isMoving=!1,this.isBacking=!1,[4,this.wait(.1)];case 1:return e.sent(),[2]}})})},e.prototype.MSG_PlayerSelectOrBet=function(t,e,o,n){var i;return void 0===e&&(e="1"),void 0===o&&(o=0),void 0===n&&(n=""),s(this,void 0,void 0,function(){var r,s;return c(this,function(c){switch(c.label){case 0:return r={playerId:p.G.uid,type:e,roomid:m.get(t).index,invest:o},o>0&&""!==n&&(r={playerId:p.G.uid,type:e,oldroomid:m.get(n).index,roomid:m.get(t).index,invest:o}),[4,null===(i=p.G.clientWs)||void 0===i?void 0:i.callApi("SelectInvest",r)];case 1:return(s=c.sent()).isSucc?[2]:(cc.log(s.err),[2])}})})},e.prototype.MSG_RoundResult=function(){var t;return s(this,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return[4,null===(t=p.G.clientWs)||void 0===t?void 0:t.callApi("GetEscapeResult",{playerId:p.G.uid,periods:this.curPeriod})];case 1:return(e=o.sent()).isSucc?(1==e.res.result&&(p.G.player.accountCoinInfo.escape_gold=e.res.gems,this.loadAccountInfo(),this.round_RoomInvest=e.res.killroominvest,this.round_get=e.res.returns,this.round_invest=e.res.invest,this.round_daggers=e.res.daggers),[2]):(cc.log(e.err),[2])}})})},e.prototype.MSG_RoundEnd=function(){var t;return s(this,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return[4,null===(t=p.G.clientWs)||void 0===t?void 0:t.callApi("PerEndEscape",{playerId:p.G.uid})];case 1:return(e=o.sent()).isSucc?(1==e.res.result&&this.refreshEscapeRoomState(e.res.robotlist),[2]):(cc.log(e.err),[2])}})})},e.prototype.refreshEscapeRoomState=function(t){return s(this,void 0,void 0,function(){var e,o,n,i,r;return c(this,function(){for(e=0,o=t.length;e<o;e++)1==(n=t[e]).online?-1==(i=this.getRole(n._id,this.waitingList))?(r=this.generateRole(a.otherRole,n),this.setRoleRandomPos(r),this.waitingList.push(r)):(r=this.waitingList[i]).getComponent(f.default).setData(n):(i=this.getRole(n._id,this.waitingList))>=0&&((r=this.waitingList[i]).getComponent(f.default).leave(),this.waitingList.splice(i,1),this.collectRole(r));return[2]})})},e.prototype.initEscapeRoomState=function(t){for(var e=0,o=t.length;e<o;e++){var n=t[e];if(1==n.online){var i=this.generateRole(a.otherRole,n);this.setRoleRandomPos(i,n.wait),i.getComponent(f.default).playAni("daiji",!0),1==n.wait?this.waitingList.push(i):this.roomList.push(i)}else{var r=this.getRole(n._id,this.waitingList);r>=0&&((i=this.waitingList[r]).getComponent(f.default).leave(),this.waitingList.splice(r,1),this.collectRole(i))}}},e.prototype.initPlayerPool=function(){for(var t=0;t<this.poolSize;++t){var e=cc.instantiate(this.rolePre);this.rolePool.put(e)}},e.prototype.loadAccountInfo=function(){this.gemLab.string=Myfun.transferNumToK(p.G.player.accountCoinInfo.cash),this.gameCoin.string=Myfun.transferNumToK(p.G.player.accountCoinInfo.escape_gold)},e.prototype.readMap=function(){this.layer_road=this.Map.getLayer("floor").getComponent(cc.TiledLayer);var t=this.Map.getLayer("wall").getComponent(cc.TiledLayer);this.object_initPos=this.Map.getObjectGroup("initPos"),this.object_doorFront=this.Map.getObjectGroup("doorFront"),this.size=this.Map.getMapSize(),this.start_point_player=this.getPoint(this.object_initPos,"start_player"),this.start_point_killer=this.getPoint(this.object_initPos,"start_killer"),this.initKillerPos=this.killerN.getPosition();for(var e=0;e<this.size.width;e++)for(var o=0;o<this.size.height;o++){var n=this.layer_road.getTiledTileAt(e,o,!0),i=t.getTiledTileAt(e,o,!0);if(0!==n.gid&&0===i.gid){var r=new h.Point(e,o);this.map_point.set(e+o*this.size.width,r)}}},e.prototype.getTilePos=function(t,e){var o=t/this.Map.getTileSize().width,n=(this.Map.node.getContentSize().height-e)/this.Map.getTileSize().height;return cc.v2(o,n)},e.prototype.findWay=function(t,e,o,n,i){return void 0===i&&(i=!1),s(this,void 0,void 0,function(){var r,l,p,u=this;return c(this,function(){return r=h.default.getRoute(t,e,this.map_point,this.size),l=0,n===a.killer?o.getComponentInChildren(sp.Skeleton).setAnimation(0,"zou",!0):o.getComponent(f.default).playAni("zou",!0),(p=function(){return s(u,void 0,void 0,function(){var t,s,u,h,d=this;return c(this,function(c){switch(c.label){case 0:return l!=r.length?[3,4]:n===a.killer?[3,1]:(this.handlePlayerEnterRoom(i,o,e,n),[3,3]);case 1:return[4,this.handleKillerEnterRoom(e)];case 2:c.sent(),c.label=3;case 3:return[2];case 4:return l>0&&(t=r[l-1],s=r[l],this.setRoleDir(t,s,o)),u=r[l++],cc.tween(o).to(this.moveSpeed,{position:null===(h=this.layer_road.getTiledTileAt(u.x,u.y,!1))||void 0===h?void 0:h.node.position}).call(function(){n==a.selfRole&&(d.player_point.x=u.x,d.player_point.y=u.y),n==a.otherRole&&(o.zIndex=-o.y),p()}).start(),[2]}})})})(),n==a.selfRole&&(this.isMoving=!0,this.isBacking=i),[2]})})},e.prototype.setRoleDir=function(t,e,o){e.x<t.x?o.children[1].scaleX=-.5:e.x>t.x&&(o.children[1].scaleX=.5)},e.prototype.handlePlayerEnterRoom=function(t,e,o,n){var i=this;if(t)r=_.default.inst.getRandomPos(e,this.Map.node,"waiting"),s=Myfun.calculateDis(e.position,r),cc.tween(e).to(this.moveSpeed*s/30,{position:_.default.inst.getRandomPos(e,this.Map.node,"waiting")}).call(function(){n==a.otherRole&&(e.zIndex=-e.y),e.getComponent(f.default).playAni("daiji",!0),n==a.selfRole&&(i.isBacking=!1)}).start();else{n==a.selfRole&&(this.isMoving=!1,this.isInRoom=!0,this.showMyBet(o.targetName,this.accBet));var r=_.default.inst.getRandomPos(e,this.roomLayer,o.targetName,n),s=Myfun.calculateDis(e.position,r);cc.tween(e).to(this.moveSpeed*s/30,{position:r}).call(function(){n==a.otherRole&&(e.zIndex=-e.y),e.getComponent(f.default).playAni("daiji",!0)}).start()}},e.prototype.showMyBet=function(t,e){""!==this.lastSelectRoom&&(this.roomLayer.getChildByName(this.lastSelectRoom).children[0].active=!1),this.roomLayer.getChildByName(t).children[0].active=!0;var o=this.player_node.children[3];o.active=!0,o.children[1].getComponent(cc.Label).string=Myfun.transferNumToK(e)},e.prototype.handleKillerEnterRoom=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return e=this.getPoint(this.object_initPos,t.targetName,!0),t.x!=e.x||t.y!=e.y?[3,6]:(this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0),[4,this.playDoorAni(t.targetName,!1)]);case 1:return o.sent(),[4,this.playKillerAni()];case 2:return o.sent(),[4,this.clearRoom(t.targetName)];case 3:return o.sent(),this.checkRoundResult(),[4,this.playAllDoorAni()];case 4:return o.sent(),[4,this.allBackToWait()];case 5:return o.sent(),this.roundEnd(),[3,8];case 6:return this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0),[4,this.playDoorAni(t.targetName)];case 7:o.sent(),this.findWay(t,e,this.killerN,a.killer),o.label=8;case 8:return[2]}})})},e.prototype.playKillerAni=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return u.default.Inst.play("escape_kill1"),this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"gongji",!1),[4,this.wait(.5)];case 1:return t.sent(),this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0),this.killerN.setPosition(this.initKillerPos),[2]}})})},e.prototype.roleBeKilledAni=function(t){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return t.getComponent(f.default).beKilledAni(),[4,this.wait(.2)];case 1:return e.sent(),[2]}})})},e.prototype.clearRoom=function(t){return s(this,void 0,void 0,function(){var e,o,n,i=this;return c(this,function(r){switch(r.label){case 0:return[4,this.wait(.2)];case 1:return r.sent(),[4,Promise.all(this.roomList.map(function(e){return s(i,void 0,void 0,function(){return c(this,function(o){switch(o.label){case 0:return e.getComponent(f.default).getTarget()!=m.get(t).index?[3,2]:[4,this.roleBeKilledAni(e)];case 1:o.sent(),o.label=2;case 2:return[2]}})})}))];case 2:return r.sent(),t!==this.lastSelectRoom?[3,4]:[4,this.roleBeKilledAni(this.player_node)];case 3:r.sent(),r.label=4;case 4:return[4,this.wait(1)];case 5:for(r.sent(),this.clearRoomBetNum(),e=0,o=this.roomList.length;e<o;e++)(n=this.roomList[e]).getComponent(f.default).getTarget()==m.get(t).index&&(n.angle=0,n.getComponent(f.default).playAni("daiji",!0),n.setPosition(_.default.inst.getRandomPos(n,this.Map.node,"waiting")),this.waitingList.push(n));return t===this.lastSelectRoom&&(this.player_node.getComponent(f.default).playAni("daiji",!0),this.player_node.setPosition(_.default.inst.getRandomPos(this.player_node,this.Map.node,"waiting"))),this.roomList=this.roomList.filter(function(e){return e.getComponent(f.default).getTarget()!==m.get(t).index}),[4,this.wait(.1)];case 6:return r.sent(),[2]}})})},e.prototype.checkRoundResult=function(){return s(this,void 0,void 0,function(){return c(this,function(){return this.isInRoom?this.accBet>0?this.endTarget[this.killerEnterRoom-1]===this.lastSelectRoom?this.showPop_fail2(this.round_daggers):this.showPop_suc2(this.round_invest,this.round_get):this.endTarget[this.killerEnterRoom-1]===this.lastSelectRoom?this.showPop_fail1(this.endTarget[this.killerEnterRoom-1]):this.showPop_suc1():this.showPop_fail1(this.endTarget[this.killerEnterRoom-1]),[2]})})},e.prototype.hideRoundResult=function(){var t=cc.find("escape_result",this.content);null==t||t.destroy()},e.prototype.clearRoomBetNum=function(){null!==this.player_node&&(this.player_node.children[3].active=!1);for(var t=1;t<9;t++){var e="bet"+t;this.betRoomLayer.getChildByName(e).children[3].getComponent(cc.Label).string="0"}},e.prototype.roundEnd=function(){this.clearSelectedRoom(this.lastSelectRoom)},e.prototype.initRound=function(){this.round_RoomInvest=0,this.round_get=0,this.round_invest=0,this.round_daggers=0,this.isInRoom=!1,this.isMoving=!1,this.reselectCount=1,this.lastSelectRoom="",this.isBacking=!1,this.isKillerShow=!1,this.accBet=0},e.prototype.allBackToWait=function(){return s(this,void 0,void 0,function(){var t,e,o=this;return c(this,function(n){switch(n.label){case 0:return t=this.lastSelectRoom,e=this.killerEnterRoom,[4,Promise.all(this.roomList.map(function(t,e){return s(o,void 0,void 0,function(){var o,n;return c(this,function(i){switch(i.label){case 0:return o=t.getComponent(f.default).getTarget(),n=this.getPoint(this.object_initPos,this.endTarget[o-1]),[4,this.wait(.05*e)];case 1:return i.sent(),this.findWay(n,this.start_point_player,t,a.otherRole,!0),this.waitingList.push(t),[2]}})})}))];case 1:return n.sent(),[4,s(o,void 0,void 0,function(){var o;return c(this,function(n){switch(n.label){case 0:return""===t||t===this.endTarget[e-1]?[3,2]:(o=this.getPoint(this.object_initPos,t),this.findWay(o,this.start_point_player,this.player_node,a.selfRole,!0),[4,this.wait(.1)]);case 1:n.sent(),n.label=2;case 2:return[2]}})})];case 2:return n.sent(),this.roomList=[],[4,this.wait(2)];case 3:return n.sent(),[2]}})})},e.prototype.clearSelectedRoom=function(t){""==t||null==t?this.roomLayer.children.forEach(function(t){t.children[0].active=!1}):this.roomLayer.getChildByName(t).children[0].active=!1},e.prototype.setEndPos=function(t){if(cc.log("*********** isLogin=",p.G.isLogin,"isKillerShow=",this.isKillerShow,this.lastSelectRoom),p.G.isLogin){if(!this.isKillerShow&&!this.isBacking){var e=t.target.name;if(e!=this.lastSelectRoom){this.clearSelectedRoom(this.lastSelectRoom),this.roomLayer.getChildByName(e).children[0].active=!0;var o=this.getPoint(this.object_initPos,e,!0);this.isMoving?this.handleMovingEndPos(e,o):this.isInRoom?(this.showMyBet(e,this.accBet),this.handleInRoomEndPos(e,o)):this.handleNormalEndPos(e,o),this.lastSelectRoom=e}}}else this.showLogin()},e.prototype.handleMovingEndPos=function(t,e){cc.Tween.stopAllByTarget(this.player_node),this.reselectCount--,this.MSG_PlayerSelectOrBet(t,"1",this.accBet,this.lastSelectRoom),this.findWay(this.player_point,e,this.player_node,a.selfRole)},e.prototype.handleInRoomEndPos=function(t,e){this.reselectCount--,cc.Tween.stopAllByTarget(this.player_node),this.player_node.getComponent(f.default).playAni("daiji",!0);var o=_.default.inst.getRandomPos(this.player_node,this.roomLayer,e.targetName,a.selfRole);this.player_node.setPosition(o),this.player_node.getComponent(f.default).playTransferAni(),this.MSG_PlayerSelectOrBet(t,"1",this.accBet,this.lastSelectRoom)},e.prototype.handleNormalEndPos=function(t,e){null!==this.player_node&&(this.MSG_PlayerSelectOrBet(t),this.findWay(this.start_point_player,e,this.player_node,a.selfRole))},e.prototype.getPoint=function(t,e,o){var n=t.getObject(e);if(n){var i=this.getTilePos(n.x,n.y),r=new h.Point(i.x,i.y);return o&&(r.targetName=e),r}},e.prototype.generateRole=function(t,e){var o;return void 0===t&&(t=a.otherRole),null==(o=this.rolePool.size()>0?this.rolePool.get():cc.instantiate(this.rolePre))||o.setParent(this.mapLayer),t===a.selfRole?this.setupSelfRole(o):this.setupOtherRole(o,e),o},e.prototype.collectRole=function(t){this.rolePool.put(t)},e.prototype.setupSelfRole=function(t){t.zIndex=1e4,t.children[3].active=!1,this.player_node=t,t.getComponent(f.default).setSkin("huang"),t.children[2].active=!0,t.setPosition(_.default.inst.getRandomPos(t,this.Map.node,"waiting")),t.getComponent(f.default).playAni("daiji",!0)},e.prototype.setRoleRandomPos=function(t,e){return void 0===e&&(e=1),s(this,void 0,void 0,function(){var o;return c(this,function(){return 1==e?t.setPosition(_.default.inst.getRandomPos(t,this.Map.node,"waiting")):(o=t.getComponent(f.default).getTarget(),t.setPosition(_.default.inst.getRandomPos(t,this.roomLayer,this.endTarget[o-1]))),t.zIndex=-t.y,[2]})})},e.prototype.setupOtherRole=function(t,e){return s(this,void 0,void 0,function(){var o;return c(this,function(n){switch(n.label){case 0:return o=cc.instantiate(this.roleName),t.getComponent(f.default).setData(e,o),[4,this.wait(.2)];case 1:return n.sent(),o.parent=this.roleName.parent,o.active=!0,o.getComponent(cc.Label).string=Myfun.maskString(e.name),o.getComponent(y.default).targetNode=t,[2]}})})},e.prototype.getRole=function(t,e){return e.findIndex(function(e){return e.getComponent(f.default).getRoleId()==t})},e.prototype.getRoomBetInfo=function(t,e){var o="bet"+t,n=this.betRoomLayer.getChildByName(o).children[3].getComponent(cc.Label),i=Number(n.string);Myfun.jumpNumberAsync(i,e,.2,n)},e.prototype.moveRole=function(t){var e=this.getRole(t,this.waitingList);if(e<0)cc.warn("not found role:",t);else{var o=this.waitingList[e],n=o.getComponent(f.default).getTarget(),i=this.getPoint(this.object_initPos,this.endTarget[n-1],!0);this.findWay(this.start_point_player,i,o,a.otherRole),this.roomList.push(o),this.waitingList.splice(e,1)}},e.prototype.playDoorAni=function(t,e){return void 0===e&&(e=!0),s(this,void 0,void 0,function(){var o,n;return c(this,function(i){switch(i.label){case 0:return o=e?"Open the door":"Close the door",n=m.get(t).ani,this.doorLayer.getChildByName(n).getComponent(sp.Skeleton).setAnimation(0,o,!1),[4,this.wait(.63)];case 1:return i.sent(),[2]}})})},e.prototype.playAllDoorAni=function(t){return void 0===t&&(t=!0),s(this,void 0,void 0,function(){var e,o,n;return c(this,function(i){switch(i.label){case 0:for(e=t?"Open the door":"Close the door",o=0,n=this.doorLayer.childrenCount;o<n;o++)this.doorLayer.children[o].getComponent(sp.Skeleton).setAnimation(0,e,!1);return[4,this.wait(.63)];case 1:return i.sent(),[2]}})})},e.prototype.showKiller=function(){return s(this,void 0,void 0,function(){var t,e;return c(this,function(o){switch(o.label){case 0:return this.isKillerShow=!0,[4,this.showPop_killer()];case 1:return o.sent(),[4,this.playAllDoorAni(!1)];case 2:return o.sent(),this.killerEnterRoom>0&&this.killerEnterRoom<=8?t=this.endTarget[this.killerEnterRoom-1]:(t=Myfun.getRandomItemFromArr(this.endTarget),this.killerEnterRoom=m.get(t).index),e=this.getPoint(this.object_doorFront,t,!0),this.findWay(this.start_point_killer,e,this.killerN,a.killer),[2]}})})},e.prototype.showPop_killer=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return(t=cc.instantiate(this.popPre)).parent=this.content,t.getComponent(d.default).showKillerTip(),[4,this.wait(2)];case 1:return e.sent(),[2]}})})},e.prototype.showPop_suc1=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(){return(t=cc.instantiate(this.popPre)).parent=this.content,t.getComponent(d.default).showSuc1(this.round_RoomInvest),[2]})})},e.prototype.showPop_suc2=function(t,e){return s(this,void 0,void 0,function(){var o;return c(this,function(){return(o=cc.instantiate(this.popPre)).parent=this.content,o.getComponent(d.default).showSuc2(t,e),[2]})})},e.prototype.showPop_fail1=function(t){return s(this,void 0,void 0,function(){var e,o;return c(this,function(){return(e=cc.instantiate(this.popPre)).parent=this.content,o=m.get(t).i18n,e.getComponent(d.default).showFail1(o,this.round_RoomInvest,0),[2]})})},e.prototype.showPop_fail2=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(){return(e=cc.instantiate(this.popPre)).parent=this.content,e.getComponent(d.default).showFail2(t),[2]})})},e.prototype.wait=function(t){var e=this;return new Promise(function(o){e.scheduleOnce(function(){o()},t)})},e.prototype.btnBetSureClicked=function(t,e){if(u.default.Inst.play("escape_btn"),p.G.isLogin){if(!this.isKillerShow)if(this.isInRoom||this.isMoving){var o=this.betNumList[Number(e)];o>p.G.player.accountCoinInfo.escape_gold?_.default.inst.showWarning("escape_tip2"):(this.MSG_PlayerSelectOrBet(this.lastSelectRoom,"2",o),this.accBet=Myfun.sumFloat(this.accBet,o),p.G.player.accountCoinInfo.escape_gold=Myfun.diffFloat(p.G.player.accountCoinInfo.escape_gold,o),this.loadAccountInfo(),this.isInRoom&&this.showMyBet(this.lastSelectRoom,this.accBet))}else _.default.inst.showWarning("escape_tip1")}else this.showLogin()},e.prototype.btnRecordClicked=function(){u.default.Inst.play("escape_btn"),p.G.isLogin?(this.btn_back.active=!0,cc.instantiate(this.recordPre).parent=this.content2,this.mainLayer.opacity=0,this.curLayer=l.RECORD):this.showLogin()},e.prototype.btnRankCLicked=function(){u.default.Inst.play("escape_btn"),this.btn_back.active=!0,cc.instantiate(this.rankPre).parent=this.content2,this.mainLayer.opacity=0,this.curLayer=l.RANK},e.prototype.btnRuleClicked=function(){u.default.Inst.play("escape_btn"),this.btn_back.active=!0,cc.instantiate(this.rulePre).parent=this.content2,this.mainLayer.opacity=0,this.curLayer=l.RULE},e.prototype.btnShopClicked=function(){var t=this;u.default.Inst.play("escape_btn"),p.G.isLogin?_.default.inst.showCoinShop(function(e){p.G.player.accountCoinInfo.escape_gold+=e,t.loadAccountInfo()}):this.showLogin()},e.prototype.showLogin=function(){_.default.inst.showLogin()},e.prototype.btnCloseClicked=function(){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return u.default.Inst.play("escape_btn"),this.curLayer!=l.MAIN?[3,2]:(this.cancelListenMsg(),[4,this.MSG_playerLeave()]);case 1:return t.sent(),cc.director.loadScene("start"),[3,3];case 2:this.btn_back.active=!1,this.curLayer=l.MAIN,this.mainLayer.opacity=255,this.content2.removeAllChildren(),t.label=3;case 3:return[2]}})})},e.prototype.btnDollarClicked=function(){var t=this;u.default.Inst.play("escape_btn"),p.G.isLogin?_.default.inst.showDollarShop(function(){t.loadAccountInfo()}):this.showLogin()},e.prototype.btnBoxClicked=function(){u.default.Inst.play("escape_btn"),p.G.isLogin?_.default.inst._loadBox():this.showLogin()},e.prototype.btnFriendClicked=function(){u.default.Inst.play("escape_btn")},e.prototype.btnDaggerClicked=function(){u.default.Inst.play("escape_btn"),p.G.isLogin||this.showLogin()},e.prototype.btnSetClicked=function(){u.default.Inst.play("escape_btn"),p.G.isLogin?_.default.inst._loadSetting():this.showLogin()},r([b(cc.Node)],e.prototype,"mainLayer",void 0),r([b(cc.Node)],e.prototype,"content",void 0),r([b(cc.Label)],e.prototype,"gemLab",void 0),r([b(cc.TiledMap)],e.prototype,"Map",void 0),r([b(cc.Node)],e.prototype,"mapLayer",void 0),r([b(cc.Node)],e.prototype,"roomLayer",void 0),r([b(cc.Node)],e.prototype,"betRoomLayer",void 0),r([b(cc.Prefab)],e.prototype,"rolePre",void 0),r([b(cc.Node)],e.prototype,"killerN",void 0),r([b(cc.Node)],e.prototype,"roleName",void 0),r([b(cc.Node)],e.prototype,"doorLayer",void 0),r([b(cc.Node)],e.prototype,"time",void 0),r([b(cc.Node)],e.prototype,"btn_back",void 0),r([b(cc.Label)],e.prototype,"periodsLab",void 0),r([b(cc.Label)],e.prototype,"gameCoin",void 0),r([b(cc.Prefab)],e.prototype,"recordPre",void 0),r([b(cc.Prefab)],e.prototype,"rankPre",void 0),r([b(cc.Prefab)],e.prototype,"popPre",void 0),r([b(cc.Prefab)],e.prototype,"rulePre",void 0),r([b(cc.Node)],e.prototype,"content2",void 0),r([v],e)}(cc.Component);o.default=w,cc._RF.pop()},{"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0,"./AStar":"AStar","./escapeMgr":"escapeMgr","./escape_pop":"escape_pop","./escape_role":"escape_role","./follow":"follow"}],follow:[function(t,e,o){"use strict";cc._RF.push(e,"7f861vruK9E9Lw4RlUBxitS","follow");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetNode=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.setData=function(){},e.prototype.update=function(){this.node.active&&(this.node.x=this.targetNode.x+this.targetNode.width/2,this.node.y=this.targetNode.y+this.targetNode.height+10)},r([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],iconSet:[function(t,e,o){"use strict";cc._RF.push(e,"cee92lASehABa7SpOQ0s/Vj","iconSet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../core_lmn/core"),c=t("../../scripts/G"),a=t("../../scripts/Sound_Mgr"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e.item=null,e.iconSF=[],e.cb=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this._loadIconList()},e.prototype.setCall=function(t){this.cb=t},e.prototype._loadIconList=function(){for(var t=this,e=function(e){var n=cc.instantiate(o.item);n.active=!0,n.parent=o.list,n.getComponent(cc.Sprite).spriteFrame=o.iconSF[e],n.children[0].active=c.G.iconId==e,n.on("click",function(){t._clearSelectFlag(),n.children[0].active=!0,c.G.iconId=e})},o=this,n=0;n<8;n++)e(n)},e.prototype._clearSelectFlag=function(){for(var t=0,e=this.list.childrenCount;t<e;t++)this.list.children[t].children[0].active=!1},e.prototype.btnCancelClicked=function(){a.default.Inst.play("escape_btn"),this.hide()},e.prototype.btnSureCLicked=function(){a.default.Inst.play("escape_btn"),this.cb&&this.cb(),this.hide()},e.prototype.onAfterHide=function(){this.node.destroy()},r([u(cc.Node)],e.prototype,"list",void 0),r([u(cc.Node)],e.prototype,"item",void 0),r([u(cc.SpriteFrame)],e.prototype,"iconSF",void 0),r([p],e)}(s.PopupBase);o.default=h,cc._RF.pop()},{"../../core_lmn/core":void 0,"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0}],item_record:[function(t,e,o){"use strict";cc._RF.push(e,"66b8e1nCGJL8rvO2kD7mdHL","item_record");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../core_lmn/core"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.issueLab=null,e.timeLab=null,e.resultLab=null,e.betRoom=null,e.killRoom=null,e.investLab=null,e.getLab=null,e.iconList=[],e}return i(e,t),e.prototype.start=function(){},e.prototype.setData=function(t){this.issueLab.string="Issue "+t.periods,this.timeLab.string="",0!==t.killroomid&&(t.roomid!==t.killroomid?(this.resultLab.color=Myfun.hexToRGBA("#edb284"),this.resultLab.getComponent(s.i18nLabel).init("static_escape_result1",[])):(this.resultLab.color=Myfun.hexToRGBA("#d30000"),this.resultLab.getComponent(s.i18nLabel).init("static_escape_result2",[]))),this.betRoom.spriteFrame=this.iconList[t.roomid],this.killRoom.spriteFrame=this.iconList[t.killroomid],this.investLab.string=t.invest.toString(),this.getLab.string=t.returns.toString()},r([l(cc.Label)],e.prototype,"issueLab",void 0),r([l(cc.Label)],e.prototype,"timeLab",void 0),r([l(cc.Node)],e.prototype,"resultLab",void 0),r([l(cc.Sprite)],e.prototype,"betRoom",void 0),r([l(cc.Sprite)],e.prototype,"killRoom",void 0),r([l(cc.Label)],e.prototype,"investLab",void 0),r([l(cc.Label)],e.prototype,"getLab",void 0),r([l(cc.SpriteFrame)],e.prototype,"iconList",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../core_lmn/core":void 0}],resetPwd:[function(t,e,o){"use strict";cc._RF.push(e,"7bb42PBq8ZOKZ1f24Z/OYkW","resetPwd");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../scripts/G"),l=t("../../scripts/Sound_Mgr"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.phone_edit_box=null,e.pwd_edit_box=null,e.rpwd_edit_box=null,e.phonecode_edit_box=null,e.btnGetCode=null,e.codeLab=null,e.placeholder="",e.curPhoneCode="",e.curPhoneObjId="",e.timeCountFun=null,e.throttleRegister=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.editBoxDidBegan=function(t){""!==t.placeholder&&(this.placeholder=t.placeholder,t.string="",t.placeholder="")},e.prototype.editBoxDidEnded=function(t){""==t.string&&(t.placeholder=this.placeholder)},e.prototype.btnGetCodeClicked=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return l.default.Inst.play("escape_btn"),a.G.validator.isMobilePhone(this.phone_edit_box.string,"any")?(this.btnGetCode.active=!1,this.showTime(90),[4,a.G.getPhoneCode(this.phone_edit_box.string)]):(a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip4"),[2]);case 1:return null!==(t=e.sent())&&1===t.result&&(this.curPhoneCode=t.statecode,this.curPhoneObjId=t.objid),[2]}})})},e.prototype.timeEndCall=function(){this.unschedule(this.timeCountFun),this.btnGetCode.active=!0,this.codeLab.fontSize=40,this.codeLab.string="Get verification code"},e.prototype.showTime=function(t){var e=this;this.codeLab.fontSize=50,this.codeLab.string=t+"s",t--,this.schedule(this.timeCountFun=function(){t>0?(e.codeLab.string=t+"s",t--):e.timeEndCall()},1)},e.prototype.checkInput=function(){var t=this.phone_edit_box.string;if(a.G.validator.isMobilePhone(t,"any")){var e=this.pwd_edit_box.string;if(""!=e)if(e.length<6)a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip9");else{var o=this.rpwd_edit_box.string;if(""!=o)if(""===o||o===e){if(""!=this.curPhoneCode&&this.phonecode_edit_box.string===this.curPhoneCode)return!0;a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip6")}else a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip11");else a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip10")}else a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip2")}else a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip4")},e.prototype.getInput=function(){return{objid:this.curPhoneObjId,source:1,phoneNumber:this.phone_edit_box.string,newpwd:this.pwd_edit_box.string}},e.prototype.btnSureClicked=function(){return s(this,void 0,void 0,function(){var t,e=this;return c(this,function(){return l.default.Inst.play("escape_btn"),this.checkInput()&&(t=function(){return s(e,void 0,void 0,function(){var t,e;return c(this,function(o){switch(o.label){case 0:return[4,a.G.clientHttp.callApi("ResetPwd",this.getInput())];case 1:return(t=o.sent()).isSucc?(1==t.res.result&&(a.G.eventMsg.emit(MI.MSG.tip,"static_login_tip13"),this.node.destroy()),[2]):(a.G.eventMsg.emit(MI.MSG.tip,null===(e=t.err)||void 0===e?void 0:e.message),[2])}})})},null==this.throttleRegister?(this.throttleRegister=Myfun.throttle(t,1500),this.throttleRegister()):this.throttleRegister()),[2]})})},e.prototype.btnCloseClicked=function(){l.default.Inst.play("escape_btn"),this.node.destroy()},r([h(cc.EditBox)],e.prototype,"phone_edit_box",void 0),r([h(cc.EditBox)],e.prototype,"pwd_edit_box",void 0),r([h(cc.EditBox)],e.prototype,"rpwd_edit_box",void 0),r([h(cc.EditBox)],e.prototype,"phonecode_edit_box",void 0),r([h(cc.Node)],e.prototype,"btnGetCode",void 0),r([h(cc.Label)],e.prototype,"codeLab",void 0),r([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0}],revenge:[function(t,e,o){"use strict";cc._RF.push(e,"7bbd66gNHNBaJCU5KFDpvKd","revenge");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../scripts/G"),l=t("../../scripts/Sound_Mgr"),p=t("./AStar"),u=t("./escape_role"),h=t("./follow"),d=t("./escapeMgr"),f=cc._decorator,y=f.ccclass,_=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Map=null,e.mapLayer=null,e.roomLayer=null,e.doorLayer=null,e.killerN=null,e.roleName=null,e.rolePre=null,e.daggerLab=null,e.timeN=null,e.layer_road=null,e.object_initPos=null,e.object_doorFront=null,e.start_point_player=null,e.start_point_killer=null,e.map_point=new Map,e.size=null,e.player_node=null,e.player_point=new p.Point(0,0),e.isMoving=!1,e.isInRoom=!1,e.isKillerShow=!1,e.waitingList=[],e.roomList=[],e.rolePool=null,e.poolSize=60,e.initKillerPos=null,e.moveSpeed=.1,e.accBet=0,e.lastSelectRoom="",e.isBacking=!1,e}return i(e,t),e.prototype.start=function(){this.rolePool=new cc.NodePool,this.initPlayerPool(),this.readMap()},e.prototype.readMap=function(){this.layer_road=this.Map.getLayer("floor").getComponent(cc.TiledLayer);var t=this.Map.getLayer("wall").getComponent(cc.TiledLayer);this.object_initPos=this.Map.getObjectGroup("initPos"),this.size=this.Map.getMapSize(),this.start_point_player=this.getPoint(this.object_initPos,"start_player"),this.start_point_killer=this.getPoint(this.object_initPos,"start_killer"),this.initKillerPos=this.killerN.getPosition();for(var e=0;e<this.size.width;e++)for(var o=0;o<this.size.height;o++){var n=this.layer_road.getTiledTileAt(e,o,!0),i=t.getTiledTileAt(e,o,!0);if(0!==n.gid&&0===i.gid){var r=new p.Point(e,o);this.map_point.set(e+o*this.size.width,r)}}},e.prototype.getPoint=function(t,e,o){var n=t.getObject(e);if(n){var i=this.getTilePos(n.x,n.y),r=new p.Point(i.x,i.y);return o&&(r.targetName=e),r}},e.prototype.getTilePos=function(t,e){var o=t/this.Map.getTileSize().width,n=(this.Map.node.getContentSize().height-e)/this.Map.getTileSize().height;return cc.v2(o,n)},e.prototype.initPlayerPool=function(){for(var t=0;t<this.poolSize;++t){var e=cc.instantiate(this.rolePre);this.rolePool.put(e)}},e.prototype.findWay=function(t,e,o,n,i){var r;return void 0===i&&(i=!1),s(this,void 0,void 0,function(){var a,l,h,f,y,_=this;return c(this,function(){return a=p.default.getRoute(t,e,this.map_point,this.size),l=0,n===d.RoleType.killer?o.getComponentInChildren(sp.Skeleton).setAnimation(0,"zou",!0):o.getComponent(u.default).playAni("zou",!0),h=null===(r=this.layer_road.getTiledTileAt(a[0].x,a[0].y,!1))||void 0===r?void 0:r.node.position,o.position.x<h.x?o.children[1].scaleX=.5:o.children[1].scaleX=-.5,f=Myfun.calculateDis(o.position,h),cc.tween(o).to(this.moveSpeed*f/30,{position:h}).call(function(){y(),n==d.RoleType.selfRole&&(_.isMoving=!0,_.isBacking=i)}).start(),y=function(){return s(_,void 0,void 0,function(){var t,r,s,p=this;return c(this,function(c){switch(c.label){case 0:return l!=a.length?[3,4]:n===d.RoleType.killer?[3,1]:(this.handlePlayerEnterRoom(i,o,e,n),[3,3]);case 1:return[4,this.handleKillerEnterRoom(e)];case 2:c.sent(),c.label=3;case 3:return[2];case 4:return l>0&&(t=a[l-1],r=a[l],this.setRoleDir(t,r,o)),s=a[l++],cc.tween(o).to(this.moveSpeed,{position:this.layer_road.getTiledTileAt(s.x,s.y,!1).node.position}).call(function(){n==d.RoleType.selfRole&&(p.player_point.x=s.x,p.player_point.y=s.y),y()}).start(),[2]}})})},[2]})})},e.prototype.handlePlayerEnterRoom=function(t,e,o,n){var i=this;if(t)s=d.default.inst.getRandomPos(e,this.Map.node,"waiting"),c=Myfun.calculateDis(e.position,s),cc.tween(e).to(this.moveSpeed*c/30,{position:d.default.inst.getRandomPos(e,this.Map.node,"waiting")}).call(function(){n==d.RoleType.otherRole&&(e.zIndex=-e.y),e.getComponent(u.default).playAni("daiji",!0),n==d.RoleType.selfRole&&(i.isBacking=!1)}).start();else{n==d.RoleType.selfRole&&(this.isMoving=!1,this.isInRoom=!0,this.showMyBet(o.targetName,this.accBet));var r=this.roomLayer.getChildByName(o.targetName),s=d.default.inst.getRandomPos(e,r,"area",n),c=Myfun.calculateDis(e.position,s);cc.tween(e).to(this.moveSpeed*c/30,{position:s}).call(function(){n==d.RoleType.otherRole&&(e.zIndex=-e.y),e.getComponent(u.default).playAni("daiji",!0)}).start()}},e.prototype.handleKillerEnterRoom=function(){this.killerN.getComponentInChildren(sp.Skeleton).setAnimation(0,"daiji",!0)},e.prototype.setRoleDir=function(t,e,o){e.x<t.x?o.children[1].scaleX=-.5:e.x>t.x&&(o.children[1].scaleX=.5)},e.prototype.btnBetClick=function(){this.isKillerShow||this.isInRoom||this.isMoving||cc.log("\u5148\u9009\u623f\u95f4")},e.prototype.setRoomClick=function(t){if(!this.isKillerShow&&null!=this.player_node){var e=t.target.name;if(e!=this.lastSelectRoom){this.clearSelectedRoom(this.lastSelectRoom),this.roomLayer.getChildByName(e).children[0].active=!0;var o=this.getPoint(this.object_initPos,e,!0);this.isMoving?this.handleMovingEndPos(e,o):this.isInRoom?(this.showMyBet(e,this.accBet),this.handleInRoomEndPos(e,o)):this.handleNormalEndPos(e,o),this.lastSelectRoom=e}}},e.prototype.clearSelectedRoom=function(t){""==t||null==t?this.roomLayer.children.forEach(function(t){t.children[0].active=!1}):this.roomLayer.getChildByName(t).children[0].active=!1},e.prototype.showMyBet=function(t,e){""!==this.lastSelectRoom&&(this.roomLayer.getChildByName(this.lastSelectRoom).children[0].active=!1),this.roomLayer.getChildByName(t).children[0].active=!0;var o=this.player_node.children[3];o.active=!0,o.children[1].getComponent(cc.Label).string=Myfun.transferNumToK(e)},e.prototype.handleMovingEndPos=function(t,e){cc.Tween.stopAllByTarget(this.player_node),this.findWay(this.player_point,e,this.player_node,d.RoleType.selfRole)},e.prototype.handleInRoomEndPos=function(t,e){var o=d.default.inst.getRandomPos(this.player_node,this.roomLayer,e.targetName,d.RoleType.selfRole);this.player_node.setPosition(o),this.player_node.getComponent(u.default).playTransferAni()},e.prototype.handleNormalEndPos=function(t,e){null!==this.player_node&&this.findWay(this.start_point_player,e,this.player_node,d.RoleType.selfRole)},e.prototype.generateRole=function(t,e){var o;return void 0===t&&(t=d.RoleType.otherRole),(o=this.rolePool.size()>0?this.rolePool.get():cc.instantiate(this.rolePre)).parent=this.mapLayer,t===d.RoleType.selfRole?this.setupSelfRole(o):this.setupOtherRole(o,e),o},e.prototype.setupSelfRole=function(t){t.zIndex=1e4,this.player_node=t,this.player_node.getComponent(u.default).setSkin("huang"),t.children[2].active=!0,t.setPosition(d.default.inst.getRandomPos(t,this.Map.node,"waiting"))},e.prototype.setupOtherRole=function(t,e){return s(this,void 0,void 0,function(){var o;return c(this,function(){return o=cc.instantiate(this.roleName),t.getComponent(u.default).setData(e,o),o.parent=this.roleName.parent,o.active=!0,o.getComponent(cc.Label).string=Myfun.maskString(e.name),o.getComponent(h.default).targetNode=t,[2]})})},e.prototype.setRoleRandomPos=function(t,e){return void 0===e&&(e=1),s(this,void 0,void 0,function(){var o,n;return c(this,function(){return 1==e?t.setPosition(d.default.inst.getRandomPos(t,this.Map.node,"waiting")):(o=t.getComponent(u.default).getTarget(),n=this.roomLayer.getChildByName("player_end"+o),t.setPosition(d.default.inst.getRandomPos(t,n,"area"))),t.zIndex=-t.y,[2]})})},e.prototype.showKiller=function(){return s(this,void 0,void 0,function(){var t;return c(this,function(){return this.isKillerShow?[2]:(this.isKillerShow=!0,this._playHideRoomDoorAni(!1),t=this.getPoint(this.object_initPos,"killer_end1",!0),this.findWay(this.start_point_killer,t,this.killerN,d.RoleType.killer),[2])})})},e.prototype._playHideRoomDoorAni=function(t){void 0===t&&(t=!0),this.playDoorAni("door4",t),this.playDoorAni("door5",t)},e.prototype.playDoorAni=function(t,e){return void 0===e&&(e=!0),s(this,void 0,void 0,function(){var o;return c(this,function(){return o=e?"Open the door":"Close the door",this.doorLayer.getChildByName(t).getComponent(sp.Skeleton).setAnimation(0,o,!1),[2]})})},e.prototype.btnBetSureClicked=function(){l.default.Inst.play("escape_btn"),this.isKillerShow||(this.isInRoom||this.isMoving?0>a.G.player.accountCoinInfo.escape_gold?d.default.inst.showWarning("escape_tip2"):(this.accBet=Myfun.sumFloat(this.accBet,0),this._loadAccountInfo(),this.isInRoom&&this.showMyBet(this.lastSelectRoom,this.accBet)):d.default.inst.showWarning("escape_tip1"))},e.prototype._loadAccountInfo=function(){},e.prototype.btnRecordClicked=function(){l.default.Inst.play("escape_btn")},e.prototype.btnRuleClicked=function(){l.default.Inst.play("escape_btn")},e.prototype.testPlayer=function(){null==this.player_node&&this.generateRole(d.RoleType.selfRole)},r([_(cc.TiledMap)],e.prototype,"Map",void 0),r([_(cc.Node)],e.prototype,"mapLayer",void 0),r([_(cc.Node)],e.prototype,"roomLayer",void 0),r([_(cc.Node)],e.prototype,"doorLayer",void 0),r([_(cc.Node)],e.prototype,"killerN",void 0),r([_(cc.Node)],e.prototype,"roleName",void 0),r([_(cc.Prefab)],e.prototype,"rolePre",void 0),r([_(cc.Label)],e.prototype,"daggerLab",void 0),r([_(cc.Node)],e.prototype,"timeN",void 0),r([y],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0,"./AStar":"AStar","./escapeMgr":"escapeMgr","./escape_role":"escape_role","./follow":"follow"}],setting:[function(t,e,o){"use strict";cc._RF.push(e,"cf70evjG1FP95N268HzSCR4","setting");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/G"),c=t("../../scripts/Sound_Mgr"),a=t("./editPlayerName"),l=t("./escapeMgr"),p=t("./iconSet"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerIcon=null,e.playerName=null,e.playerID=null,e.iconSetPre=null,e.sharePre=null,e.nameSetPre=null,e.audioSetPre=null,e.resetPwdPre=null,e.iconSF=[],e}return i(e,t),e.prototype.start=function(){this.loadPlayerData()},e.prototype.loadPlayerData=function(){this.playerName.string=""==s.G.uname?"xxxxxxxxx":s.G.uname,this.playerID.string="ID:"+Myfun.maskString(s.G.uid,4,4),this.playerIcon.spriteFrame=this.iconSF[s.G.iconId]},e.prototype.btnEditNameClicked=function(){var t=this;c.default.Inst.play("escape_btn");var e=cc.instantiate(this.nameSetPre);e.getComponent(a.default).setCall(function(){t.loadPlayerData()}),e.parent=this.node},e.prototype.btnCopyIDClicked=function(){c.default.Inst.play("escape_btn"),Myfun.copyToClip(s.G.uid,function(){l.default.inst.showWarning("\u590d\u5236\u6210\u529f!")})},e.prototype.iconSetClicked=function(){var t=this;c.default.Inst.play("escape_btn");var e=cc.instantiate(this.iconSetPre);e.getComponent(p.default).setCall(function(){t.loadPlayerData()}),e.parent=this.node},e.prototype.shareClicked=function(){c.default.Inst.play("escape_btn"),cc.instantiate(this.sharePre).parent=this.node},e.prototype.audioSetClicked=function(){c.default.Inst.play("escape_btn"),cc.instantiate(this.audioSetPre).parent=this.node},e.prototype.resetPwdClicked=function(){c.default.Inst.play("escape_btn"),cc.instantiate(this.resetPwdPre).parent=this.node},e.prototype.btnLogoutClicked=function(){c.default.Inst.play("escape_btn"),s.G.uid="",s.G.clientWsDisConnect(),cc.director.loadScene("start")},e.prototype.btnCloseClicked=function(){c.default.Inst.play("escape_btn"),l.default.inst._loadEscape(),this.node.destroy()},r([d(cc.Sprite)],e.prototype,"playerIcon",void 0),r([d(cc.Label)],e.prototype,"playerName",void 0),r([d(cc.Label)],e.prototype,"playerID",void 0),r([d(cc.Prefab)],e.prototype,"iconSetPre",void 0),r([d(cc.Prefab)],e.prototype,"sharePre",void 0),r([d(cc.Prefab)],e.prototype,"nameSetPre",void 0),r([d(cc.Prefab)],e.prototype,"audioSetPre",void 0),r([d(cc.Prefab)],e.prototype,"resetPwdPre",void 0),r([d(cc.SpriteFrame)],e.prototype,"iconSF",void 0),r([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../scripts/G":void 0,"../../scripts/Sound_Mgr":void 0,"./editPlayerName":"editPlayerName","./escapeMgr":"escapeMgr","./iconSet":"iconSet"}],share:[function(t,e,o){"use strict";cc._RF.push(e,"2a0f4iZM9dPcJjfO2OxK3ge","share");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../core_lmn/core"),c=cc._decorator,a=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this.init(),this.createCanvas()},e.prototype.btnDownloadClick=function(){var t=this,e=this.createImg();this.scheduleOnce(function(){t.showImage(e),t.saveImg()},.5)},e.prototype.btnCloseClicked=function(){this.node.destroy()},r([a],e)}(s.textureRenderUtil));o.default=l,cc._RF.pop()},{"../../core_lmn/core":void 0}]},{},["AStar","audioSet","box","box_item","box_tip","editPlayerName","escape","escapeMgr","escape_getItem","escape_giftPack","escape_hint","escape_login","escape_pop","escape_rank","escape_record","escape_role","escape_shop","escape_tip","follow","iconSet","item_record","resetPwd","revenge","setting","share"]);